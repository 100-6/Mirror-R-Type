{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"R-Type","text":"<p>A modern, modular game engine for building R-Type and other multiplayer games</p> <p> </p>"},{"location":"#about","title":"About","text":"<p>R-Type is a game engine built from scratch in C++20, designed to recreate the classic R-Type shoot 'em up game with modern architecture and extensibility. The engine features a plugin-based system, allowing developers to swap graphics, audio, and networking implementations seamlessly.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Plugin Architecture - Modular design with hot-swappable plugins for graphics, audio, and networking</li> <li>Multiplayer Ready - Built-in client-server architecture with UDP networking via Boost.Asio</li> <li>Multiple Renderers - Support for Raylib graphics backend (extensible to SFML, SDL, etc.)</li> <li>Audio System - Integrated audio plugin based on MiniAudio</li> <li>Event Bus - Decoupled communication system for game events</li> <li>ECS Architecture - Entity Component System for efficient game object management</li> <li>Cross-Platform - Windows, Linux, and macOS support via vcpkg</li> </ul>"},{"location":"#documentation","title":"Documentation","text":""},{"location":"#getting-started","title":"Getting Started","text":"<ul> <li>Setup Guide - Get started with building and running the project</li> <li>Developer Guide - Contributing guidelines and development workflow</li> </ul>"},{"location":"#architecture","title":"Architecture","text":"<ul> <li>\ud83d\udcda Documentation Hub - Point d'entr\u00e9e de toute la documentation</li> <li>Server Architecture - Architecture d\u00e9taill\u00e9e du serveur</li> <li>Client Architecture - Architecture d\u00e9taill\u00e9e du client</li> </ul>"},{"location":"#game-systems","title":"Game Systems","text":"<ul> <li>Wave System Guide - JSON-based wave spawning system documentation</li> <li>Procedural Generation - Runtime procedural map generation system</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#prerequisites","title":"Prerequisites","text":"<ul> <li>CMake 3.20+</li> <li>C++20 compatible compiler (GCC 12+, Clang 15+, or MSVC 2022+)</li> <li>vcpkg (automatically setup by the project)</li> </ul>"},{"location":"#build","title":"Build","text":"<pre><code># Clone vcpkg (first time only)\ngit clone https://github.com/Microsoft/vcpkg.git\ncd vcpkg &amp;&amp; ./bootstrap-vcpkg.sh &amp;&amp; cd ..\n\n# Build the project\ncmake -B build\ncmake --build build\n\n# Run the game\n./build/r_type_client\n./build/r_type_server\n</code></pre> <p>For detailed build instructions, see Setup Guide.</p>"},{"location":"#downloads-releases","title":"Downloads &amp; Releases","text":"<p>Looking for a ready-to-play version? Check out our GitHub Releases page!</p>"},{"location":"#windows-users","title":"Windows Users","text":"<p>Download <code>RType-Setup.exe</code> for an easy installation with shortcuts, or <code>RType-Windows-x64.zip</code> for a portable version.</p>"},{"location":"#for-developers","title":"For Developers","text":"<p>Want to create a release? See the Release Guide for instructions on building Windows installers.</p>"},{"location":"#project-structure","title":"Project Structure","text":"<pre><code>Mirror-R-Type/\n\u251c\u2500\u2500 engine/               # Core engine code\n\u2502   \u251c\u2500\u2500 include/         # Public engine headers\n\u2502   \u251c\u2500\u2500 src/             # Engine implementation\n\u2502   \u251c\u2500\u2500 plugin_manager/  # Plugin loading system\n\u2502   \u2514\u2500\u2500 plugins/         # Official plugins\n\u2502       \u251c\u2500\u2500 graphics/    # Graphics backends (Raylib)\n\u2502       \u251c\u2500\u2500 audio/       # Audio backends (MiniAudio)\n\u2502       \u2514\u2500\u2500 network/     # Network backends (Asio)\n\u251c\u2500\u2500 client/              # Game client application\n\u251c\u2500\u2500 server/              # Game server application\n\u251c\u2500\u2500 tests/               # Unit and integration tests\n\u251c\u2500\u2500 assets/              # Game assets (sprites, sounds, etc.)\n\u2514\u2500\u2500 docs/                # Documentation\n</code></pre>"},{"location":"#plugin-system","title":"Plugin System","text":"<p>The engine uses a dynamic plugin architecture:</p> <ul> <li>Graphics Plugins - Rendering backends (Raylib, SFML, etc.)</li> <li>Audio Plugins - Sound systems (MiniAudio, OpenAL, etc.)</li> <li>Network Plugins - Networking implementations (Asio UDP/TCP, ENet, etc.)</li> <li>Input Plugins - Input handling systems</li> </ul> <p>Create your own plugins by implementing the provided interfaces. See the Plugin Creation Guide.</p>"},{"location":"#gameplay","title":"Gameplay","text":"<p>R-Type is a faithful recreation of the classic shoot 'em up:</p> <ul> <li>Side-scrolling shooter with procedurally generated levels</li> <li>Multiplayer co-op support up to 4 players</li> <li>Power-ups and weapons system</li> <li>Enemy AI with various patterns</li> <li>Boss battles with multiple phases</li> </ul>"},{"location":"#development","title":"Development","text":""},{"location":"#building-from-source","title":"Building from Source","text":"<p>See the detailed Setup Guide for platform-specific instructions.</p>"},{"location":"#contributing","title":"Contributing","text":"<p>We welcome contributions! Please read our Developer Guide and Contributing Guidelines before submitting a PR.</p>"},{"location":"#code-quality","title":"Code Quality","text":"<ul> <li>C++20 modern C++ practices</li> <li>clang-tidy linting (optional, see Developer Guide)</li> <li>Unit tests with Google Test</li> <li>Documentation with inline comments and separate guides</li> </ul>"},{"location":"#networking","title":"Networking","text":"<p>The engine implements a robust client-server architecture:</p> <ul> <li>UDP Protocol for real-time gameplay</li> <li>Client Prediction for responsive controls</li> <li>Server Reconciliation for authoritative gameplay</li> <li>Entity Interpolation for smooth visuals</li> </ul>"},{"location":"#dependencies","title":"Dependencies","text":"<p>All dependencies are managed via vcpkg:</p> <ul> <li>Boost.Asio - Async networking</li> <li>Raylib - Graphics rendering</li> <li>MiniAudio - Audio playback</li> </ul> <p>For system dependencies and development tools, see Setup Guide.</p>"},{"location":"#license","title":"License","text":"<p>This project is part of the EPITECH curriculum.</p>"},{"location":"#authors","title":"Authors","text":"<p>EPITECH Project 2025 - R-Type</p>"},{"location":"#links","title":"Links","text":"<ul> <li>Original R-Type</li> <li>Project Documentation</li> </ul>"},{"location":"CLIENT_ARCHITECTURE/","title":"Architecture du Client R-Type","text":""},{"location":"CLIENT_ARCHITECTURE/#vue-densemble","title":"Vue d'ensemble","text":"<p>Le client R-Type est une application graphique multijoueur qui se connecte au serveur de jeu, affiche le rendu du jeu et envoie les inputs du joueur.</p>"},{"location":"CLIENT_ARCHITECTURE/#architecture-globale","title":"Architecture globale","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                       main.cpp                              \u2502\n\u2502                    (Point d'entr\u00e9e)                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     ClientGame                              \u2502\n\u2502              (Orchestration du jeu)                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 Texture  \u2502 \u2502 Input   \u2502 \u2502 Screen   \u2502 \u2502    Entity     \u2502 \u2502\n\u2502  \u2502 Manager  \u2502 \u2502 Handler \u2502 \u2502 Manager  \u2502 \u2502   Manager     \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\n\u2502  \u2502    Status    \u2502      \u2502       NetworkClient             \u2502\u2502\n\u2502  \u2502   Overlay    \u2502      \u2502   (Gestion r\u00e9seau)              \u2502\u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\n\u2502                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502                        \u2502                    \u2502\n          \u25bc                        \u25bc                    \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502   Registry    \u2502       \u2502   Plugins    \u2502    \u2502  INetwork     \u2502\n  \u2502     (ECS)     \u2502       \u2502 (Graphics,   \u2502    \u2502   Plugin      \u2502\n  \u2502               \u2502       \u2502  Input, etc) \u2502    \u2502               \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"CLIENT_ARCHITECTURE/#composants-principaux","title":"Composants principaux","text":""},{"location":"CLIENT_ARCHITECTURE/#1-clientgame-classe-principale","title":"1. ClientGame (Classe principale)","text":"<p>Fichier: <code>src/r-type/client/include/ClientGame.hpp</code></p> <p>Responsabilit\u00e9s: - Orchestration de tous les composants du jeu - Initialisation des plugins (graphics, input, audio, network) - Configuration du registre ECS - Setup des syst\u00e8mes de jeu - Boucle de jeu principale - Gestion des callbacks r\u00e9seau</p> <p>Membres cl\u00e9s: <pre><code>class ClientGame {\nprivate:\n    // Plugins\n    engine::IGraphicsPlugin* graphics_plugin_;\n    engine::IInputPlugin* input_plugin_;\n    engine::IAudioPlugin* audio_plugin_;\n    engine::INetworkPlugin* network_plugin_;\n\n    // ECS\n    std::unique_ptr&lt;Registry&gt; registry_;\n\n    // Composants de jeu\n    std::unique_ptr&lt;TextureManager&gt; texture_manager_;\n    std::unique_ptr&lt;ScreenManager&gt; screen_manager_;\n    std::unique_ptr&lt;EntityManager&gt; entity_manager_;\n    std::unique_ptr&lt;StatusOverlay&gt; status_overlay_;\n    std::unique_ptr&lt;InputHandler&gt; input_handler_;\n\n    // R\u00e9seau\n    std::unique_ptr&lt;NetworkClient&gt; network_client_;\n};\n</code></pre></p> <p>Cycle de vie: <pre><code>initialize()\n    \u251c\u2500\u25ba load_plugins()\n    \u251c\u2500\u25ba setup_registry()\n    \u251c\u2500\u25ba setup_systems()\n    \u251c\u2500\u25ba load_textures()\n    \u251c\u2500\u25ba setup_background()\n    \u251c\u2500\u25ba setup_network_callbacks()\n    \u2514\u2500\u25ba connect()\n        \u2193\nrun()  [Boucle principale]\n    \u251c\u2500\u25ba update(dt)\n    \u251c\u2500\u25ba handle_input()\n    \u251c\u2500\u25ba update_projectiles()\n    \u251c\u2500\u25ba run_systems()\n    \u2514\u2500\u25ba display()\n        \u2193\nshutdown()\n    \u251c\u2500\u25ba disconnect()\n    \u2514\u2500\u25ba cleanup_plugins()\n</code></pre></p>"},{"location":"CLIENT_ARCHITECTURE/#2-texturemanager","title":"2. TextureManager","text":"<p>Fichier: <code>src/r-type/client/include/TextureManager.hpp</code></p> <p>Responsabilit\u00e9s: - Chargement de toutes les textures au d\u00e9marrage - Gestion centralis\u00e9e des handles de texture - Fallbacks pour les textures manquantes</p> <p>Textures g\u00e9r\u00e9es: - <code>background</code> - Fond d'\u00e9cran scrollant - <code>menu_background</code> - Fond des menus - <code>player_frames[4]</code> - Frames d'animation du joueur - <code>enemy</code> - Sprite des ennemis - <code>projectile</code> - Sprite des projectiles - <code>wall</code> - Sprite des obstacles</p> <p>M\u00e9thodes principales: <pre><code>bool load_all();  // Charge toutes les textures\nengine::TextureHandle get_background() const;\nengine::TextureHandle get_player_frame(size_t index) const;\n// ... etc\n</code></pre></p>"},{"location":"CLIENT_ARCHITECTURE/#3-inputhandler","title":"3. InputHandler","text":"<p>Fichier: <code>src/r-type/client/include/InputHandler.hpp</code></p> <p>Responsabilit\u00e9s: - Lecture des inputs du joueur - Conversion en flags r\u00e9seau (protocole) - D\u00e9tection de touches sp\u00e9ciales</p> <p>Mapping des touches: <pre><code>W / Up Arrow    \u2192 INPUT_UP\nS / Down Arrow  \u2192 INPUT_DOWN\nA / Left Arrow  \u2192 INPUT_LEFT\nD / Right Arrow \u2192 INPUT_RIGHT\nSpace           \u2192 INPUT_SHOOT\nShift           \u2192 INPUT_CHARGE\nCtrl            \u2192 INPUT_SPECIAL\nE               \u2192 INPUT_SWITCH_WEAPON\nEscape          \u2192 Quitter le jeu\n</code></pre></p> <p>Utilisation: <pre><code>uint16_t flags = input_handler_-&gt;gather_input();\nnetwork_client_-&gt;send_input(flags, client_tick_);\n</code></pre></p>"},{"location":"CLIENT_ARCHITECTURE/#4-screenmanager","title":"4. ScreenManager","text":"<p>Fichier: <code>src/r-type/client/include/ScreenManager.hpp</code></p> <p>Responsabilit\u00e9s: - Gestion des \u00e9tats d'\u00e9cran (State Pattern) - Transitions entre \u00e9crans - Affichage/masquage des overlays - Gestion des \u00e9crans de r\u00e9sultat</p> <p>\u00c9tats disponibles: <pre><code>enum class GameScreen {\n    WAITING,   // En attente de joueurs\n    PLAYING,   // En jeu\n    VICTORY,   // Victoire\n    DEFEAT     // D\u00e9faite\n};\n</code></pre></p> <p>Transitions: <pre><code>WAITING (Lobby)\n    \u2193\nPLAYING (Game start)\n    \u2193\nVICTORY / DEFEAT (Game over)\n    \u2193\n(Retour possible au lobby)\n</code></pre></p> <p>\u00c9crans g\u00e9r\u00e9s: - \u00c9cran d'attente (fond + texte \"En attente de joueurs...\") - \u00c9cran de r\u00e9sultat (fond + texte \"VICTOIRE !\" ou \"DEFAITE...\") - Overlay de statut (connexion, lobby, ping)</p>"},{"location":"CLIENT_ARCHITECTURE/#5-statusoverlay","title":"5. StatusOverlay","text":"<p>Fichier: <code>src/r-type/client/include/StatusOverlay.hpp</code></p> <p>Responsabilit\u00e9s: - Affichage du statut de connexion - Affichage de l'\u00e9tat du lobby - Affichage de la session en cours - Affichage du ping</p> <p>Format d'affichage: <pre><code>Connected (Player 1234) | Lobby 1: 3/4 | In game (session 5678) | Ping: 25ms\n</code></pre></p> <p>M\u00e9thodes: <pre><code>void set_connection(const std::string&amp; status);\nvoid set_lobby(const std::string&amp; status);\nvoid set_session(const std::string&amp; status);\nvoid set_ping(int ping_ms);\nvoid refresh();  // Met \u00e0 jour l'affichage\n</code></pre></p>"},{"location":"CLIENT_ARCHITECTURE/#6-entitymanager","title":"6. EntityManager","text":"<p>Fichier: <code>src/r-type/client/include/EntityManager.hpp</code></p> <p>Responsabilit\u00e9s: - Gestion compl\u00e8te des entit\u00e9s r\u00e9seau - Synchronisation avec le serveur - Spawn/Update/Destroy d'entit\u00e9s - Pr\u00e9diction c\u00f4t\u00e9 client (projectiles) - Gestion des entit\u00e9s p\u00e9rim\u00e9es (stale entities) - Name tags des joueurs</p> <p>Tracking des entit\u00e9s: <pre><code>std::unordered_map&lt;uint32_t, Entity&gt; server_to_local_;      // server_id \u2192 entity\nstd::unordered_map&lt;uint32_t, EntityType&gt; server_types_;     // Type de l'entit\u00e9\nstd::unordered_map&lt;uint32_t, uint8_t&gt; stale_counters_;      // Compteur de vieillissement\nstd::unordered_set&lt;uint32_t&gt; locally_integrated_;           // Projectiles (pr\u00e9diction)\n</code></pre></p> <p>M\u00e9thodes principales: <pre><code>Entity spawn_or_update_entity(server_id, type, x, y, health, subtype);\nvoid remove_entity(server_id);\nvoid clear_all();  // Nettoyage complet\nvoid process_snapshot_update(updated_ids);  // D\u00e9tection des entit\u00e9s p\u00e9rim\u00e9es\nvoid update_projectiles(delta_time);  // Pr\u00e9diction locale\nvoid update_name_tags();  // Mise \u00e0 jour des positions\n</code></pre></p> <p>Construction de sprites:</p> <p>Chaque type d'entit\u00e9 a un sprite sp\u00e9cifique: <pre><code>switch (type) {\n    case PLAYER:        \u2192 Sprite anim\u00e9 cyan/blanc\n    case ENEMY_BASIC:   \u2192 Sprite ennemi standard\n    case ENEMY_FAST:    \u2192 Sprite orange\n    case ENEMY_TANK:    \u2192 Sprite rouge\n    case ENEMY_BOSS:    \u2192 Sprite violet\n    case PROJECTILE:    \u2192 Sprite cyan/rouge\n    case POWERUP:       \u2192 Sprite vert\n    // ...\n}\n</code></pre></p>"},{"location":"CLIENT_ARCHITECTURE/#7-networkclient","title":"7. NetworkClient","text":"<p>Fichier: <code>src/r-type/client/include/NetworkClient.hpp</code></p> <p>Responsabilit\u00e9s: - Gestion de la connexion TCP/UDP avec le serveur - Envoi de paquets - R\u00e9ception et d\u00e9codage de paquets - Callbacks pour les \u00e9v\u00e9nements r\u00e9seau</p> <p>M\u00e9thodes principales: <pre><code>bool connect(host, tcp_port);\nvoid disconnect();\nvoid update();  // Process packets\n\n// Envoi\nvoid send_connect(player_name);\nvoid send_join_lobby(mode, difficulty);\nvoid send_input(flags, tick);\nvoid send_ping();\n\n// Callbacks\nvoid set_on_accepted(callback);\nvoid set_on_lobby_state(callback);\nvoid set_on_game_start(callback);\nvoid set_on_entity_spawn(callback);\nvoid set_on_snapshot(callback);\n// ... etc\n</code></pre></p>"},{"location":"CLIENT_ARCHITECTURE/#architecture-ecs-entity-component-system","title":"Architecture ECS (Entity Component System)","text":""},{"location":"CLIENT_ARCHITECTURE/#registry","title":"Registry","text":"<p>Le registre ECS g\u00e8re tous les composants et entit\u00e9s du jeu.</p> <p>Composants enregistr\u00e9s: <pre><code>registry-&gt;register_component&lt;Position&gt;();\nregistry-&gt;register_component&lt;Velocity&gt;();\nregistry-&gt;register_component&lt;Sprite&gt;();\nregistry-&gt;register_component&lt;SpriteAnimation&gt;();\nregistry-&gt;register_component&lt;Collider&gt;();\nregistry-&gt;register_component&lt;Health&gt;();\nregistry-&gt;register_component&lt;Score&gt;();\nregistry-&gt;register_component&lt;Controllable&gt;();\nregistry-&gt;register_component&lt;NetworkId&gt;();\nregistry-&gt;register_component&lt;UIText&gt;();\n// ... etc\n</code></pre></p>"},{"location":"CLIENT_ARCHITECTURE/#systemes","title":"Syst\u00e8mes","text":"<p>Ordre d'ex\u00e9cution (chaque frame): 1. <code>ScrollingSystem</code> - D\u00e9filement du background 2. <code>SpriteAnimationSystem</code> - Animation des sprites 3. <code>RenderSystem</code> - Rendu graphique 4. <code>HUDSystem</code> - Affichage de l'interface</p>"},{"location":"CLIENT_ARCHITECTURE/#flux-reseau","title":"Flux r\u00e9seau","text":""},{"location":"CLIENT_ARCHITECTURE/#connexion-au-serveur","title":"Connexion au serveur","text":"<pre><code>Client                                  Server\n  \u2502                                       \u2502\n  \u251c\u2500\u2500\u25ba connect(host, tcp_port) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n  \u2502                                       \u2502\n  \u251c\u2500\u2500\u25ba CLIENT_CONNECT \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n  \u2502     (player_name)                     \u2502\n  \u2502                                       \u2502\n  \u2502\u25c4\u2500\u2500\u2500\u2500 SERVER_ACCEPT \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n  \u2502      (assigned_player_id)             \u2502\n  \u2502                                       \u2502\n  \u2502  [Callback: on_accepted()]            \u2502\n  \u2502                                       \u2502\n  \u251c\u2500\u2500\u25ba CLIENT_JOIN_LOBBY \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n  \u2502                                       \u2502\n  \u2502\u25c4\u2500\u2500\u2500\u2500 SERVER_LOBBY_STATE \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n  \u2502                                       \u2502\n</code></pre>"},{"location":"CLIENT_ARCHITECTURE/#debut-de-partie","title":"D\u00e9but de partie","text":"<pre><code>Client                                  Server\n  \u2502                                       \u2502\n  \u2502\u25c4\u2500\u2500\u2500\u2500 SERVER_GAME_START_COUNTDOWN \u2500\u2500\u2500\u2500\u2524\n  \u2502      (10, 9, 8, ...)                  \u2502\n  \u2502                                       \u2502\n  \u2502  [Callback: on_countdown()]           \u2502\n  \u2502                                       \u2502\n  \u2502\u25c4\u2500\u2500\u2500\u2500 SERVER_GAME_START \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n  \u2502      (session_id, udp_port)           \u2502\n  \u2502                                       \u2502\n  \u2502  [Callback: on_game_start()]          \u2502\n  \u2502  - Clear entities                     \u2502\n  \u2502  - Switch to PLAYING screen           \u2502\n  \u2502                                       \u2502\n  \u251c\u2550\u2550\u25ba CLIENT_UDP_HANDSHAKE \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u25ba\u2502\n  \u2502                                       \u2502\n  \u2502\u25c4\u2550\u2550\u2550 SERVER_ENTITY_SPAWN \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2524\n  \u2502     (players, enemies, walls...)      \u2502\n  \u2502                                       \u2502\n</code></pre> <p>L\u00e9gende: <code>\u2500\u2500\u2500\u25ba</code> TCP, <code>\u2550\u2550\u2550\u25ba</code> UDP</p>"},{"location":"CLIENT_ARCHITECTURE/#boucle-de-jeu","title":"Boucle de jeu","text":"<pre><code>Client                                  Server\n  \u2502                                       \u2502\n  \u2502  [Every 30ms]                         \u2502\n  \u251c\u2550\u2550\u25ba CLIENT_INPUT \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u25ba\u2502\n  \u2502     (input_flags, client_tick)        \u2502\n  \u2502                                       \u2502\n  \u2502  [Every ~16ms]                        \u2502\n  \u2502\u25c4\u2550\u2550\u2550 SERVER_DELTA_SNAPSHOT \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2524\n  \u2502     (entity states)                   \u2502\n  \u2502                                       \u2502\n  \u2502  [EntityManager processes]            \u2502\n  \u2502  - Update positions                   \u2502\n  \u2502  - Update velocities                  \u2502\n  \u2502  - Update health                      \u2502\n  \u2502  - Remove stale entities              \u2502\n  \u2502                                       \u2502\n  \u2502\u25c4\u2550\u2550\u2550 SERVER_ENTITY_SPAWN \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2524\n  \u2502\u25c4\u2550\u2550\u2550 SERVER_ENTITY_DESTROY \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2524\n  \u2502\u25c4\u2550\u2550\u2550 SERVER_PROJECTILE_SPAWN \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2524\n  \u2502                                       \u2502\n</code></pre>"},{"location":"CLIENT_ARCHITECTURE/#prediction-cote-client-projectiles","title":"Pr\u00e9diction c\u00f4t\u00e9 client (Projectiles)","text":"<p>Pour r\u00e9duire la latence per\u00e7ue, les projectiles sont mis \u00e0 jour localement:</p> <pre><code>// Marquage lors du spawn\nlocally_integrated_.insert(projectile_id);\n\n// Mise \u00e0 jour locale chaque frame\nvoid EntityManager::update_projectiles(float dt) {\n    for (auto projectile_id : locally_integrated_) {\n        if (!in_latest_snapshot) {\n            // Mise \u00e0 jour pr\u00e9dictive\n            pos.x += vel.x * dt;\n            pos.y += vel.y * dt;\n\n            // Despawn si hors \u00e9cran\n            if (out_of_bounds) {\n                remove_entity(projectile_id);\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"CLIENT_ARCHITECTURE/#fin-de-partie","title":"Fin de partie","text":"<pre><code>Client                                  Server\n  \u2502                                       \u2502\n  \u2502\u25c4\u2550\u2550\u2550 SERVER_GAME_OVER \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2524\n  \u2502     (result: VICTORY/DEFEAT)          \u2502\n  \u2502                                       \u2502\n  \u2502  [Callback: on_game_over()]           \u2502\n  \u2502  - Show result screen                 \u2502\n  \u2502  - Update status overlay              \u2502\n  \u2502                                       \u2502\n</code></pre>"},{"location":"CLIENT_ARCHITECTURE/#gestion-des-entites-perimees-stale-entities","title":"Gestion des entit\u00e9s p\u00e9rim\u00e9es (Stale Entities)","text":"<p>Pour d\u00e9tecter les entit\u00e9s qui n'existent plus c\u00f4t\u00e9 serveur mais n'ont pas re\u00e7u de paquet DESTROY:</p> <pre><code>void EntityManager::process_snapshot_update(updated_ids) {\n    for (auto&amp; [server_id, entity] : server_to_local_) {\n        if (!updated_ids.contains(server_id)) {\n            // Entit\u00e9 non mise \u00e0 jour dans ce snapshot\n            stale_counters_[server_id]++;\n\n            if (stale_counters_[server_id] &gt; THRESHOLD) {\n                // Suppression apr\u00e8s ~6 frames sans update\n                remove_entity(server_id);\n            }\n        } else {\n            // Reset du compteur\n            stale_counters_[server_id] = 0;\n        }\n    }\n}\n</code></pre>"},{"location":"CLIENT_ARCHITECTURE/#synchronisation-audio-visuelle","title":"Synchronisation Audio-Visuelle","text":""},{"location":"CLIENT_ARCHITECTURE/#callbacks-reseau-effets-visuelssonores","title":"Callbacks r\u00e9seau \u2192 Effets visuels/sonores","text":"<pre><code>network_client_-&gt;set_on_projectile_spawn([this](...) {\n    // Spawn visuel\n    entity_manager_-&gt;spawn_or_update_entity(...);\n\n    // Son de tir (si audio_plugin disponible)\n    if (audio_plugin_) {\n        audio_plugin_-&gt;play_sound(\"laser.wav\");\n    }\n});\n\nnetwork_client_-&gt;set_on_entity_destroy([this](...) {\n    // Effet d'explosion\n    create_particle_effect(...);\n\n    // Son d'explosion\n    if (audio_plugin_) {\n        audio_plugin_-&gt;play_sound(\"explosion.wav\");\n    }\n});\n</code></pre>"},{"location":"CLIENT_ARCHITECTURE/#resolution-decran-et-mise-a-lechelle","title":"R\u00e9solution d'\u00e9cran et mise \u00e0 l'\u00e9chelle","text":"<p>R\u00e9solution par d\u00e9faut: 1920x1080</p> <p>Le jeu utilise des dimensions relatives pour s'adapter: <pre><code>constexpr int SCREEN_WIDTH = 1920;\nconstexpr int SCREEN_HEIGHT = 1080;\n\n// Positions centr\u00e9es\nfloat center_x = SCREEN_WIDTH / 2.0f;\nfloat center_y = SCREEN_HEIGHT / 2.0f;\n</code></pre></p>"},{"location":"CLIENT_ARCHITECTURE/#performance-et-optimisation","title":"Performance et optimisation","text":""},{"location":"CLIENT_ARCHITECTURE/#frequences-dupdate","title":"Fr\u00e9quences d'update","text":"<ul> <li>R\u00e9seau (envoi inputs): 30 Hz (~33ms)</li> <li>R\u00e9seau (r\u00e9ception snapshots): 60 Hz (~16ms)</li> <li>Rendu: VSync (60 FPS g\u00e9n\u00e9ralement)</li> <li>Mise \u00e0 jour overlay: 2 Hz (500ms)</li> <li>Ping: Toutes les 5 secondes</li> </ul>"},{"location":"CLIENT_ARCHITECTURE/#optimisations","title":"Optimisations","text":"<ol> <li>Pr\u00e9diction locale: Projectiles mis \u00e0 jour c\u00f4t\u00e9 client</li> <li>Delta snapshots: Seules les entit\u00e9s qui changent</li> <li>Stale entity removal: Nettoyage automatique</li> <li>Sprite batching: Par le RenderSystem</li> <li>Dirty flags: Mise \u00e0 jour conditionnelle des name tags</li> </ol>"},{"location":"CLIENT_ARCHITECTURE/#configuration","title":"Configuration","text":"<p>Ligne de commande: <pre><code>./r-type_client [host] [tcp_port] [player_name]\n\n# Exemples:\n./r-type_client                           # Defaults: 127.0.0.1:4242, \"Pilot\"\n./r-type_client 192.168.1.100             # Custom host\n./r-type_client 192.168.1.100 5000        # Custom host + port\n./r-type_client 192.168.1.100 5000 \"Bob\"  # + custom name\n</code></pre></p>"},{"location":"CLIENT_ARCHITECTURE/#gestion-derreurs","title":"Gestion d'erreurs","text":""},{"location":"CLIENT_ARCHITECTURE/#echec-de-connexion","title":"\u00c9chec de connexion","text":"<pre><code>if (!network_client_-&gt;connect(host, tcp_port)) {\n    std::cerr &lt;&lt; \"Failed to connect to server\\n\";\n    return 1;\n}\n</code></pre>"},{"location":"CLIENT_ARCHITECTURE/#deconnexion-inattendue","title":"D\u00e9connexion inattendue","text":"<pre><code>network_client_-&gt;set_on_disconnected([this]() {\n    status_overlay_-&gt;set_connection(\"Disconnected\");\n    status_overlay_-&gt;refresh();\n    running_ = false;  // Arr\u00eat de la boucle de jeu\n});\n</code></pre>"},{"location":"CLIENT_ARCHITECTURE/#rejet-par-le-serveur","title":"Rejet par le serveur","text":"<pre><code>network_client_-&gt;set_on_rejected([this](reason, message) {\n    status_overlay_-&gt;set_connection(\"Rejected: \" + message);\n    status_overlay_-&gt;refresh();\n});\n</code></pre>"},{"location":"CLIENT_ARCHITECTURE/#diagramme-de-flux-complet","title":"Diagramme de flux complet","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  main() \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\n     \u2502\n     \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  ClientGame::initialize()               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  1. Load plugins                        \u2502\n\u2502  2. Create window                       \u2502\n\u2502  3. Setup Registry + Systems            \u2502\n\u2502  4. Load textures (TextureManager)      \u2502\n\u2502  5. Create managers                     \u2502\n\u2502  6. Setup network callbacks             \u2502\n\u2502  7. Connect to server                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2502\n     \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  ClientGame::run()                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  GAME LOOP (60 FPS)             \u2502   \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524   \u2502\n\u2502  \u2502  1. Network update              \u2502   \u2502\n\u2502  \u2502  2. Process packets             \u2502   \u2502\n\u2502  \u2502  3. Handle input                \u2502   \u2502\n\u2502  \u2502  4. Update projectiles          \u2502   \u2502\n\u2502  \u2502  5. Update name tags            \u2502   \u2502\n\u2502  \u2502  6. Run ECS systems             \u2502   \u2502\n\u2502  \u2502  7. Render                      \u2502   \u2502\n\u2502  \u2502  8. Check exit condition        \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2502\n     \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  ClientGame::shutdown()                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  1. Disconnect from server              \u2502\n\u2502  2. Clear entities                      \u2502\n\u2502  3. Shutdown plugins                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"CLIENT_ARCHITECTURE/#deploiement","title":"D\u00e9ploiement","text":""},{"location":"CLIENT_ARCHITECTURE/#compilation","title":"Compilation","text":"<pre><code>cmake -B build\ncmake --build build --target r-type_client\n</code></pre>"},{"location":"CLIENT_ARCHITECTURE/#ressources-requises","title":"Ressources requises","text":"<p>Le client n\u00e9cessite le dossier <code>assets/</code> avec: - <code>sprite/symmetry.png</code> - Background - <code>sprite/background_rtype_menu.png</code> - Menu background - <code>sprite/ship1.png</code>, <code>ship2.png</code>, <code>ship3.png</code>, <code>ship4.png</code> - Player frames - <code>sprite/enemy.png</code> - Enemy sprite - <code>sprite/bullet.png</code> - Projectile sprite - <code>sprite/lock.png</code> - Wall sprite</p>"},{"location":"CLIENT_ARCHITECTURE/#dependances","title":"D\u00e9pendances","text":"<ul> <li>game_engine: ECS, plugins, syst\u00e8mes</li> <li>rtype_logic: Logique partag\u00e9e (dimensions, etc.)</li> <li>Raylib: Graphisme et input via plugins</li> <li>Miniaudio: Audio via plugin</li> <li>Boost.Asio: R\u00e9seau via plugin</li> </ul>"},{"location":"CLIENT_ARCHITECTURE/#conclusion","title":"Conclusion","text":"<p>L'architecture modulaire du client offre: - S\u00e9paration des responsabilit\u00e9s: Chaque composant a un r\u00f4le clair - Maintenabilit\u00e9: Code organis\u00e9 et facile \u00e0 modifier - Extensibilit\u00e9: Ajout de features simplifi\u00e9 - Performance: Optimisations r\u00e9seau et rendu - UX: Feedback visuel clair et r\u00e9activit\u00e9</p>"},{"location":"DEVELOPER/","title":"Developer Guide","text":"<p>Welcome to the Mirror R-Type development team! This guide will help you set up your development environment and understand our workflow.</p>"},{"location":"DEVELOPER/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Development Environment</li> <li>Code Style</li> <li>Development Workflow</li> <li>Testing</li> <li>Documentation</li> <li>Common Tasks</li> </ul>"},{"location":"DEVELOPER/#development-environment","title":"Development Environment","text":""},{"location":"DEVELOPER/#required-tools","title":"Required Tools","text":"<p>In addition to the Setup Guide requirements, developers should install:</p>"},{"location":"DEVELOPER/#linuxmacos","title":"Linux/macOS","text":"<pre><code># clang-tidy (C++ linter)\nsudo apt-get install clang-tidy  # Debian/Ubuntu\nbrew install llvm                 # macOS\n\n# clang-format (C++ formatter)\nsudo apt-get install clang-format # Debian/Ubuntu\nbrew install clang-format         # macOS\n\n# Optional: gdb or lldb for debugging\nsudo apt-get install gdb          # Linux\nbrew install lldb                 # macOS\n</code></pre>"},{"location":"DEVELOPER/#windows","title":"Windows","text":"<p>Install via Visual Studio Installer: - Clang tools - C++ AddressSanitizer - C++ profiling tools</p>"},{"location":"DEVELOPER/#ide-setup","title":"IDE Setup","text":""},{"location":"DEVELOPER/#visual-studio-code","title":"Visual Studio Code","text":"<p>Recommended extensions:</p> <pre><code>{\n  \"recommendations\": [\n    \"ms-vscode.cpptools\",\n    \"ms-vscode.cmake-tools\",\n    \"llvm-vs-code-extensions.vscode-clangd\",\n    \"xaver.clang-format\",\n    \"notskm.clang-tidy\"\n  ]\n}\n</code></pre>"},{"location":"DEVELOPER/#clion","title":"CLion","text":"<p>CLion has native CMake support. Simply open the project directory.</p>"},{"location":"DEVELOPER/#code-style","title":"Code Style","text":""},{"location":"DEVELOPER/#c-standards","title":"C++ Standards","text":"<ul> <li>C++20 features encouraged</li> <li>Use modern C++ idioms (RAII, smart pointers, STL containers)</li> <li>Avoid raw pointers and manual memory management</li> <li>Prefer <code>constexpr</code> and <code>const</code> where possible</li> </ul>"},{"location":"DEVELOPER/#naming-conventions","title":"Naming Conventions","text":"<pre><code>// Classes: PascalCase\nclass NetworkPlugin {};\n\n// Functions/Methods: snake_case\nvoid send_packet();\n\n// Variables: snake_case\nint player_count = 0;\n\n// Constants: UPPER_SNAKE_CASE\nconstexpr int MAX_PLAYERS = 4;\n\n// Private members: trailing underscore\nclass Player {\nprivate:\n    int health_;\n    Vector2f position_;\n};\n</code></pre>"},{"location":"DEVELOPER/#file-structure","title":"File Structure","text":"<pre><code>// Header file (.hpp)\n#pragma once\n\nnamespace engine {\n\nclass ClassName {\npublic:\n    // Public interface\n\nprivate:\n    // Private implementation\n};\n\n} // namespace engine\n</code></pre> <pre><code>// Implementation file (.cpp)\n#include \"ClassName.hpp\"\n\nnamespace engine {\n\n// Implementation\n\n} // namespace engine\n</code></pre>"},{"location":"DEVELOPER/#code-formatting","title":"Code Formatting","text":"<p>We use clang-format with the project's <code>.clang-format</code> configuration.</p>"},{"location":"DEVELOPER/#format-your-code","title":"Format your code:","text":"<pre><code># Format a single file\nclang-format -i src/MyFile.cpp\n\n# Format all files\nfind engine client server -name \"*.cpp\" -o -name \"*.hpp\" | xargs clang-format -i\n</code></pre>"},{"location":"DEVELOPER/#auto-format-in-vs-code","title":"Auto-format in VS Code:","text":"<p>Set in <code>.vscode/settings.json</code>:</p> <pre><code>{\n  \"editor.formatOnSave\": true,\n  \"C_Cpp.clang_format_style\": \"file\"\n}\n</code></pre>"},{"location":"DEVELOPER/#linting-with-clang-tidy","title":"Linting with clang-tidy","text":""},{"location":"DEVELOPER/#enable-during-build","title":"Enable during build:","text":"<pre><code>cmake -B build -DENABLE_CLANG_TIDY=ON\ncmake --build build\n</code></pre>"},{"location":"DEVELOPER/#run-manually","title":"Run manually:","text":"<pre><code>clang-tidy engine/src/*.cpp -- -I engine/include\n</code></pre>"},{"location":"DEVELOPER/#configuration","title":"Configuration","text":"<p>See <code>.clang-tidy</code> in the project root for our ruleset.</p>"},{"location":"DEVELOPER/#development-workflow","title":"Development Workflow","text":""},{"location":"DEVELOPER/#branching-strategy","title":"Branching Strategy","text":"<p>We follow Git Flow:</p> <ul> <li><code>main</code> - Production-ready code</li> <li><code>develop</code> - Integration branch for features</li> <li><code>feature/*</code> - New features</li> <li><code>bugfix/*</code> - Bug fixes</li> <li><code>hotfix/*</code> - Urgent production fixes</li> </ul>"},{"location":"DEVELOPER/#creating-a-feature","title":"Creating a Feature","text":"<pre><code># Create feature branch\ngit checkout develop\ngit pull origin develop\ngit checkout -b feature/my-awesome-feature\n\n# Make changes and commit\ngit add .\ngit commit -m \"feat: add awesome feature\"\n\n# Push and create PR\ngit push origin feature/my-awesome-feature\n</code></pre>"},{"location":"DEVELOPER/#commit-message-format","title":"Commit Message Format","text":"<p>We follow Conventional Commits:</p> <pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;description&gt;\n\n[optional body]\n\n[optional footer]\n</code></pre> <p>Types: - <code>feat</code>: New feature - <code>fix</code>: Bug fix - <code>docs</code>: Documentation changes - <code>style</code>: Code style changes (formatting) - <code>refactor</code>: Code refactoring - <code>test</code>: Adding or updating tests - <code>chore</code>: Build process or auxiliary tool changes</p> <p>Examples:</p> <pre><code>git commit -m \"feat(network): implement UDP packet fragmentation\"\ngit commit -m \"fix(graphics): resolve memory leak in texture loading\"\ngit commit -m \"docs: update plugin creation guide\"\ngit commit -m \"refactor(ecs): simplify entity component lookup\"\n</code></pre>"},{"location":"DEVELOPER/#pull-request-process","title":"Pull Request Process","text":"<ol> <li>Create PR from your feature branch to <code>develop</code></li> <li>Fill out PR template with:</li> <li>Description of changes</li> <li>Related issue numbers</li> <li>Testing performed</li> <li>Request review from at least one team member</li> <li>Address feedback and update PR</li> <li>Squash and merge once approved</li> </ol>"},{"location":"DEVELOPER/#testing","title":"Testing","text":""},{"location":"DEVELOPER/#running-tests","title":"Running Tests","text":"<pre><code># Build tests\ncmake -B build -DBUILD_TESTS=ON\ncmake --build build\n\n# Run all tests\nctest --test-dir build --output-on-failure\n\n# Run specific test\n./build/tests/plugin_manager_test\n./build/tests/network_test\n</code></pre>"},{"location":"DEVELOPER/#writing-tests","title":"Writing Tests","text":"<p>We use Google Test:</p> <pre><code>#include &lt;gtest/gtest.h&gt;\n#include \"MyClass.hpp\"\n\nTEST(MyClassTest, DoSomething) {\n    MyClass obj;\n    EXPECT_EQ(obj.getValue(), 42);\n    ASSERT_TRUE(obj.isValid());\n}\n</code></pre> <p>Place tests in <code>tests/</code> directory with <code>_test.cpp</code> suffix.</p>"},{"location":"DEVELOPER/#code-coverage","title":"Code Coverage","text":"<pre><code># Build with coverage flags\ncmake -B build -DCMAKE_BUILD_TYPE=Debug -DENABLE_COVERAGE=ON\ncmake --build build\n\n# Run tests\nctest --test-dir build\n\n# Generate coverage report\nlcov --capture --directory build --output-file coverage.info\ngenhtml coverage.info --output-directory coverage_report\n</code></pre> <p>Open <code>coverage_report/index.html</code> in a browser.</p>"},{"location":"DEVELOPER/#documentation","title":"Documentation","text":""},{"location":"DEVELOPER/#inline-documentation","title":"Inline Documentation","text":"<p>Use Doxygen-style comments:</p> <pre><code>/**\n * @brief Sends a network packet to the specified client\n *\n * @param packet The packet to send\n * @param client_id Target client identifier\n * @return true if packet was sent successfully, false otherwise\n *\n * @throws NetworkException if connection is lost\n */\nbool send_to(const NetworkPacket&amp; packet, ClientId client_id);\n</code></pre>"},{"location":"DEVELOPER/#documentation-files","title":"Documentation Files","text":"<ul> <li>Architecture docs in <code>docs/</code></li> <li>API docs inline in headers</li> <li>README files in relevant directories</li> </ul>"},{"location":"DEVELOPER/#generating-api-docs","title":"Generating API Docs","text":"<pre><code>doxygen Doxyfile\n# Output in docs/api/html/\n</code></pre>"},{"location":"DEVELOPER/#common-tasks","title":"Common Tasks","text":""},{"location":"DEVELOPER/#adding-a-new-plugin","title":"Adding a New Plugin","text":"<p>See Plugin Creation Guide</p>"},{"location":"DEVELOPER/#adding-a-new-system","title":"Adding a New System","text":"<ol> <li>Create header in <code>engine/include/systems/</code></li> <li>Implement in <code>engine/src/systems/</code></li> <li>Register in engine initialization</li> <li>Add tests in <code>tests/systems/</code></li> </ol>"},{"location":"DEVELOPER/#adding-a-new-component","title":"Adding a New Component","text":"<pre><code>// engine/include/components/MyComponent.hpp\n#pragma once\n\nnamespace engine {\n\nstruct MyComponent {\n    int value;\n    float multiplier;\n};\n\n} // namespace engine\n</code></pre> <p>Register with ECS:</p> <pre><code>registry.register_component&lt;MyComponent&gt;();\n</code></pre>"},{"location":"DEVELOPER/#debugging","title":"Debugging","text":""},{"location":"DEVELOPER/#gdb-linux","title":"GDB (Linux)","text":"<pre><code>gdb ./build/r_type_client\n(gdb) run\n(gdb) backtrace  # On crash\n</code></pre>"},{"location":"DEVELOPER/#lldb-macos","title":"LLDB (macOS)","text":"<pre><code>lldb ./build/r_type_client\n(lldb) run\n(lldb) bt  # On crash\n</code></pre>"},{"location":"DEVELOPER/#visual-studio-windows","title":"Visual Studio (Windows)","text":"<p>Press F5 to debug with breakpoints.</p>"},{"location":"DEVELOPER/#performance-profiling","title":"Performance Profiling","text":""},{"location":"DEVELOPER/#linux-perf","title":"Linux (perf)","text":"<pre><code>perf record ./build/r_type_server\nperf report\n</code></pre>"},{"location":"DEVELOPER/#macos-instruments","title":"macOS (Instruments)","text":"<pre><code>instruments -t \"Time Profiler\" ./build/r_type_server\n</code></pre>"},{"location":"DEVELOPER/#windows-visual-studio-profiler","title":"Windows (Visual Studio Profiler)","text":"<p>Debug \u2192 Performance Profiler \u2192 CPU Usage</p>"},{"location":"DEVELOPER/#best-practices","title":"Best Practices","text":""},{"location":"DEVELOPER/#dos","title":"Do's \u2705","text":"<ul> <li>Write unit tests for new features</li> <li>Document public APIs</li> <li>Use const-correctness</li> <li>Handle errors gracefully</li> <li>Keep functions small and focused</li> <li>Use meaningful variable names</li> <li>Follow the existing code style</li> </ul>"},{"location":"DEVELOPER/#donts","title":"Don'ts \u274c","text":"<ul> <li>Don't commit commented-out code</li> <li>Don't hardcode magic numbers</li> <li>Don't use <code>goto</code></li> <li>Don't ignore compiler warnings</li> <li>Don't leak memory</li> <li>Don't expose implementation details in headers</li> <li>Don't commit directly to <code>main</code> or <code>develop</code></li> </ul>"},{"location":"DEVELOPER/#code-review-checklist","title":"Code Review Checklist","text":"<ul> <li>[ ] Code follows style guide</li> <li>[ ] Tests pass locally</li> <li>[ ] New tests added for new features</li> <li>[ ] Documentation updated</li> <li>[ ] No compiler warnings</li> <li>[ ] clang-tidy passes</li> <li>[ ] Commit messages follow convention</li> <li>[ ] PR description is clear</li> </ul>"},{"location":"DEVELOPER/#resources","title":"Resources","text":"<ul> <li>C++ Core Guidelines</li> <li>Modern CMake</li> <li>Google Test Documentation</li> <li>Boost.Asio Documentation</li> </ul>"},{"location":"DEVELOPER/#getting-help","title":"Getting Help","text":"<ul> <li>Ask in team chat</li> <li>Check GitHub Issues</li> <li>Read existing documentation</li> <li>Pair program with a team member</li> </ul> <p>Happy Coding! \ud83d\ude80</p>"},{"location":"LEVEL_SYSTEM/","title":"Level System","text":"<p>This document explains how the level system works in Mirror R-Type, including level progression, boss spawning, and level transitions.</p>"},{"location":"LEVEL_SYSTEM/#overview","title":"Overview","text":"<p>The level system manages: - Level state machine (start, waves, boss, complete) - Wave spawning based on scroll distance - Boss spawning and defeat detection - Level transitions and victory conditions</p>"},{"location":"LEVEL_SYSTEM/#level-state-machine","title":"Level State Machine","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  LEVEL_START    \u2502  (0.5s intro)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     WAVES       \u2502  (enemy waves based on scroll)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502 all waves complete + no enemies\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 BOSS_TRANSITION \u2502  (3s warning)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   BOSS_FIGHT    \u2502  (scroll stops, boss spawns)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502 boss defeated\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 LEVEL_COMPLETE  \u2502  (5s victory)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Next Level or   \u2502\n\u2502 FINAL VICTORY   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"LEVEL_SYSTEM/#state-descriptions","title":"State Descriptions","text":"State Duration Description <code>LEVEL_START</code> 0.5s Brief intro, scroll begins <code>WAVES</code> Variable Enemy waves spawn based on scroll distance <code>BOSS_TRANSITION</code> 3s \"WARNING: BOSS APPROACHING!\" message <code>BOSS_FIGHT</code> Variable Scroll stops, boss spawns and fights <code>LEVEL_COMPLETE</code> 5s Victory animation, score display <code>GAME_OVER</code> - All players dead or final victory"},{"location":"LEVEL_SYSTEM/#scroll-system","title":"Scroll System","text":"<p>The game scrolls automatically at a constant speed defined per level.</p>"},{"location":"LEVEL_SYSTEM/#scroll-configuration","title":"Scroll Configuration","text":"<pre><code>{\n    \"level_id\": 1,\n    \"base_scroll_speed\": 60.0,\n    \"total_scroll_distance\": 7000.0\n}\n</code></pre> Parameter Description Example <code>base_scroll_speed</code> Pixels per second 60.0 <code>base_scroll_speed</code> Pixels per second 60.0 <code>total_chunks</code> Total level length in chunks (1 chunk = 480px = 30 tiles) 20"},{"location":"LEVEL_SYSTEM/#chunk-coordinate-system","title":"Chunk Coordinate System","text":"<p>Calculations are now based on Chunk Segments rather than absolute pixels to ensure map sync. - 1 Chunk = 30 Tiles width = 480 Pixels - Total Scroll Distance = <code>total_chunks</code> * 480.0</p>"},{"location":"LEVEL_SYSTEM/#when-does-scroll-stop","title":"When Does Scroll Stop?","text":"<p>Scroll stops when the boss spawns (state = <code>BOSS_FIGHT</code>): - Camera velocity is set to 0 - Boss appears at configured spawn position - Players fight boss in fixed arena</p>"},{"location":"LEVEL_SYSTEM/#wave-spawning","title":"Wave Spawning","text":"<p>Waves spawn based on scroll distance, not time.</p>"},{"location":"LEVEL_SYSTEM/#wave-configuration","title":"Wave Configuration","text":"<pre><code>{\n    \"wave_number\": 1,\n    \"trigger\": {\n    \"trigger\": {\n        \"chunkId\": 1,\n        \"offset\": 0.5,\n        \"timeDelay\": 0\n    },\n    },\n    \"spawns\": [\n        {\n            \"type\": \"enemy\",\n            \"enemyType\": \"basic\",\n            \"positionX\": 2100,\n            \"positionY\": 300,\n            \"count\": 3,\n            \"pattern\": \"line\",\n            \"spacing\": 100\n        }\n    ]\n}\n</code></pre>"},{"location":"LEVEL_SYSTEM/#trigger-conditions","title":"Trigger Conditions","text":"Field Description <code>chunkId</code> Index of the map chunk to trigger (0-based) <code>offset</code> Percentage progression within chunk (0.0 to 1.0) <code>scrollDistance</code> (Legacy/Backup) Absolute pixel distance <code>timeDelay</code> Additional delay after scroll trigger (seconds)"},{"location":"LEVEL_SYSTEM/#spawn-patterns","title":"Spawn Patterns","text":"Pattern Description <code>single</code> Single entity <code>line</code> Horizontal line with spacing <code>formation</code> Custom formation"},{"location":"LEVEL_SYSTEM/#boss-spawning","title":"Boss Spawning","text":""},{"location":"LEVEL_SYSTEM/#when-does-the-boss-spawn","title":"When Does the Boss Spawn?","text":"<ol> <li>All waves triggered (<code>all_waves_triggered = true</code>)</li> <li>No enemies remaining (all wave enemies defeated)</li> <li>State transitions to <code>BOSS_TRANSITION</code> (3s warning)</li> <li>State transitions to <code>BOSS_FIGHT</code></li> <li>Boss spawns at configured position</li> <li>Scroll stops</li> </ol>"},{"location":"LEVEL_SYSTEM/#boss-configuration","title":"Boss Configuration","text":"<pre><code>\"boss\": {\n    \"boss_name\": \"Mars Guardian\",\n    \"spawn_scroll_distance\": 6500.0,\n    \"spawn_position_x\": 1600.0,\n    \"spawn_position_y\": 540.0,\n    \"script_path\": \"boss/boss1_mars_guardian.lua\",\n    \"total_phases\": 3\n}\n</code></pre> Field Description <code>boss_name</code> Display name <code>spawn_scroll_distance</code> Minimum scroll before boss can spawn <code>spawn_position_x</code> X position where boss appears <code>spawn_position_y</code> Y position where boss appears <code>script_path</code> Lua script for boss behavior <code>total_phases</code> Number of boss phases (usually 3)"},{"location":"LEVEL_SYSTEM/#boss-defeat-detection","title":"Boss Defeat Detection","text":"<p>Boss is considered defeated when: - Boss entity no longer exists in registry, OR - Boss health reaches 0</p>"},{"location":"LEVEL_SYSTEM/#level-transitions","title":"Level Transitions","text":""},{"location":"LEVEL_SYSTEM/#next-level-loading","title":"Next Level Loading","text":"<p>When a level is completed:</p> <ol> <li>Wait 5 seconds (victory animation)</li> <li>Check level number:</li> <li>Level &lt; 3: Load next level</li> <li>Level &gt;= 3: Final victory</li> <li>Clear all enemies and projectiles</li> <li>Reset level controller</li> <li>Transition to <code>LEVEL_START</code></li> </ol>"},{"location":"LEVEL_SYSTEM/#victory-conditions","title":"Victory Conditions","text":"Condition Result Level 1 complete Load Level 2 Level 2 complete Load Level 3 Level 3 complete FINAL VICTORY"},{"location":"LEVEL_SYSTEM/#level-configuration-files","title":"Level Configuration Files","text":""},{"location":"LEVEL_SYSTEM/#file-location","title":"File Location","text":"<pre><code>assets/levels/\n\u251c\u2500\u2500 level_1_mars_assault.json\n\u251c\u2500\u2500 level_2_nebula_station.json\n\u251c\u2500\u2500 level_3_uranus_station.json\n\u2514\u2500\u2500 level_4_jupiter_orbit.json\n</code></pre>"},{"location":"LEVEL_SYSTEM/#full-level-structure","title":"Full Level Structure","text":"<pre><code>{\n    \"level_id\": 1,\n    \"level_name\": \"Mars Assault\",\n    \"level_description\": \"Storm the Martian defense installations\",\n    \"map_id\": 1,\n    \"map_id\": 1,\n    \"base_scroll_speed\": 60.0,\n    \"total_chunks\": 20,\n\n    \"phases\": [\n        {\n            \"phase_number\": 1,\n            \"phase_name\": \"Red Planet Entry\",\n            \"scroll_start\": 0.0,\n            \"scroll_end\": 2000.0,\n            \"difficulty\": \"easy\",\n            \"waves\": [...]\n        },\n        {\n            \"phase_number\": 2,\n            \"phase_name\": \"Industrial Zone\",\n            \"scroll_start\": 2000.0,\n            \"scroll_end\": 4500.0,\n            \"difficulty\": \"medium\",\n            \"waves\": [...]\n        },\n        {\n            \"phase_number\": 3,\n            \"phase_name\": \"Final Approach\",\n            \"scroll_start\": 4500.0,\n            \"scroll_end\": 6500.0,\n            \"difficulty\": \"hard\",\n            \"waves\": [...]\n        }\n    ],\n\n    \"boss\": {\n        \"boss_name\": \"Mars Guardian\",\n        \"spawn_scroll_distance\": 6500.0,\n        \"spawn_position_x\": 1600.0,\n        \"spawn_position_y\": 540.0,\n        \"script_path\": \"boss/boss1_mars_guardian.lua\",\n        \"total_phases\": 3\n    }\n}\n</code></pre>"},{"location":"LEVEL_SYSTEM/#level-summary","title":"Level Summary","text":""},{"location":"LEVEL_SYSTEM/#level-1-mars-assault","title":"Level 1: Mars Assault","text":"Property Value Scroll Speed 60 px/s Total Distance 7000 px Boss Spawn 6500 px Boss Mars Guardian Difficulty Easy \u2192 Medium \u2192 Hard"},{"location":"LEVEL_SYSTEM/#level-2-nebula-station","title":"Level 2: Nebula Station","text":"Property Value Scroll Speed 65 px/s Total Distance 9000 px Boss Spawn 8500 px Boss Nebula Core Difficulty Easy \u2192 Medium \u2192 Hard"},{"location":"LEVEL_SYSTEM/#level-3-uranus-station","title":"Level 3: Uranus Station","text":"Property Value Scroll Speed 60 px/s Total Distance 8000 px Boss Spawn 7500 px Boss Uranus Sentinel Difficulty Medium \u2192 Hard \u2192 Very Hard"},{"location":"LEVEL_SYSTEM/#level-4-jupiter-orbit","title":"Level 4: Jupiter Orbit","text":"Property Value Scroll Speed 60 px/s Total Distance 9000 px Boss Spawn 8500 px Boss Jupiter Titan Difficulty Medium \u2192 Hard \u2192 Extreme"},{"location":"LEVEL_SYSTEM/#timing-calculations","title":"Timing Calculations","text":""},{"location":"LEVEL_SYSTEM/#example-level-1","title":"Example: Level 1","text":"<pre><code>Scroll speed: 60 px/s\nBoss spawn distance: 6500 px\n\nTime to boss: 6500 / 60 = ~108 seconds (~1m 48s)\n+ Boss transition: 3s\n+ Boss fight: Variable (depends on player skill)\n+ Victory: 5s\n</code></pre>"},{"location":"LEVEL_SYSTEM/#estimated-level-durations","title":"Estimated Level Durations","text":"Level To Boss Boss Fight Total (approx) 1 ~1m 48s ~1-2 min ~3-4 min 2 ~2m 10s ~1-2 min ~3-5 min 3 ~2m 5s ~1-2 min ~3-5 min 4 ~2m 22s ~2-3 min ~4-6 min"},{"location":"LEVEL_SYSTEM/#technical-implementation","title":"Technical Implementation","text":""},{"location":"LEVEL_SYSTEM/#key-components","title":"Key Components","text":"Component Description <code>LevelController</code> Stores current level state, boss entity, etc. <code>ScrollState</code> Current scroll position <code>BossScript</code> Lua script path for boss behavior"},{"location":"LEVEL_SYSTEM/#key-systems","title":"Key Systems","text":"System Responsibility <code>LevelSystem</code> State machine, transitions <code>LuaSystem</code> Enemy and boss AI scripts <code>WaveManager</code> Wave spawning based on scroll"},{"location":"LEVEL_SYSTEM/#gamesession-integration","title":"GameSession Integration","text":"<p>The <code>GameSession</code> class coordinates: - Scroll updates (<code>current_scroll_</code>) - Wave manager updates - Boss spawning when <code>BOSS_FIGHT</code> state begins - Level loading when <code>LEVEL_COMPLETE</code> ends</p>"},{"location":"LEVEL_SYSTEM/#debug-information","title":"Debug Information","text":"<p>Console logs show level progression:</p> <pre><code>[LevelSystem] Transition: LEVEL_START\n[LevelSystem] Transition: WAVES\n[LevelSystem] Waves started for level 1\n[LevelSystem] All waves complete and no enemies remaining - starting boss transition\n[LevelSystem] Transition: BOSS_TRANSITION\n[LevelSystem] Boss transition - WARNING: BOSS APPROACHING!\n[LevelSystem] Transition: BOSS_FIGHT\n[LevelSystem] Boss fight started!\n[GameSession] Scroll stopped for boss fight\n[GameSession] Boss spawned: Mars Guardian (script: boss/boss1_mars_guardian.lua)\n[LuaSystem] Loaded boss script: boss/boss1_mars_guardian.lua\n[LuaSystem] Boss phase transition: 0 -&gt; 1\n[LuaSystem] Boss phase transition: 1 -&gt; 2\n[LevelSystem] Transition: LEVEL_COMPLETE\n[LevelSystem] Level 1 completed!\n[LevelSystem] Loading level 2...\n</code></pre>"},{"location":"LUA_SCRIPTING/","title":"Lua Scripting System","text":"<p>This document explains how to create and configure Lua scripts for enemies and bosses in Mirror R-Type.</p>"},{"location":"LUA_SCRIPTING/#overview","title":"Overview","text":"<p>The game uses Lua scripts to define AI behavior for enemies and bosses. Scripts are located in <code>assets/scripts/ai/</code> and are loaded dynamically at runtime by the <code>LuaSystem</code>.</p>"},{"location":"LUA_SCRIPTING/#directory-structure","title":"Directory Structure","text":"<pre><code>assets/scripts/ai/\n\u251c\u2500\u2500 basic.lua           # Basic enemy: simple leftward movement\n\u251c\u2500\u2500 zigzag.lua          # Zigzag pattern movement\n\u251c\u2500\u2500 bouncer.lua         # Bounces off screen edges\n\u251c\u2500\u2500 kamikaze.lua        # Charges toward player\n\u2514\u2500\u2500 boss/\n    \u251c\u2500\u2500 boss1_mars_guardian.lua\n    \u251c\u2500\u2500 boss2_nebula_core.lua\n    \u251c\u2500\u2500 boss3_uranus_sentinel.lua\n    \u2514\u2500\u2500 boss4_jupiter_titan.lua\n</code></pre>"},{"location":"LUA_SCRIPTING/#enemy-scripts","title":"Enemy Scripts","text":""},{"location":"LUA_SCRIPTING/#script-signature","title":"Script Signature","text":"<p>Enemy scripts must return a function with this signature:</p> <pre><code>return function(dt, pos, vel)\n    -- dt: delta time (seconds)\n    -- pos: position table {x, y}\n    -- vel: velocity table {x, y}\nend\n</code></pre>"},{"location":"LUA_SCRIPTING/#available-global-functions","title":"Available Global Functions","text":"Function Description Returns <code>find_nearest_player(x, y)</code> Find the closest player to position (x, y) <code>targetX, targetY, found</code>"},{"location":"LUA_SCRIPTING/#example-basic-enemy","title":"Example: Basic Enemy","text":"<pre><code>-- Simple leftward movement\nreturn function(dt, pos, vel)\n    local speed = 100\n\n    vel.x = -speed\n    vel.y = 0\n\n    pos.x = pos.x + vel.x * dt\n    pos.y = pos.y + vel.y * dt\nend\n</code></pre>"},{"location":"LUA_SCRIPTING/#example-kamikaze-enemy","title":"Example: Kamikaze Enemy","text":"<pre><code>-- Charges toward player when close\nreturn function(dt, pos, vel)\n    local chargeSpeed = 350\n    local chargeDistance = 600\n\n    local targetX, targetY, found = find_nearest_player(pos.x, pos.y)\n\n    if found then\n        local dx = targetX - pos.x\n        local dy = targetY - pos.y\n        local dist = math.sqrt(dx*dx + dy*dy)\n\n        local speed = dist &lt; chargeDistance and chargeSpeed or 60\n\n        if dist &gt; 1.0 then\n            vel.x = (dx / dist) * speed\n            vel.y = (dy / dist) * speed\n        end\n    else\n        vel.x = -chargeSpeed * 0.5\n        vel.y = 0\n    end\n\n    pos.x = pos.x + vel.x * dt\n    pos.y = pos.y + vel.y * dt\nend\n</code></pre>"},{"location":"LUA_SCRIPTING/#example-zigzag-enemy","title":"Example: Zigzag Enemy","text":"<pre><code>-- Changes vertical direction based on horizontal distance\nreturn function(dt, pos, vel)\n    local speedX = 90\n    local speedY = 70\n    local zigzagWidth = 180\n\n    local segment = math.floor(pos.x / zigzagWidth)\n\n    if segment % 2 == 0 then\n        vel.y = speedY\n    else\n        vel.y = -speedY\n    end\n\n    vel.x = -speedX\n\n    pos.x = pos.x + vel.x * dt\n    pos.y = pos.y + vel.y * dt\n\n    -- Clamp Y position\n    if pos.y &lt; 80 then pos.y = 80 end\n    if pos.y &gt; 1000 then pos.y = 1000 end\nend\n</code></pre>"},{"location":"LUA_SCRIPTING/#enemy-types-and-scripts","title":"Enemy Types and Scripts","text":"Enemy Type Script File Behavior <code>basic</code> <code>basic.lua</code> Simple leftward movement <code>zigzag</code> <code>zigzag.lua</code> Zigzag pattern <code>bouncer</code> <code>bouncer.lua</code> Bounces off screen edges <code>kamikaze</code> <code>kamikaze.lua</code> Charges toward nearest player <code>tank</code> <code>basic.lua</code> Slow movement, high HP <code>fast</code> <code>basic.lua</code> Fast movement, low HP"},{"location":"LUA_SCRIPTING/#boss-scripts","title":"Boss Scripts","text":""},{"location":"LUA_SCRIPTING/#script-signature_1","title":"Script Signature","text":"<p>Boss scripts receive additional state information:</p> <pre><code>return function(dt, pos, vel, boss_state)\n    -- dt: delta time (seconds)\n    -- pos: position table {x, y}\n    -- vel: velocity table {x, y}\n    -- boss_state: table with boss info\n    --   .phase: current phase (0, 1, or 2)\n    --   .phase_timer: time in current phase\n    --   .attack_timer: time since last attack\n    --   .health_percent: current HP percentage (0.0-1.0)\n\n    -- Return true if an attack was performed (resets attack_timer)\n    return false\nend\n</code></pre>"},{"location":"LUA_SCRIPTING/#phase-system","title":"Phase System","text":"<p>Bosses automatically transition between 3 phases based on health:</p> Phase Health Range Behavior 0 100% - 67% Phase 1: Easiest patterns 1 66% - 34% Phase 2: Medium difficulty 2 33% - 0% Phase 3: Hardest patterns <p>Phase transitions are handled automatically by <code>LuaSystem</code> - the script just needs to check <code>boss_state.phase</code>.</p>"},{"location":"LUA_SCRIPTING/#attack-pattern-functions","title":"Attack Pattern Functions","text":"Function Parameters Description <code>spawn_boss_projectile(x, y, vx, vy, damage)</code> Position, velocity, damage Spawn single projectile <code>spawn_pattern_360(x, y, count, speed, damage)</code> Position, projectile count, speed, damage 360-degree spray <code>spawn_pattern_aimed(x, y, count, speed, damage, spread)</code> Position, count, speed, damage, spread angle (degrees) Aimed burst at nearest player <code>spawn_pattern_spiral(x, y, count, speed, damage, rotation)</code> Position, count, speed, damage, rotation offset (degrees) Rotating spiral pattern <code>spawn_pattern_random(x, y, count, speed, damage)</code> Position, count, speed, damage Random direction barrage"},{"location":"LUA_SCRIPTING/#example-boss-script","title":"Example: Boss Script","text":"<pre><code>-- Boss with 3 phases\nlocal ATTACK_COOLDOWNS = {2.5, 1.8, 1.2}  -- Per phase\nlocal MIN_X, MAX_X = 1200.0, 1800.0\nlocal MIN_Y, MAX_Y = 100.0, 980.0\n\nreturn function(dt, pos, vel, boss_state)\n    local phase = boss_state.phase\n    local timer = boss_state.phase_timer\n\n    -- Movement based on phase\n    if phase == 0 then\n        -- Phase 1: Slow vertical sine\n        vel.x = 0\n        vel.y = math.sin(timer * 2.0) * 80.0\n    elseif phase == 1 then\n        -- Phase 2: Figure-8 pattern\n        vel.x = math.sin(timer * 1.5) * 50.0\n        vel.y = math.sin(timer * 3.0) * 100.0\n    else\n        -- Phase 3: Aggressive movement\n        vel.x = math.sin(timer * 2.0) * 70.0\n        vel.y = math.sin(timer * 4.0) * 120.0\n    end\n\n    -- Apply movement\n    pos.x = pos.x + vel.x * dt\n    pos.y = pos.y + vel.y * dt\n\n    -- Clamp to boundaries\n    pos.x = math.max(MIN_X, math.min(MAX_X, pos.x))\n    pos.y = math.max(MIN_Y, math.min(MAX_Y, pos.y))\n\n    -- Attacks\n    local cooldown = ATTACK_COOLDOWNS[phase + 1]\n    if boss_state.attack_timer &gt;= cooldown then\n        if phase == 0 then\n            spawn_pattern_aimed(pos.x, pos.y, 5, 280, 20, 20.0)\n        elseif phase == 1 then\n            spawn_pattern_spiral(pos.x, pos.y, 10, 240, 25, timer * 60)\n        else\n            spawn_pattern_360(pos.x, pos.y, 16, 220, 30)\n        end\n        return true  -- Attack performed\n    end\n    return false\nend\n</code></pre>"},{"location":"LUA_SCRIPTING/#boss-configuration-in-level-json","title":"Boss Configuration in Level JSON","text":"<p>Each level specifies its boss script in the level configuration:</p> <pre><code>\"boss\": {\n    \"boss_name\": \"Mars Guardian\",\n    \"spawn_scroll_distance\": 6500.0,\n    \"spawn_position_x\": 1600.0,\n    \"spawn_position_y\": 540.0,\n    \"script_path\": \"boss/boss1_mars_guardian.lua\",\n    \"total_phases\": 3\n}\n</code></pre>"},{"location":"LUA_SCRIPTING/#current-bosses","title":"Current Bosses","text":"Level Boss Name Script Movement Pattern 1 Mars Guardian <code>boss1_mars_guardian.lua</code> Vertical sine, Figure-8 2 Nebula Core <code>boss2_nebula_core.lua</code> Stationary, Chase 3 Uranus Sentinel <code>boss3_uranus_sentinel.lua</code> Circular orbit 4 Jupiter Titan <code>boss4_jupiter_titan.lua</code> Erratic, all attack types"},{"location":"LUA_SCRIPTING/#creating-a-new-enemy-script","title":"Creating a New Enemy Script","text":"<ol> <li>Create a new <code>.lua</code> file in <code>assets/scripts/ai/</code></li> <li>Return a function with signature <code>function(dt, pos, vel)</code></li> <li>Modify <code>pos</code> and <code>vel</code> to control movement</li> <li>Use <code>find_nearest_player()</code> for player tracking</li> </ol>"},{"location":"LUA_SCRIPTING/#creating-a-new-boss-script","title":"Creating a New Boss Script","text":"<ol> <li>Create a new <code>.lua</code> file in <code>assets/scripts/ai/boss/</code></li> <li>Return a function with signature <code>function(dt, pos, vel, boss_state)</code></li> <li>Implement phase-based behavior using <code>boss_state.phase</code></li> <li>Use attack pattern functions for projectiles</li> <li>Return <code>true</code> after performing an attack to reset cooldown</li> <li>Add the script path to the level JSON configuration</li> </ol>"},{"location":"LUA_SCRIPTING/#technical-details","title":"Technical Details","text":""},{"location":"LUA_SCRIPTING/#script-loading","title":"Script Loading","text":"<p>Scripts are cached after first load for performance. The <code>LuaSystem</code> handles: - Loading scripts from <code>assets/scripts/ai/</code> base path - Caching compiled Lua functions - Passing component data to scripts - Applying script results back to components</p>"},{"location":"LUA_SCRIPTING/#component-requirements","title":"Component Requirements","text":"<p>For enemies: - <code>Script</code> component with <code>path</code> field (e.g., <code>\"zigzag.lua\"</code>) - <code>Position</code> component - <code>Velocity</code> component</p> <p>For bosses: - <code>BossScript</code> component with <code>path</code> field (e.g., <code>\"boss/boss1_mars_guardian.lua\"</code>) - <code>Position</code> component - <code>Velocity</code> component - <code>Health</code> component (for phase calculations)</p>"},{"location":"LUA_SCRIPTING/#screen-boundaries","title":"Screen Boundaries","text":"<ul> <li>Screen size: 1920x1080</li> <li>Boss area: X: 1200-1800, Y: 100-980</li> <li>Enemy spawn: Usually X &gt; 1920 (off-screen right)</li> </ul>"},{"location":"PROCEDURAL_GENERATION/","title":"Procedural Map Generation System","text":""},{"location":"PROCEDURAL_GENERATION/#overview","title":"Overview","text":"<p>The R-Type procedural generation system creates infinite, unique map layouts at runtime. The system generates navigable passages with obstacles (stalactites/stalagmites) while ensuring smooth transitions between segments and maintaining client-server synchronization.</p>"},{"location":"PROCEDURAL_GENERATION/#architecture","title":"Architecture","text":""},{"location":"PROCEDURAL_GENERATION/#core-components","title":"Core Components","text":""},{"location":"PROCEDURAL_GENERATION/#1-proceduralmapgenerator-srcr-typegame-logicsrcproceduralmapgeneratorcpp","title":"1. ProceduralMapGenerator (<code>src/r-type/game-logic/src/ProceduralMapGenerator.cpp</code>)","text":"<p>The generator creates map segments using a seeded random algorithm.</p> <p>Key Features: - Deterministic Generation: Same seed produces identical maps across client and server - Continuous Passages: Entry/exit states ensure seamless segment transitions - Configurable Parameters: Adjustable passage height, obstacle density, and path variation - Infinite Generation: Can generate unlimited segments on-demand</p> <p>Algorithm:</p> <pre><code>class ProceduralMapGenerator {\n    struct GenerationParams {\n        int minPassageHeight;      // Minimum navigable height (tiles)\n        float stalactiteChance;    // Probability of obstacle placement (0-1)\n        int maxStalactiteLength;   // Maximum obstacle extension (tiles)\n        int pathVariation;         // Degree of path meandering\n    };\n\n    struct PathState {\n        int topY;     // Upper boundary of passage\n        int bottomY;  // Lower boundary of passage\n    };\n};\n</code></pre> <p>Generation Process:</p> <ol> <li>Path Generation: Creates a meandering corridor using constrained random walk</li> <li>Gradual vertical movement (\u00b12 tiles per column)</li> <li>Width variation while maintaining minimum passage height</li> <li> <p>Smooth transitions to prevent abrupt changes</p> </li> <li> <p>Wall Drawing: Fills tiles above and below the passage path</p> </li> <li>Top wall: tiles[0...topY]</li> <li> <p>Bottom wall: tiles[bottomY...HEIGHT]</p> </li> <li> <p>Obstacle Placement: Adds stalactites (ceiling) and stalagmites (floor)</p> </li> <li>Probabilistic placement based on <code>stalactiteChance</code></li> <li>Respects minimum passage height constraints</li> <li>Skips segment edges to preserve entry/exit clearance</li> </ol>"},{"location":"PROCEDURAL_GENERATION/#2-chunkmanagersystem-srcr-typegame-logicsrcchunkmanagersystemcpp","title":"2. ChunkManagerSystem (<code>src/r-type/game-logic/src/ChunkManagerSystem.cpp</code>)","text":"<p>Manages tile streaming and rendering for both static and procedural maps.</p> <p>Dual Mode Operation:</p> <pre><code>// Static Mode (e.g., Mars, Jupiter, Uranus)\n- Loads pre-defined segments from JSON files\n- Fixed map length\n- Segment data stored in std::vector&lt;SegmentData&gt;\n\n// Procedural Mode (e.g., Nebula)\n- Generates segments on-demand using ProceduralMapGenerator\n- Infinite map length\n- Segment data cached in std::unordered_map&lt;int, SegmentData&gt;\n</code></pre> <p>Chunk Loading Strategy:</p> <pre><code>Screen View          Load Threshold\n     |                    |\n     v                    v\n|----[====]----[====]----[====]----|  Active Chunks\n     ^                         ^\n     |                         |\nUnload Threshold          Furthest Loaded\n</code></pre> <ul> <li>Load Ahead: Generates chunks beyond screen view for seamless scrolling</li> <li>Lazy Generation: Segments created only when needed</li> <li>Cache Management: Keeps recent segments in memory</li> <li>Unload Behind: Removes off-screen chunks to manage memory</li> </ul>"},{"location":"PROCEDURAL_GENERATION/#3-gamesession-server-srcr-typeserversrcgamesessioncpp","title":"3. GameSession (Server) (<code>src/r-type/server/src/GameSession.cpp</code>)","text":"<p>Handles server-side collision and generation synchronization.</p> <p>Responsibilities: - Generate wall collision entities from procedural segments - Maintain same segment cache as client - Ensure collision boundaries match visual tiles</p>"},{"location":"PROCEDURAL_GENERATION/#client-server-synchronization","title":"Client-Server Synchronization","text":"<p>Critical Requirement: Both client and server must generate identical segments.</p> <p>Synchronization Flow:</p> <pre><code>Server (GameSession)                  Client (ChunkManagerSystem)\n        |                                      |\n        | 1. Load map config (seed=0)         |\n        | 2. Generate random seed              |\n        |    seed = std::random_device()()     |\n        |                                      |\n        | 3. Initialize ProceduralMapGenerator |\n        |    with server seed                  |\n        |                                      |\n        | 4. Send seed to client        -----&gt; | 5. Receive seed from server\n        |    (via level start packet)          |\n        |                                      | 6. Call setProceduralSeed(seed)\n        |                                      |\n        | 7. Generate segment N                | 8. Generate segment N\n        |    (on-demand)                       |    (on-demand)\n        |                                      |\n        | Result: Identical segments           |\n</code></pre> <p>Implementation Status:</p> <p>\u26a0\ufe0f TODO: Seed transmission not yet implemented - Currently, both client and server use seed from map config - Need to add seed field to <code>LevelStartPacket</code> protocol - Server should send generated seed to all clients</p>"},{"location":"PROCEDURAL_GENERATION/#configuration","title":"Configuration","text":""},{"location":"PROCEDURAL_GENERATION/#map-configuration-assetsmapsnebula_outpostmapjson","title":"Map Configuration (<code>assets/maps/nebula_outpost/map.json</code>)","text":"<pre><code>{\n    \"id\": \"nebula_outpost\",\n    \"name\": \"Nebula Outpost\",\n    \"tileSize\": 16,\n    \"chunkWidth\": 30,\n    \"procedural\": {\n        \"enabled\": true,\n        \"seed\": 0,\n        \"params\": {\n            \"minPassageHeight\": 45,\n            \"stalactiteChance\": 0.25,\n            \"maxStalactiteLength\": 6,\n            \"pathVariation\": 5\n        }\n    },\n    \"tileSheet\": {\n        \"path\": \"tiles/tilesheet.png\",\n        \"walls\": { /* ... tile definitions ... */ }\n    }\n}\n</code></pre>"},{"location":"PROCEDURAL_GENERATION/#configuration-parameters","title":"Configuration Parameters","text":"Parameter Type Default Description <code>enabled</code> bool false Enable procedural generation <code>seed</code> uint32_t 0 Generation seed (0 = random) <code>minPassageHeight</code> int 45 Minimum navigable height in tiles <code>stalactiteChance</code> float 0.25 Obstacle spawn probability (0-1) <code>maxStalactiteLength</code> int 6 Maximum obstacle length in tiles <code>pathVariation</code> int 5 Path meandering intensity"},{"location":"PROCEDURAL_GENERATION/#seed-modes","title":"Seed Modes","text":"<p>Random Seed (<code>seed: 0</code>): - Server generates new seed each session - Every playthrough has unique map - Best for replayability</p> <p>Fixed Seed (<code>seed: 12345</code>): - Same map layout every time - Useful for:   - Testing and debugging   - Speedrun competitions   - Sharing specific map challenges   - Reproducible bug reports</p>"},{"location":"PROCEDURAL_GENERATION/#data-structures","title":"Data Structures","text":""},{"location":"PROCEDURAL_GENERATION/#segmentdata","title":"SegmentData","text":"<pre><code>struct SegmentData {\n    int segmentId;      // Unique segment identifier\n    int width;          // Segment width in tiles (typically 60)\n    int height;         // Segment height in tiles (typically 68)\n    std::vector&lt;std::vector&lt;int&gt;&gt; tiles;  // 2D grid: 0=empty, 1=wall\n};\n</code></pre>"},{"location":"PROCEDURAL_GENERATION/#proceduralconfig","title":"ProceduralConfig","text":"<pre><code>struct ProceduralConfig {\n    bool enabled;\n    uint32_t seed;\n    int minPassageHeight;\n    float stalactiteChance;\n    int maxStalactiteLength;\n    int pathVariation;\n};\n</code></pre>"},{"location":"PROCEDURAL_GENERATION/#chunk","title":"Chunk","text":"<pre><code>struct Chunk {\n    int segmentId;                         // Parent segment ID\n    int chunkIndex;                        // Index within segment\n    double worldX;                         // Absolute X position (pixels)\n    int width;                             // Chunk width in tiles\n    int height;                            // Chunk height in tiles\n    std::vector&lt;std::vector&lt;Tile&gt;&gt; tiles;  // Processed tiles with auto-tiling\n    bool isLoaded;                         // Load status flag\n};\n</code></pre>"},{"location":"PROCEDURAL_GENERATION/#implementation-details","title":"Implementation Details","text":""},{"location":"PROCEDURAL_GENERATION/#segment-dimensions","title":"Segment Dimensions","text":"<pre><code>Width:  60 tiles = 960 pixels (at 16px/tile)\nHeight: 68 tiles = 1088 pixels (at 16px/tile)\n\nEach segment = 60 tiles wide\nEach chunk   = 30 tiles wide\nResult: 2 chunks per segment\n</code></pre>"},{"location":"PROCEDURAL_GENERATION/#auto-tiling-integration","title":"Auto-Tiling Integration","text":"<p>The system uses a 17-variant auto-tiler to create seamless wall connections:</p> <ol> <li>Padding: Chunks include 1-tile padding from adjacent segments</li> <li>Neighbor Analysis: AutoTiler examines 8 surrounding tiles</li> <li>Variant Selection: Chooses correct tile variant (corner, edge, center, etc.)</li> <li>Rendering: ChunkManagerSystem renders processed tiles directly</li> </ol> <p>Tile Variants: - Corners: topLeft, topRight, bottomLeft, bottomRight - Edges: top, bottom, left, right - Centers: center, horizontal, vertical - Special: isolated, spike variants</p>"},{"location":"PROCEDURAL_GENERATION/#memory-management","title":"Memory Management","text":"<p>Cache Strategy:</p> <pre><code>// Static maps: pre-allocated vector\nstd::vector&lt;SegmentData&gt; m_segments;\n\n// Procedural maps: dynamic cache\nstd::unordered_map&lt;int, SegmentData&gt; m_generatedSegments;\n</code></pre> <p>Optimization Techniques: - Lazy generation: segments created only when needed - LRU eviction: old segments removed when far from player - Chunk streaming: only visible portions loaded - No entity creation on client (render-only system)</p> <p>Memory Footprint (per segment): <pre><code>Tiles: 60 \u00d7 68 \u00d7 4 bytes = 16,320 bytes\nOverhead: ~1 KB\nTotal: ~17 KB per cached segment\n</code></pre></p>"},{"location":"PROCEDURAL_GENERATION/#performance-considerations","title":"Performance Considerations","text":""},{"location":"PROCEDURAL_GENERATION/#generation-performance","title":"Generation Performance","text":"<p>Benchmarks (typical hardware): - Segment generation: &lt; 1ms - Chunk processing: &lt; 2ms - Total load time: &lt; 5ms per chunk</p> <p>Optimization: - Pre-generate segment 0 during map initialization - Generate 2-3 segments ahead of player - Use double precision for scroll tracking (prevents FP errors)</p>"},{"location":"PROCEDURAL_GENERATION/#rendering-performance","title":"Rendering Performance","text":"<p>Tile Count (typical screen): - Visible tiles: ~8,000-10,000 - Rendered sprites: only non-empty tiles - Draw calls: batched by graphics backend</p> <p>Culling: - Chunk-level: skip off-screen chunks - Tile-level: skip off-screen tiles within visible chunks</p>"},{"location":"PROCEDURAL_GENERATION/#testing-validation","title":"Testing &amp; Validation","text":""},{"location":"PROCEDURAL_GENERATION/#unit-tests","title":"Unit Tests","text":"<p>ProceduralMapGenerator: - \u2705 Deterministic output with same seed - \u2705 Minimum passage height maintained - \u2705 Smooth segment transitions - \u2705 Obstacle placement within constraints</p> <p>ChunkManagerSystem: - \u2705 Static vs procedural mode switching - \u2705 Chunk loading/unloading - \u2705 Cache management - \u2705 Segment access via getOrGenerateSegment()</p>"},{"location":"PROCEDURAL_GENERATION/#integration-tests","title":"Integration Tests","text":"<p>Client-Server Sync: - \u23f3 TODO: Seed transmission verification - \u2705 Collision boundaries match visual tiles - \u2705 Multiple clients see identical map</p> <p>Gameplay: - \u2705 Passages always navigable - \u2705 No impossible gaps or dead ends - \u2705 Long play sessions (100+ segments)</p>"},{"location":"PROCEDURAL_GENERATION/#troubleshooting","title":"Troubleshooting","text":""},{"location":"PROCEDURAL_GENERATION/#common-issues","title":"Common Issues","text":"<p>1. Tiles not visible but collisions work - Cause: Chunk loading logic checks <code>m_segments.empty()</code> in procedural mode - Fix: Check <code>m_proceduralEnabled</code> instead - Location: <code>ChunkManagerSystem::update()</code></p> <p>2. Segmentation fault on chunk load - Cause: Direct access to <code>m_segments[id]</code> in procedural mode - Fix: Use <code>getOrGenerateSegment(id)</code> everywhere - Locations: <code>update()</code>, <code>loadChunk()</code> padding logic</p> <p>3. Maps identical every playthrough - Cause: Fixed seed in config (<code>seed: 12345</code>) - Fix: Set <code>seed: 0</code> for random generation - Location: <code>map.json</code></p> <p>4. Client-server desync - Cause: Different seeds or RNG state - Fix: Ensure server sends seed to client - Status: \u23f3 TODO - seed transmission</p>"},{"location":"PROCEDURAL_GENERATION/#debug-logging","title":"Debug Logging","text":"<p>Enable verbose logging to trace generation:</p> <pre><code>// ProceduralMapGenerator.cpp\nstd::cout &lt;&lt; \"[ProceduralGen] Generating segment \" &lt;&lt; segmentId &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"[ProceduralGen] Drew \" &lt;&lt; wallTilesCount &lt;&lt; \" wall tiles\" &lt;&lt; std::endl;\n\n// ChunkManagerSystem.cpp\nstd::cout &lt;&lt; \"[ChunkManagerSystem] Loading chunk - segment: \" &lt;&lt; segmentId &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"[ChunkManagerSystem] Rendering \" &lt;&lt; m_activeChunks.size() &lt;&lt; \" chunks\" &lt;&lt; std::endl;\n</code></pre>"},{"location":"PROCEDURAL_GENERATION/#future-enhancements","title":"Future Enhancements","text":""},{"location":"PROCEDURAL_GENERATION/#planned-features","title":"Planned Features","text":"<ol> <li>Seed Transmission Protocol (Priority: High)</li> <li>Add seed field to LevelStartPacket</li> <li>Server broadcasts seed to all clients</li> <li> <p>Client calls <code>setProceduralSeed()</code> on receive</p> </li> <li> <p>Enhanced Generation Algorithms</p> </li> <li>Cave systems with branching paths</li> <li>Vertical shafts and multi-level areas</li> <li>Circular rooms with multiple entrances</li> <li> <p>Variable width corridors</p> </li> <li> <p>Obstacle Variety</p> </li> <li>Floating asteroids (independent of walls)</li> <li>Spinning debris fields</li> <li>Destructible obstacles</li> <li> <p>Moving hazards</p> </li> <li> <p>Biome System</p> </li> <li>Different visual themes per region</li> <li>Theme-specific obstacles</li> <li>Gradual biome transitions</li> <li> <p>Boss arena generation</p> </li> <li> <p>Difficulty Scaling</p> </li> <li>Narrower passages over time</li> <li>Increased obstacle density</li> <li>Faster path variation</li> <li>Dynamic parameter adjustment</li> </ol>"},{"location":"PROCEDURAL_GENERATION/#extensibility","title":"Extensibility","text":"<p>Adding New Procedural Maps:</p> <ol> <li>Create map config with <code>procedural.enabled: true</code></li> <li>Configure generation parameters</li> <li>Provide tileset with auto-tile variants</li> <li>(Optional) Implement custom generator subclass</li> </ol> <p>Custom Generators:</p> <pre><code>class CaveMapGenerator : public ProceduralMapGenerator {\n    SegmentData generateSegment(...) override {\n        // Custom cave generation algorithm\n    }\n};\n</code></pre>"},{"location":"PROCEDURAL_GENERATION/#references","title":"References","text":""},{"location":"PROCEDURAL_GENERATION/#related-files","title":"Related Files","text":"<p>Core Implementation: - <code>src/r-type/game-logic/include/ProceduralMapGenerator.hpp</code> - <code>src/r-type/game-logic/src/ProceduralMapGenerator.cpp</code> - <code>src/r-type/game-logic/src/ChunkManagerSystem.cpp</code> - <code>src/r-type/server/src/GameSession.cpp</code></p> <p>Data Structures: - <code>src/r-type/game-logic/include/components/MapTypes.hpp</code></p> <p>Configuration: - <code>src/r-type/game-logic/src/MapConfigLoader.cpp</code> - <code>src/r-type/assets/maps/nebula_outpost/map.json</code></p> <p>Documentation: - <code>docs/plans/procedural-generation-nebula.md</code> - Implementation plan</p>"},{"location":"PROCEDURAL_GENERATION/#external-resources","title":"External Resources","text":"<ul> <li>Procedural Generation Wiki</li> <li>Random Walk Algorithms</li> <li>Perlin Noise for Terrain</li> <li>Dungeon Generation Algorithms</li> </ul>"},{"location":"PROCEDURAL_GENERATION/#contributors","title":"Contributors","text":"<ul> <li>Implementation: Claude Sonnet 4.5</li> <li>Design: Based on R-Type architecture</li> <li>Testing: ericoed</li> </ul> <p>Document Version: 1.0 Last Updated: 2026-01-16 Status: \u2705 Implemented, \u23f3 Seed transmission pending</p>"},{"location":"PROTOCOL/","title":"R-Type Game Protocol Specification","text":"<p>Status: Draft Version: 1.0 Date: December 2025 Authors: R-Type Development Team</p>"},{"location":"PROTOCOL/#1-introduction","title":"1. Introduction","text":""},{"location":"PROTOCOL/#11-purpose","title":"1.1 Purpose","text":"<p>This document specifies the R-Type Game Protocol (RTGP), a UDP-based binary protocol for client-server communication in the R-Type multiplayer game. The protocol enables real-time gameplay synchronization, lobby management, and matchmaking for cooperative multiplayer sessions.</p>"},{"location":"PROTOCOL/#12-scope","title":"1.2 Scope","text":"<p>This protocol defines packet formats, message types, and communication patterns for: - Client authentication and connection management - Lobby system with game mode and difficulty selection - Custom room management with password protection - Matchmaking and game session initialization - Player input transmission - Game state synchronization - Entity management (players, enemies, projectiles, power-ups) - Game events and scoring</p>"},{"location":"PROTOCOL/#13-requirements-language","title":"1.3 Requirements Language","text":"<p>The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this document are to be interpreted as described in RFC 2119.</p>"},{"location":"PROTOCOL/#2-protocol-overview","title":"2. Protocol Overview","text":""},{"location":"PROTOCOL/#21-transport-layer","title":"2.1 Transport Layer","text":"<p>RTGP operates over UDP (User Datagram Protocol). The default server port is 4242 (configurable).</p> <p>Rationale: UDP is chosen over TCP for: - Lower latency requirements for real-time gameplay - Tolerance for occasional packet loss (state is regularly synchronized) - Reduced overhead for high-frequency input packets</p>"},{"location":"PROTOCOL/#22-packet-structure","title":"2.2 Packet Structure","text":"<p>All packets consist of a fixed-size header followed by a variable-length payload:</p> <pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |    Version    |     Type      |     Flags     | Payload Len   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Payload Len  |                Sequence Number                |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Seq Number    | Uncompressed Size (optional, if COMPRESSED)   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |Uncompressed.. |              Payload Data                     |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                         Payload Data                          |\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre>"},{"location":"PROTOCOL/#23-size-constraints","title":"2.3 Size Constraints","text":"<ul> <li>Maximum packet size: 1400 bytes (MTU-safe for typical network configurations)</li> <li>Base header size: 9 bytes (without compression metadata)</li> <li>Extended header size: 13 bytes (with compression metadata when COMPRESSED flag is set)</li> <li>Maximum payload size: 1387 bytes (accounting for largest possible header)</li> <li>Packets exceeding 1400 bytes MUST be fragmented or redesigned</li> </ul>"},{"location":"PROTOCOL/#24-compression","title":"2.4 Compression","text":"<p>Starting from protocol version 1.0, packets support optional LZ4 compression for large payloads:</p> <ul> <li>Compression library: LZ4 (fast compression algorithm)</li> <li>Automatic compression: Large packets are automatically compressed if beneficial</li> <li>Compression criteria:</li> <li>Payload size \u2265 128 bytes (configurable via <code>MIN_COMPRESSION_SIZE</code>)</li> <li>Compression gain \u2265 10% (configurable via <code>MIN_COMPRESSION_GAIN</code>)</li> <li>Compression time &lt; 500\u00b5s (configurable via <code>MAX_COMPRESSION_TIME_US</code>)</li> <li>Compressible packet types: SNAPSHOT, DELTA_SNAPSHOT, LOBBY_STATE, ROOM_LIST</li> <li>Compression statistics: Tracked automatically for monitoring and optimization</li> </ul>"},{"location":"PROTOCOL/#3-packet-header","title":"3. Packet Header","text":""},{"location":"PROTOCOL/#31-header-format","title":"3.1 Header Format","text":"<p>All packets begin with a header in network byte order (big-endian). The header size is 9 bytes (base) or 13 bytes (if COMPRESSED flag is set).</p>"},{"location":"PROTOCOL/#base-header-9-bytes","title":"Base Header (9 bytes)","text":"Field Size Offset Description Version 1 byte 0 Protocol version (0x01) Type 1 byte 1 Packet type identifier Flags 1 byte 2 Packet flags (bit 0 = COMPRESSED) Payload Length 2 bytes 3 Length of payload in bytes (big-endian) Sequence Number 4 bytes 5 Monotonic sequence number (big-endian)"},{"location":"PROTOCOL/#extended-header-4-bytes-if-compressed-flag-set","title":"Extended Header (+ 4 bytes if COMPRESSED flag set)","text":"Field Size Offset Description Uncompressed Size 4 bytes 9 Original payload size before compression"},{"location":"PROTOCOL/#32-field-definitions","title":"3.2 Field Definitions","text":"<p>Version (8 bits) - MUST be set to <code>0x01</code> for this version of the protocol - Receivers MUST reject packets with unknown versions - Future versions MAY use different values for backward compatibility detection</p> <p>Type (8 bits) - Identifies the packet type (see Section 4) - Values <code>0x00-0x7F</code>: Reserved for client-to-server packets - Values <code>0x80-0xFF</code>: Reserved for server-to-client packets</p> <p>Flags (8 bits) - Bitfield for packet metadata and options - Bit 0 (0x01): <code>COMPRESSED</code> - Payload is compressed with LZ4   - When set, the header includes 4 additional bytes (Uncompressed Size)   - Payload data is LZ4-compressed and must be decompressed before processing - Bits 1-7: Reserved for future use (MUST be set to 0)</p> <p>Payload Length (16 bits, big-endian) - Length of the payload in bytes - If COMPRESSED flag is set, this is the compressed payload size - If COMPRESSED flag is NOT set, this is the original payload size - MUST NOT exceed 1387 bytes - Value of 0 indicates no payload (header-only packet)</p> <p>Uncompressed Size (32 bits, big-endian) - Optional - ONLY present if COMPRESSED flag (bit 0) is set - Specifies the original size of the payload before compression - Used by receiver to pre-allocate decompression buffer - MUST be greater than Payload Length when present</p> <p>Sequence Number (32 bits, big-endian) - Monotonically increasing counter per connection - Used for packet ordering, loss detection, and replay prevention - Wraps around at 2^32 - Clients and servers maintain separate sequence counters</p>"},{"location":"PROTOCOL/#4-packet-types","title":"4. Packet Types","text":""},{"location":"PROTOCOL/#41-type-id-allocation","title":"4.1 Type ID Allocation","text":"<p>Packet types are organized by functional category:</p> Range Category Description 0x01-0x04 Connection Management Connect, disconnect, keepalive 0x05-0x09 Lobby &amp; Matchmaking Join, leave, lobby state updates 0x10-0x1F Player Input Real-time input commands 0x20-0x2F Room Management Custom rooms, room list, host control 0x30-0x3F Reserved Future client-to-server use 0x81-0x8A Connection &amp; Lobby (S\u2192C) Accept, reject, lobby updates 0x90-0x9F Room Management (S\u2192C) Room created, room list, room errors 0xA0-0xAF World State Game snapshots, delta updates 0xB0-0xBF Entity Events Spawn, destroy, damage 0xC0-0xCF Game Mechanics Powerups, scoring, waves, respawn 0xF0-0xFF System &amp; Chat Broadcast messages, system events"},{"location":"PROTOCOL/#42-client-to-server-packets","title":"4.2 Client-to-Server Packets","text":"Type ID Name Description 0x01 CLIENT_CONNECT Initial connection request 0x02 CLIENT_DISCONNECT Graceful disconnection 0x04 CLIENT_PING Keepalive and latency measurement 0x05 CLIENT_JOIN_LOBBY Join lobby with mode/difficulty 0x06 CLIENT_LEAVE_LOBBY Leave current lobby 0x10 CLIENT_INPUT Player input state 0x20 CLIENT_CREATE_ROOM Create a custom game room 0x21 CLIENT_JOIN_ROOM Join an existing custom room 0x22 CLIENT_LEAVE_ROOM Leave current custom room 0x23 CLIENT_REQUEST_ROOM_LIST Request list of available rooms 0x24 CLIENT_START_GAME Start game (host only) 0x25 CLIENT_SET_PLAYER_NAME Change player name in lobby 0x26 CLIENT_SET_PLAYER_SKIN Change player skin in lobby 0x30 CLIENT_ADMIN_AUTH Admin authentication request 0x31 CLIENT_ADMIN_COMMAND Admin command execution"},{"location":"PROTOCOL/#43-server-to-client-packets","title":"4.3 Server-to-Client Packets","text":"Type ID Name Description 0x81 SERVER_ACCEPT Connection accepted 0x82 SERVER_REJECT Connection rejected 0x83 SERVER_PLAYER_JOINED Another player joined the server 0x84 SERVER_PLAYER_LEFT A player disconnected 0x85 SERVER_PONG Ping response 0x87 SERVER_LOBBY_STATE Current lobby state update 0x88 SERVER_GAME_START_COUNTDOWN Game starting countdown 0x89 SERVER_COUNTDOWN_CANCELLED Countdown cancelled (player left) 0x8A SERVER_GAME_START Game session begins 0x90 SERVER_ROOM_CREATED Custom room created successfully 0x91 SERVER_ROOM_LIST List of available custom rooms 0x92 SERVER_ROOM_JOINED Successfully joined a custom room 0x93 SERVER_ROOM_LEFT Player left a custom room 0x94 SERVER_ROOM_STATE_UPDATE Custom room state changed 0x95 SERVER_ROOM_ERROR Room operation error 0x96 SERVER_PLAYER_NAME_UPDATED Player name changed in room 0x97 SERVER_PLAYER_SKIN_UPDATED Player skin changed in room 0xA0 SERVER_SNAPSHOT Complete world state snapshot 0xA1 SERVER_DELTA_SNAPSHOT Delta-compressed state update 0xB0 SERVER_ENTITY_SPAWN New entity spawned 0xB1 SERVER_ENTITY_DESTROY Entity destroyed 0xB2 SERVER_ENTITY_DAMAGE Entity took damage 0xB3 SERVER_PROJECTILE_SPAWN Projectile fired 0xC0 SERVER_POWERUP_COLLECTED Power-up collected by player 0xC1 SERVER_SCORE_UPDATE Player score updated 0xC2 SERVER_WAVE_START New enemy wave starting 0xC3 SERVER_WAVE_COMPLETE Wave completed 0xC4 SERVER_PLAYER_LEVEL_UP Player leveled up 0xC5 SERVER_PLAYER_RESPAWN Player respawned 0xC6 SERVER_GAME_OVER Game session ended 0xC7 SERVER_LEADERBOARD End-game leaderboard with all scores 0xF0 SERVER_ADMIN_AUTH_RESULT Admin authentication result 0xF1 SERVER_ADMIN_COMMAND_RESULT Admin command execution result 0xF2 SERVER_ADMIN_NOTIFICATION Server-wide admin notification 0xF3 SERVER_KICK_NOTIFICATION Player kicked by admin"},{"location":"PROTOCOL/#5-payload-formats","title":"5. Payload Formats","text":"<p>All multi-byte integer fields are in network byte order (big-endian) unless otherwise specified. Floating-point values use IEEE 754 single precision (32-bit) format.</p>"},{"location":"PROTOCOL/#51-connection-management-payloads","title":"5.1 Connection Management Payloads","text":""},{"location":"PROTOCOL/#511-client_connect-0x01","title":"5.1.1 CLIENT_CONNECT (0x01)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Client Ver   |                                               |\n   +-+-+-+-+-+-+-+-+                                               +\n   |                        Player Name (32 bytes)                 |\n   +                                                               +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Client Ver 1 byte Client version identifier (0x01) Player Name 32 bytes UTF-8 player name (null-terminated/padded) <p>Total Size: 33 bytes</p>"},{"location":"PROTOCOL/#512-client_disconnect-0x02","title":"5.1.2 CLIENT_DISCONNECT (0x02)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |    Reason     |\n   +-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player identifier Reason 1 byte Disconnect reason code <p>Reason Codes: - <code>0x01</code>: USER_QUIT - Player voluntarily quit - <code>0x02</code>: TIMEOUT - Connection timeout - <code>0x03</code>: ERROR - Client error</p> <p>Total Size: 5 bytes</p>"},{"location":"PROTOCOL/#513-client_ping-0x04","title":"5.1.3 CLIENT_PING (0x04)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                       Client Timestamp                        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player identifier Client Timestamp 4 bytes Client timestamp (milliseconds) <p>Total Size: 8 bytes</p>"},{"location":"PROTOCOL/#514-server_accept-0x81","title":"5.1.4 SERVER_ACCEPT (0x81)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                      Assigned Player ID                       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Server Tick R |  Max Players  |           Map ID              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Assigned Player ID 4 bytes Unique player ID assigned by server Server Tick Rate 1 byte Server tick rate in Hz (typically 60) Max Players 1 byte Maximum players per game session Map ID 2 bytes Default map identifier <p>Total Size: 8 bytes</p>"},{"location":"PROTOCOL/#515-server_reject-0x82","title":"5.1.5 SERVER_REJECT (0x82)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Reason Code   |                                               |\n   +-+-+-+-+-+-+-+-+                                               +\n   |                    Reason Message (64 bytes)                  |\n   +                                                               +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Reason Code 1 byte Rejection reason code Reason Message 64 bytes UTF-8 human-readable message <p>Reason Codes: - <code>0x01</code>: SERVER_FULL - Server at maximum capacity - <code>0x02</code>: VERSION_MISMATCH - Client version incompatible - <code>0x03</code>: BANNED - Player is banned - <code>0x04</code>: MAINTENANCE - Server in maintenance mode</p> <p>Total Size: 65 bytes</p>"},{"location":"PROTOCOL/#516-server_pong-0x85","title":"5.1.6 SERVER_PONG (0x85)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                       Client Timestamp                        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                       Server Timestamp                        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Client Timestamp 4 bytes Echo of client timestamp from CLIENT_PING Server Timestamp 4 bytes Server timestamp (milliseconds) <p>Total Size: 8 bytes</p>"},{"location":"PROTOCOL/#52-lobby-matchmaking-payloads","title":"5.2 Lobby &amp; Matchmaking Payloads","text":""},{"location":"PROTOCOL/#521-client_join_lobby-0x05","title":"5.2.1 CLIENT_JOIN_LOBBY (0x05)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |   Game Mode   |  Difficulty   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player identifier Game Mode 1 byte Requested game mode Difficulty 1 byte Requested difficulty level <p>Game Mode Values: - <code>0x01</code>: DUO - 2 players - <code>0x02</code>: TRIO - 3 players - <code>0x03</code>: SQUAD - 4 players</p> <p>Difficulty Values: - <code>0x01</code>: EASY - <code>0x02</code>: NORMAL - <code>0x03</code>: HARD</p> <p>Total Size: 6 bytes</p>"},{"location":"PROTOCOL/#522-client_leave_lobby-0x06","title":"5.2.2 CLIENT_LEAVE_LOBBY (0x06)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Lobby ID                             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player identifier Lobby ID 4 bytes Lobby to leave <p>Total Size: 8 bytes</p>"},{"location":"PROTOCOL/#523-server_lobby_state-0x87","title":"5.2.3 SERVER_LOBBY_STATE (0x87)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Lobby ID                             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |   Game Mode   |  Difficulty   | Current Count | Required Count|\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                      Player Entry (38 bytes)                  |\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Lobby ID 4 bytes Unique lobby identifier Game Mode 1 byte Selected game mode (see 5.2.1) Difficulty 1 byte Selected difficulty (see 5.2.1) Current Player Count 1 byte Number of players currently in lobby Required Player Count 1 byte Players needed to start game Player Entries Variable Array of player information <p>Player Entry Format (39 bytes each):</p> Field Size Offset Description Player ID 4 bytes 0 Player identifier Player Name 32 bytes 4 Player name (UTF-8) Player Level 2 bytes 36 Player level (for display) Skin ID 1 byte 38 Player skin (0-14) <p>Total Size: 8 + (39 \u00d7 Current Player Count) bytes</p> <p>Example: For 3 players in a squad lobby: 8 + (39 \u00d7 3) = 125 bytes</p> <p>Skin ID Values (0-14): - Skins 0-4: Green ships (Scout, Fighter, Cruiser, Bomber, Carrier) - Skins 5-9: Red ships (Scout, Fighter, Cruiser, Bomber, Carrier) - Skins 10-14: Blue ships (Scout, Fighter, Cruiser, Bomber, Carrier)</p>"},{"location":"PROTOCOL/#524-server_game_start_countdown-0x88","title":"5.2.4 SERVER_GAME_START_COUNTDOWN (0x88)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Lobby ID                             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |Countdown Value|   Game Mode   |  Difficulty   |    Map ID     |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |    Map ID     |\n   +-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Lobby ID 4 bytes Lobby identifier Countdown Value 1 byte Seconds remaining (5, 4, 3, 2, 1) Game Mode 1 byte Game mode (see 5.2.1) Difficulty 1 byte Difficulty (see 5.2.1) Map ID 2 bytes Map to be loaded <p>Total Size: 9 bytes</p>"},{"location":"PROTOCOL/#525-server_countdown_cancelled-0x89","title":"5.2.5 SERVER_COUNTDOWN_CANCELLED (0x89)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Lobby ID                             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |    Reason     | New Plr Count |Required Count |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Lobby ID 4 bytes Lobby identifier Reason 1 byte Cancellation reason code New Player Count 1 byte Current player count after event Required Count 1 byte Players needed to restart countdown <p>Reason Codes: - <code>0x01</code>: PLAYER_LEFT - A player left during countdown - <code>0x02</code>: SERVER_ERROR - Server error occurred</p> <p>Total Size: 7 bytes</p>"},{"location":"PROTOCOL/#526-server_game_start-0x8a","title":"5.2.6 SERVER_GAME_START (0x8A)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                      Game Session ID                          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |   Game Mode   |  Difficulty   |                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +\n   |                        Server Tick                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                         Level Seed                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                   Player Spawn Data (12 bytes each)           |\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Game Session ID 4 bytes Unique session identifier Game Mode 1 byte Game mode (see 5.2.1) Difficulty 1 byte Difficulty (see 5.2.1) Server Tick 4 bytes Starting server tick Level Seed 4 bytes Random seed for procedural generation Spawn Data Array Variable Player spawn positions <p>Player Spawn Data Format (12 bytes each):</p> Field Size Offset Description Player ID 4 bytes 0 Player identifier Spawn X 4 bytes 4 X coordinate (IEEE 754 float) Spawn Y 4 bytes 8 Y coordinate (IEEE 754 float) <p>Total Size: 14 + (12 \u00d7 Player Count) bytes</p>"},{"location":"PROTOCOL/#53-custom-room-management-payloads","title":"5.3 Custom Room Management Payloads","text":""},{"location":"PROTOCOL/#531-client_create_room-0x20","title":"5.3.1 CLIENT_CREATE_ROOM (0x20)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                    Room Name (32 bytes)                       +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                 Password Hash (64 bytes, SHA-256)             +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |   Game Mode   |  Difficulty   |           Map ID              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player creating the room (becomes host) Room Name 32 bytes Optional room name (empty = auto-generated) Password Hash 64 bytes SHA-256 hash of password (empty = public room) Game Mode 1 byte Game mode (see 5.2.1) Difficulty 1 byte Difficulty level (see 5.2.1) Map ID 2 bytes Map identifier <p>Total Size: 104 bytes</p> <p>Security Note: Password is hashed client-side using SHA-256. Empty hash indicates public room.</p>"},{"location":"PROTOCOL/#532-client_join_room-0x21","title":"5.3.2 CLIENT_JOIN_ROOM (0x21)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Room ID                              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                 Password Hash (64 bytes, SHA-256)             +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player joining the room Room ID 4 bytes Target room identifier Password Hash 64 bytes SHA-256 hash of password (if private) <p>Total Size: 72 bytes</p>"},{"location":"PROTOCOL/#533-client_leave_room-0x22","title":"5.3.3 CLIENT_LEAVE_ROOM (0x22)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Room ID                              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player leaving the room Room ID 4 bytes Room to leave <p>Total Size: 8 bytes</p>"},{"location":"PROTOCOL/#534-client_request_room_list-0x23","title":"5.3.4 CLIENT_REQUEST_ROOM_LIST (0x23)","text":"<p>This packet has no payload. The header is sufficient.</p> <p>Total Size: 0 bytes (header only)</p>"},{"location":"PROTOCOL/#535-client_start_game-0x24","title":"5.3.5 CLIENT_START_GAME (0x24)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Room ID                              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player requesting start (must be host) Room ID 4 bytes Room to start <p>Total Size: 8 bytes</p> <p>Authorization: Only the room host can start the game. Server validates host status.</p>"},{"location":"PROTOCOL/#536-server_room_created-0x90","title":"5.3.6 SERVER_ROOM_CREATED (0x90)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Room ID                              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                    Room Name (32 bytes)                       +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Room ID 4 bytes Newly created room identifier Room Name 32 bytes Final room name (auto-generated or custom) <p>Total Size: 36 bytes</p> <p>Note: Room IDs for custom rooms start at 1000 to distinguish from matchmaking lobbies.</p>"},{"location":"PROTOCOL/#537-server_room_list-0x91","title":"5.3.7 SERVER_ROOM_LIST (0x91)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |         Room Count            |                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +\n   |                   Room Info Entry (44 bytes each)             |\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Room Count 2 bytes Number of rooms in list Room Entries Variable Array of room information <p>Room Info Entry Format (44 bytes each):</p> <pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Room ID                              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                    Room Name (32 bytes)                       +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |   Game Mode   |  Difficulty   |Current Players| Max Players   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |           Map ID              |    Status     |  Is Private   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Offset Description Room ID 4 bytes 0 Room identifier Room Name 32 bytes 4 Room name (UTF-8) Game Mode 1 byte 36 Game mode (see 5.2.1) Difficulty 1 byte 37 Difficulty (see 5.2.1) Current Players 1 byte 38 Number of players in room Max Players 1 byte 39 Maximum room capacity Map ID 2 bytes 40 Map identifier Status 1 byte 42 Room status code Is Private 1 byte 43 1 if password-protected, 0 if public <p>Room Status Codes: - <code>0x01</code>: WAITING - Room waiting for players - <code>0x02</code>: IN_PROGRESS - Game in progress - <code>0x03</code>: FINISHED - Game finished</p> <p>Total Size: 2 + (44 \u00d7 Room Count) bytes</p> <p>Note: Only rooms with status WAITING are typically included in the list.</p>"},{"location":"PROTOCOL/#538-server_room_joined-0x92","title":"5.3.8 SERVER_ROOM_JOINED (0x92)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Room ID                              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Room ID 4 bytes ID of room successfully joined <p>Total Size: 4 bytes</p>"},{"location":"PROTOCOL/#539-server_room_left-0x93","title":"5.3.9 SERVER_ROOM_LEFT (0x93)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Room ID                              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player who left Room ID 4 bytes Room that was left <p>Total Size: 8 bytes</p>"},{"location":"PROTOCOL/#5310-server_room_error-0x95","title":"5.3.10 SERVER_ROOM_ERROR (0x95)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Error Code   |                                               |\n   +-+-+-+-+-+-+-+-+                                               +\n   |                  Error Message (64 bytes)                     |\n   +                                                               +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Error Code 1 byte Room error code Error Message 64 bytes Human-readable error message (UTF-8) <p>Error Codes: - <code>0x01</code>: ROOM_NOT_FOUND - Specified room does not exist - <code>0x02</code>: ROOM_FULL - Room has reached maximum player capacity - <code>0x03</code>: WRONG_PASSWORD - Incorrect password for private room - <code>0x04</code>: ALREADY_STARTED - Room game already in progress - <code>0x05</code>: NOT_HOST - Operation requires host privileges - <code>0x06</code>: INVALID_CONFIGURATION - Invalid room settings - <code>0x07</code>: ALREADY_IN_ROOM - Player already in a lobby or room</p> <p>Total Size: 65 bytes</p>"},{"location":"PROTOCOL/#5311-client_set_player_name-0x25","title":"5.3.11 CLIENT_SET_PLAYER_NAME (0x25)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                    New Name (32 bytes)                        +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player changing their name New Name 32 bytes New player name (UTF-8, null-padded) <p>Total Size: 36 bytes</p>"},{"location":"PROTOCOL/#5312-client_set_player_skin-0x26","title":"5.3.12 CLIENT_SET_PLAYER_SKIN (0x26)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |   Skin ID     |\n   +-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player changing their skin Skin ID 1 byte New skin ID (0-14) <p>Skin ID Values: See SERVER_LOBBY_STATE Player Entry Format.</p> <p>Total Size: 5 bytes</p>"},{"location":"PROTOCOL/#5313-server_player_name_updated-0x96","title":"5.3.13 SERVER_PLAYER_NAME_UPDATED (0x96)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                    New Name (32 bytes)                        +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Room ID                              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player who changed name New Name 32 bytes Updated player name (UTF-8) Room ID 4 bytes Room where change occurred <p>Total Size: 40 bytes</p> <p>Note: Broadcast to all players in the room when a player changes their name.</p>"},{"location":"PROTOCOL/#5314-server_player_skin_updated-0x97","title":"5.3.14 SERVER_PLAYER_SKIN_UPDATED (0x97)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |   Skin ID     |                                               |\n   +-+-+-+-+-+-+-+-+                                               +\n   |                          Room ID                              |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player who changed skin Skin ID 1 byte New skin ID (0-14) Room ID 4 bytes Room where change occurred <p>Total Size: 9 bytes</p> <p>Note: Broadcast to all players in the room when a player changes their skin.</p>"},{"location":"PROTOCOL/#54-player-input-payloads","title":"5.4 Player Input Payloads","text":""},{"location":"PROTOCOL/#541-client_input-0x10","title":"5.4.1 CLIENT_INPUT (0x10)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |         Input Flags           |                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +\n   |                       Client Tick                             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player identifier Input Flags 2 bytes Bitfield of pressed inputs Client Tick 4 bytes Client tick number (for prediction) <p>Input Flags Bitfield: - Bit 0: UP - Move up - Bit 1: DOWN - Move down - Bit 2: LEFT - Move left - Bit 3: RIGHT - Move right - Bit 4: SHOOT - Fire weapon - Bit 5: CHARGE - Charge weapon (hold) - Bit 6: SPECIAL - Special ability - Bits 7-15: Reserved (MUST be 0)</p> <p>Total Size: 10 bytes</p> <p>Frequency: Clients SHOULD send CLIENT_INPUT at the game frame rate (typically 60 Hz).</p>"},{"location":"PROTOCOL/#54-world-state-payloads","title":"5.4 World State Payloads","text":""},{"location":"PROTOCOL/#541-server_snapshot-0xa0","title":"5.4.1 SERVER_SNAPSHOT (0xA0)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                         Server Tick                           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |       Entity Count            |                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +\n   |                   Entity State Array (25 bytes each)          |\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Server Tick 4 bytes Current server tick number Entity Count 2 bytes Number of entities in snapshot Entity States Variable Array of entity states <p>Entity State Format (25 bytes each):</p> <pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Entity ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Entity Type   |                Position X (float)             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Position X    |           Position Y (float)                  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Position Y    |    Velocity X (int16)     |  Velocity Y       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Velocity Y   |         Health            |      Flags        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |     Flags     |              Last Ack Sequence                |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Last Ack Seq  |\n   +-+-+-+-+-+-+-+-+\n</code></pre> Field Size Offset Description Entity ID 4 bytes 0 Unique entity identifier Entity Type 1 byte 4 Entity type code Position X 4 bytes 5 X position (IEEE 754 float) Position Y 4 bytes 9 Y position (IEEE 754 float) Velocity X 2 bytes 13 X velocity (int16, scaled by 10) Velocity Y 2 bytes 15 Y velocity (int16, scaled by 10) Health 2 bytes 17 Current health points Flags 2 bytes 19 Entity state flags bitfield Last Ack Seq 4 bytes 21 Last processed input sequence (for lag compensation, 0 for non-player entities) <p>Entity Type Codes: - <code>0x01</code>: PLAYER - <code>0x02</code>: ENEMY_BASIC - <code>0x03</code>: ENEMY_ELITE - <code>0x04</code>: ENEMY_BOSS - <code>0x05</code>: PROJECTILE_PLAYER - <code>0x06</code>: PROJECTILE_ENEMY - <code>0x07</code>: POWERUP_WEAPON - <code>0x08</code>: POWERUP_SHIELD - <code>0x09</code>: POWERUP_SCORE - <code>0x0A</code>: ENEMY_FAST - <code>0x0B</code>: ENEMY_TANK - <code>0x0C</code>: POWERUP_HEALTH - <code>0x0D</code>: POWERUP_SPEED</p> <p>Entity State Flags: - Bit 0: INVULNERABLE - Bit 1: CHARGING - Bit 2: DAMAGED (visual feedback) - Bits 3-15: Reserved</p> <p>Total Size: 6 + (25 \u00d7 Entity Count) bytes</p> <p>Maximum Entities: With 1387 byte payload limit: (1387 - 6) / 25 = 55 entities per snapshot</p> <p>Entity Priority: When the number of entities exceeds the maximum, servers MUST prioritize entities in the following order: 1. PLAYER entities (highest priority) - MUST always be included 2. PROJECTILE_PLAYER and PROJECTILE_ENEMY entities (high priority) - SHOULD be included for accurate gameplay 3. ENEMY_ entities (medium priority) - SHOULD be included 4. WALL* entities (lowest priority) - MAY be excluded as they scroll predictably</p> <p>Rationale: Wall entities scroll at a constant speed and are spawned via SERVER_ENTITY_SPAWN. Clients can predict their positions locally, making them unnecessary in state snapshots. This optimization ensures that critical gameplay entities (players, projectiles, enemies) are always synchronized.</p> <p>Frequency: Servers SHOULD send snapshots at 20-30 Hz to conserve bandwidth.</p>"},{"location":"PROTOCOL/#55-entity-event-payloads","title":"5.5 Entity Event Payloads","text":""},{"location":"PROTOCOL/#551-server_entity_spawn-0xb0","title":"5.5.1 SERVER_ENTITY_SPAWN (0xB0)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Entity ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Entity Type   |              Spawn X (float)                  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Spawn X      |              Spawn Y (float)                  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Spawn Y      |   Subtype     |            Health             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Entity ID 4 bytes Unique entity identifier Entity Type 1 byte Entity type code (see 5.4.1) Spawn X 4 bytes X spawn position (IEEE 754 float) Spawn Y 4 bytes Y spawn position (IEEE 754 float) Subtype 1 byte Entity subtype (0=Basic, 1=Fast, 2=Tank, 3=Boss) Health 2 bytes Initial health points <p>Enemy Subtype Codes: - <code>0x00</code>: BASIC - Standard enemy - <code>0x01</code>: FAST - Fast-moving enemy - <code>0x02</code>: TANK - High-health enemy - <code>0x03</code>: BOSS - Boss enemy</p> <p>Player Entity Subtype Encoding:</p> <p>For PLAYER entities, the subtype byte encodes both player_id and skin_id: - High 4 bits (bits 4-7): <code>player_id &amp; 0x0F</code> (player identification) - Low 4 bits (bits 0-3): <code>skin_id &amp; 0x0F</code> (skin selection, 0-14)</p> <pre><code>Subtype byte: [player_id:4][skin_id:4]\nExample: Player 2 with skin 7 \u2192 subtype = (2 &lt;&lt; 4) | 7 = 0x27\n</code></pre> <p>This allows clients to: 1. Identify which entity is the local player (by matching player_id) 2. Select the correct ship sprite (by extracting skin_id)</p> <p>Total Size: 16 bytes</p>"},{"location":"PROTOCOL/#552-server_entity_destroy-0xb1","title":"5.5.2 SERVER_ENTITY_DESTROY (0xB1)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Entity ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |    Reason     |            Position X (float)                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Position X    |            Position Y (float)                 |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Position Y    |\n   +-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Entity ID 4 bytes Entity identifier Reason 1 byte Destruction reason code Position X 4 bytes Final X position for effects (float) Position Y 4 bytes Final Y position for effects (float) <p>Reason Codes: - <code>0x01</code>: KILLED - Destroyed by damage - <code>0x02</code>: OUT_OF_BOUNDS - Left playable area - <code>0x03</code>: COLLECTED - Power-up collected by player - <code>0x04</code>: TIMEOUT - Timed entity expired</p> <p>Total Size: 13 bytes</p>"},{"location":"PROTOCOL/#553-server_projectile_spawn-0xb3","title":"5.5.3 SERVER_PROJECTILE_SPAWN (0xB3)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                        Projectile ID                          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Owner ID                             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |Projectile Type|            Spawn X (float)                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Spawn X      |            Spawn Y (float)                    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Spawn Y      |   Velocity X (int16)      |  Velocity Y       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Velocity Y   |\n   +-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Projectile ID 4 bytes Unique projectile identifier Owner ID 4 bytes Entity that fired the projectile Projectile Type 1 byte Projectile type code Spawn X 4 bytes X spawn position (IEEE 754 float) Spawn Y 4 bytes Y spawn position (IEEE 754 float) Velocity X 2 bytes X velocity (int16, scaled by 100) Velocity Y 2 bytes Y velocity (int16, scaled by 100) <p>Projectile Type Codes: - <code>0x01</code>: BULLET - Standard projectile - <code>0x02</code>: MISSILE - Homing missile - <code>0x03</code>: LASER - Laser beam - <code>0x04</code>: CHARGE_SHOT - Charged weapon shot</p> <p>Total Size: 21 bytes</p> <p>Rationale: This packet enables instant client-side visual feedback for shooting without waiting for the next snapshot.</p>"},{"location":"PROTOCOL/#56-game-mechanics-payloads","title":"5.6 Game Mechanics Payloads","text":""},{"location":"PROTOCOL/#561-server_powerup_collected-0xc0","title":"5.6.1 SERVER_POWERUP_COLLECTED (0xC0)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Powerup Type  |New Weapon Lvl |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player who collected the power-up Powerup Type 1 byte Power-up type code New Weapon Level 1 byte Updated weapon level (0-255) <p>Powerup Type Codes: - <code>0x01</code>: WEAPON_UPGRADE - Weapon level increase - <code>0x02</code>: SHIELD - Shield/invulnerability - <code>0x03</code>: SPEED - Movement speed boost - <code>0x04</code>: SCORE - Score bonus - <code>0x05</code>: HEALTH - Health restoration (+20 HP)</p> <p>Total Size: 6 bytes</p>"},{"location":"PROTOCOL/#562-server_score_update-0xc1","title":"5.6.2 SERVER_SCORE_UPDATE (0xC1)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                         Score Delta                           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                       New Total Score                         |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |Combo Multiplier|\n   +-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player identifier Score Delta 4 bytes Points gained (signed int32) New Total Score 4 bytes Updated total score Combo Multiplier 1 byte Current combo multiplier (1-255) <p>Total Size: 13 bytes</p>"},{"location":"PROTOCOL/#563-server_wave_start-0xc2","title":"5.6.3 SERVER_WAVE_START (0xC2)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                         Wave Number                           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |         Total Waves           |      Scroll Distance (float)  |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Scroll Distance               |      Expected Enemies         |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                    Wave Name (32 bytes)                       +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Wave Number 4 bytes Current wave number (from JSON config) Total Waves 2 bytes Total number of waves in configuration Scroll Distance 4 bytes Scroll distance at which wave triggered (float) Expected Enemies 2 bytes Number of enemies that will spawn this wave Wave Name 32 bytes Optional wave name/description (UTF-8) <p>Total Size: 44 bytes</p> <p>Rationale: This packet notifies clients when a new wave begins, allowing them to display wave progress UI and prepare for incoming enemies. The scroll distance enables deterministic wave triggering validation.</p>"},{"location":"PROTOCOL/#564-server_wave_complete-0xc3","title":"5.6.4 SERVER_WAVE_COMPLETE (0xC3)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                         Wave Number                           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                      Completion Time                          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |       Enemies Killed          |         Bonus Points          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |All Waves Done |\n   +-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Wave Number 4 bytes Completed wave number Completion Time 4 bytes Time taken to complete wave (milliseconds) Enemies Killed 2 bytes Number of enemies destroyed in this wave Bonus Points 2 bytes Bonus points awarded for wave completion All Waves Complete 1 byte 1 if this was the final wave, 0 otherwise <p>Total Size: 13 bytes</p> <p>Rationale: Notifies clients of wave completion, allowing them to display completion statistics, award bonus points, and potentially trigger victory conditions if all waves are complete.</p>"},{"location":"PROTOCOL/#565-server_player_level_up-0xc4","title":"5.6.5 SERVER_PLAYER_LEVEL_UP (0xC4)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Entity ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | New Level     |New Ship Type  |New Weapon Type| New Skin ID   |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                        Current Score                          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Network player identifier Entity ID 4 bytes Server-side entity identifier New Level 1 byte New player level (1-5) New Ship Type 1 byte New ship type (0=SCOUT, 1=FIGHTER, 2=CRUISER, 3=BOMBER, 4=CARRIER) New Weapon Type 1 byte New weapon type (0=BASIC, 1=SPREAD, 2=BURST, 3=LASER, 4=CHARGE) New Skin ID 1 byte Computed skin_id (color * 5 + ship_type) Current Score 4 bytes Player's current score after level up <p>Total Size: 16 bytes</p> <p>Level Thresholds: | Level | Score Required | Ship Type | Weapon Type | |-------|----------------|-----------|-------------| | 1     | 0              | SCOUT     | BASIC       | | 2     | 2000           | FIGHTER   | SPREAD      | | 3     | 5000           | CRUISER   | BURST       | | 4     | 10000          | BOMBER    | LASER       | | 5     | 20000          | CARRIER   | CHARGE      |</p> <p>Rationale: Notifies all clients when a player reaches a new level based on their score. The client uses this information to update the player's sprite, hitbox dimensions, and weapon type. The skin_id allows clients to select the correct sprite variant based on the player's chosen color and new ship type.</p>"},{"location":"PROTOCOL/#566-server_player_respawn-0xc5","title":"5.6.6 SERVER_PLAYER_RESPAWN (0xC5)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Player ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                      Respawn X (float)                        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                      Respawn Y (float)                        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Invuln Duration (ms)         |Lives Remaining|\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Player ID 4 bytes Player identifier Respawn X 4 bytes X respawn position (float) Respawn Y 4 bytes Y respawn position (float) Invulnerability Duration 2 bytes Invulnerability time (milliseconds) Lives Remaining 1 byte Remaining lives (0 = game over) <p>Total Size: 15 bytes</p>"},{"location":"PROTOCOL/#567-server_game_over-0xc6","title":"5.6.7 SERVER_GAME_OVER (0xC6)","text":"<pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |    Result     |                                               |\n   +-+-+-+-+-+-+-+-+                                               +\n   |                  Final Score Entry (12 bytes each)            |\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                      Total Time (seconds)                     |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                        Enemies Killed                         |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Result 1 byte Game result code Score Entries Variable Array of player scores (max 4) Total Time 4 bytes Total game time in seconds Enemies Killed 4 bytes Total enemies killed by team <p>Result Codes: - <code>0x01</code>: VICTORY - Players won - <code>0x02</code>: DEFEAT - All players died - <code>0x03</code>: TIMEOUT - Time limit reached</p> <p>Score Entry Format (12 bytes each):</p> Field Size Offset Description Player ID 4 bytes 0 Player identifier Final Score 4 bytes 4 Player's final score Deaths 2 bytes 8 Number of deaths Kills 2 bytes 10 Enemies killed <p>Total Size: 9 + (12 \u00d7 Player Count) bytes</p>"},{"location":"PROTOCOL/#568-server_leaderboard-0xc7","title":"5.6.8 SERVER_LEADERBOARD (0xC7)","text":"<p>Sent before game over to provide complete leaderboard with all player scores sorted by rank.</p> <pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   | Entry Count   |   Is Final    |                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +\n   |                  Leaderboard Entry (48 bytes each)            |\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Entry Count 1 byte Number of leaderboard entries (max 255) Is Final 1 byte 1 if game is over, 0 for in-game update Entries Variable Array of LeaderboardEntry structures <p>Leaderboard Entry Format (48 bytes each):</p> Field Size Offset Description Player ID 4 bytes 0 Player identifier (network order) Player Name 32 bytes 4 Player name (null-terminated) Score 4 bytes 36 Player score (network order) Kills 2 bytes 40 Number of kills Deaths 2 bytes 42 Number of deaths Rank 1 byte 44 Player rank (1 = first place) Padding 3 bytes 45 Reserved for alignment <p>Total Size: 2 + (48 \u00d7 Entry Count) bytes</p>"},{"location":"PROTOCOL/#57-admin-system-payloads","title":"5.7 Admin System Payloads","text":""},{"location":"PROTOCOL/#571-client_admin_auth-0x30","title":"5.7.1 CLIENT_ADMIN_AUTH (0x30)","text":"<p>Admin authentication request with hashed password.</p> <pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                          Client ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                     Password Hash (64 bytes)                 +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                       Username (32 bytes)                    +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Client ID 4 bytes Client identifier Password Hash 64 bytes Hexadecimal string of hashed password Username 32 bytes Admin username (null-terminated) <p>Total Size: 100 bytes</p>"},{"location":"PROTOCOL/#572-client_admin_command-0x31","title":"5.7.2 CLIENT_ADMIN_COMMAND (0x31)","text":"<p>Execute an admin command on the server.</p> <pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                           Admin ID                            |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                       Command (128 bytes)                    +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Admin ID 4 bytes Authenticated admin ID Command 128 bytes Command string (null-terminated) <p>Total Size: 132 bytes</p> <p>Available Commands:</p> <p>Tier 1 - Basic Commands: - <code>help</code> - Show available commands - <code>list</code> - List connected players with IDs and session info - <code>kick &lt;player_id&gt; [reason]</code> - Kick a player from the server - <code>info</code> - Display server statistics (uptime, connections, sessions)</p> <p>Tier 2 - Game Control Commands: - <code>pause</code> - Pause all active game sessions (freezes game logic) - <code>resume</code> - Resume all paused game sessions - <code>clearenemies [session_id]</code> - Clear enemies from all sessions or specific session</p>"},{"location":"PROTOCOL/#573-server_admin_auth_result-0xf0","title":"5.7.3 SERVER_ADMIN_AUTH_RESULT (0xF0)","text":"<p>Result of admin authentication attempt.</p> <pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |   Success     |                                               |\n   +-+-+-+-+-+-+-+-+                                               +\n   |                         Admin Level                           |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                   Failure Reason (128 bytes)                 +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Success 1 byte 1 = authenticated, 0 = failed Admin Level 4 bytes Admin privilege level (if success=1) Failure Reason 128 bytes Error message (if success=0) <p>Total Size: 133 bytes</p>"},{"location":"PROTOCOL/#574-server_admin_command_result-0xf1","title":"5.7.4 SERVER_ADMIN_COMMAND_RESULT (0xF1)","text":"<p>Result of admin command execution.</p> <pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |   Success     |                                               |\n   +-+-+-+-+-+-+-+-+                                               +\n   |                                                               |\n   +                      Message (256 bytes)                     +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Success 1 byte 1 = success, 0 = failed Message 256 bytes Result or error message (null-terminated) <p>Total Size: 257 bytes</p>"},{"location":"PROTOCOL/#575-server_admin_notification-0xf2","title":"5.7.5 SERVER_ADMIN_NOTIFICATION (0xF2)","text":"<p>Server-wide notification broadcast from admin.</p> <pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                      Message (256 bytes)                     +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Message 256 bytes Notification message (null-terminated) <p>Total Size: 256 bytes</p>"},{"location":"PROTOCOL/#576-server_kick_notification-0xf3","title":"5.7.6 SERVER_KICK_NOTIFICATION (0xF3)","text":"<p>Notification sent to a player who is being kicked.</p> <pre><code>    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                                                               |\n   +                       Reason (128 bytes)                     +\n   |                             ...                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> Field Size Description Reason 128 bytes Kick reason message (null-terminated) <p>Total Size: 128 bytes</p>"},{"location":"PROTOCOL/#6-communication-patterns","title":"6. Communication Patterns","text":""},{"location":"PROTOCOL/#61-connection-establishment","title":"6.1 Connection Establishment","text":"<pre><code>Client                                Server\n  |                                     |\n  |------- CLIENT_CONNECT (0x01) -----&gt;|\n  |                                     | (Validate version, capacity)\n  |                                     |\n  |&lt;------ SERVER_ACCEPT (0x81) -------|  (if accepted)\n  |        or SERVER_REJECT (0x82)     |  (if rejected)\n  |                                     |\n</code></pre> <p>Upon successful connection: 1. Client sends CLIENT_CONNECT with player name and version 2. Server validates the request and responds with SERVER_ACCEPT (assigning player ID) or SERVER_REJECT 3. Client enters lobby selection state</p>"},{"location":"PROTOCOL/#62-lobby-and-matchmaking","title":"6.2 Lobby and Matchmaking","text":"<pre><code>Client                                Server\n  |                                     |\n  |---- CLIENT_JOIN_LOBBY (0x05) -----&gt;|\n  |      (mode=SQUAD, diff=HARD)       |\n  |                                     | (Find/create lobby)\n  |                                     |\n  |&lt;--- SERVER_LOBBY_STATE (0x87) -----|\n  |         (1/4 players)               |\n  |                                     |\n  |         [Wait for more players...]  |\n  |                                     |\n  |&lt;--- SERVER_LOBBY_STATE (0x87) -----|\n  |         (4/4 players)               |\n  |                                     |\n  |&lt;- SERVER_GAME_START_COUNTDOWN ----|\n  |         (5 seconds)                 |\n  |         ... (4) ... (3) ...         |\n  |                                     |\n  |&lt;--- SERVER_GAME_START (0x8A) ------|\n  |                                     |\n</code></pre> <p>Matchmaking flow: 1. Client selects game mode and difficulty, sends CLIENT_JOIN_LOBBY 2. Server finds an existing compatible lobby or creates a new one 3. Server broadcasts SERVER_LOBBY_STATE to all players in the lobby whenever a player joins/leaves 4. When the lobby reaches the required player count, server initiates countdown 5. Server sends SERVER_GAME_START_COUNTDOWN every second (5, 4, 3, 2, 1) 6. If a player leaves during countdown, server sends SERVER_COUNTDOWN_CANCELLED 7. After countdown completes, server sends SERVER_GAME_START and transitions to gameplay</p>"},{"location":"PROTOCOL/#63-gameplay-loop","title":"6.3 Gameplay Loop","text":"<pre><code>Client                                Server\n  |                                     |\n  |---- CLIENT_INPUT (0x10) ---------&gt;| (60 Hz)\n  |---- CLIENT_INPUT (0x10) ---------&gt;|\n  |---- CLIENT_INPUT (0x10) ---------&gt;|\n  |                                     |\n  |&lt;--- SERVER_SNAPSHOT (0xA0) --------|  (20-30 Hz)\n  |                                     |\n  |&lt;- SERVER_PROJECTILE_SPAWN (0xB3)---|  (event-driven)\n  |&lt;- SERVER_ENTITY_DESTROY (0xB1) ----|  (event-driven)\n  |&lt;- SERVER_SCORE_UPDATE (0xC1) ------|  (event-driven)\n  |                                     |\n</code></pre> <p>Gameplay communication: 1. Client sends inputs at 60 Hz: CLIENT_INPUT packets with current input state 2. Server processes inputs: Server simulation runs at server tick rate (60 Hz) 3. Server sends snapshots at 20-30 Hz: Complete world state via SERVER_SNAPSHOT 4. Server sends critical events immediately: Spawns, destructions, scoring, etc.</p> <p>Client-side prediction: Clients MAY predict local player movement using CLIENT_INPUT and reconcile with SERVER_SNAPSHOT.</p> <p>Interpolation: Clients SHOULD interpolate entity positions between snapshots for smooth rendering.</p>"},{"location":"PROTOCOL/#64-keepalive-and-latency-measurement","title":"6.4 Keepalive and Latency Measurement","text":"<pre><code>Client                                Server\n  |                                     |\n  |------ CLIENT_PING (0x04) ---------&gt;|  (every 1-2 seconds)\n  |        (client_timestamp)           |\n  |                                     |\n  |&lt;----- SERVER_PONG (0x85) -----------|\n  |   (echo client_timestamp + server_timestamp)\n  |                                     |\n</code></pre> <p>Clients SHOULD send CLIENT_PING every 1-2 seconds to: - Maintain connection (prevent server timeout) - Measure round-trip time (RTT) - Detect connection quality issues</p> <p>RTT calculation: <code>RTT = current_time - client_timestamp</code> (from echoed value)</p>"},{"location":"PROTOCOL/#65-disconnection","title":"6.5 Disconnection","text":"<p>Graceful disconnection: <pre><code>Client                                Server\n  |                                     |\n  |--- CLIENT_DISCONNECT (0x02) ------&gt;|\n  |                                     |\n  |&lt;-- SERVER_PLAYER_LEFT (0x84) ------|  (broadcast to others)\n  |                                     |\n</code></pre></p> <p>Timeout disconnection: - If server doesn't receive any packet from client for 10 seconds, server SHOULD disconnect the client - Server broadcasts SERVER_PLAYER_LEFT to remaining players</p>"},{"location":"PROTOCOL/#7-error-handling","title":"7. Error Handling","text":""},{"location":"PROTOCOL/#71-version-mismatch","title":"7.1 Version Mismatch","text":"<ul> <li>Receivers MUST silently drop packets with unknown protocol versions</li> <li>Servers SHOULD respond to CLIENT_CONNECT with version mismatch using SERVER_REJECT (reason code 0x02)</li> </ul>"},{"location":"PROTOCOL/#72-packet-size-violations","title":"7.2 Packet Size Violations","text":"<ul> <li>Senders MUST NOT send packets exceeding 1400 bytes total size</li> <li>Receivers MAY drop packets exceeding the maximum size</li> <li>Implementations SHOULD log oversized packet attempts for debugging</li> </ul>"},{"location":"PROTOCOL/#73-invalid-payload-data","title":"7.3 Invalid Payload Data","text":"<ul> <li>Receivers MUST validate all numeric fields for reasonable ranges</li> <li>String fields MUST be checked for null-termination</li> <li>Invalid packets SHOULD be silently dropped (do not crash)</li> </ul>"},{"location":"PROTOCOL/#74-sequence-number-handling","title":"7.4 Sequence Number Handling","text":"<ul> <li>Receivers SHOULD track sequence numbers to detect packet loss</li> <li>Out-of-order packets MAY be processed or dropped based on packet type</li> <li>Duplicate packets (same sequence number) SHOULD be dropped</li> </ul>"},{"location":"PROTOCOL/#75-connection-timeout","title":"7.5 Connection Timeout","text":"<ul> <li>Clients not sending packets for 10 seconds SHOULD be disconnected</li> <li>Servers not responding for 10 seconds SHOULD trigger client reconnection attempt</li> </ul>"},{"location":"PROTOCOL/#8-security-considerations","title":"8. Security Considerations","text":""},{"location":"PROTOCOL/#81-denial-of-service","title":"8.1 Denial of Service","text":"<ul> <li>Servers SHOULD implement rate limiting per source IP address</li> <li>Servers SHOULD validate all packet sizes before processing</li> <li>Servers SHOULD limit the number of concurrent connections per IP</li> </ul>"},{"location":"PROTOCOL/#82-data-validation","title":"8.2 Data Validation","text":"<ul> <li>All numeric fields MUST be validated for reasonable ranges</li> <li>String fields MUST be validated for proper encoding and length</li> <li>Player names SHOULD be sanitized to prevent injection attacks</li> </ul>"},{"location":"PROTOCOL/#83-replay-attacks","title":"8.3 Replay Attacks","text":"<ul> <li>Servers MAY use sequence numbers to detect and reject replayed packets</li> <li>Servers SHOULD maintain a sliding window of recent sequence numbers</li> </ul>"},{"location":"PROTOCOL/#84-cheating-prevention","title":"8.4 Cheating Prevention","text":"<ul> <li>Server is authoritative for all game state</li> <li>Client predictions are reconciled against server state</li> <li>Servers SHOULD validate input feasibility (e.g., movement speed)</li> <li>Servers SHOULD implement server-side hit detection</li> </ul>"},{"location":"PROTOCOL/#9-implementation-notes","title":"9. Implementation Notes","text":""},{"location":"PROTOCOL/#91-byte-order","title":"9.1 Byte Order","text":"<ul> <li>All multi-byte integers are in network byte order (big-endian)</li> <li>Use <code>htons()</code>, <code>htonl()</code>, <code>ntohs()</code>, <code>ntohl()</code> for conversions on little-endian systems</li> <li>Floating-point values use IEEE 754 single precision format</li> </ul>"},{"location":"PROTOCOL/#92-structure-packing","title":"9.2 Structure Packing","text":"<p>All C/C++ protocol structures MUST use <code>__attribute__((packed))</code> or equivalent to prevent compiler padding:</p> <pre><code>struct __attribute__((packed)) PacketHeader {\n    uint8_t version;\n    uint8_t type;\n    uint16_t payload_length;\n    uint32_t sequence_number;\n};\n</code></pre>"},{"location":"PROTOCOL/#93-encoding-and-decoding","title":"9.3 Encoding and Decoding","text":"<p>Implementations SHOULD provide encoder/decoder functions that: - Validate packet sizes before encoding - Perform byte order conversions automatically - Return errors for invalid data</p>"},{"location":"PROTOCOL/#94-memory-management","title":"9.4 Memory Management","text":"<ul> <li>Packet buffers SHOULD be reused to minimize allocation overhead</li> <li>Fixed-size buffers of 1400 bytes are RECOMMENDED for packet reception</li> </ul>"},{"location":"PROTOCOL/#95-performance-optimization","title":"9.5 Performance Optimization","text":"<p>Snapshot compression: - Implement delta compression (SERVER_DELTA_SNAPSHOT) for reduced bandwidth - Only send changed entities between snapshots</p> <p>Input batching: - Clients MAY batch multiple inputs into a single packet if tick rate allows</p> <p>Priority system: - Critical packets (inputs, spawns) SHOULD be sent with higher priority - Non-critical packets (chat) MAY be delayed under congestion</p>"},{"location":"PROTOCOL/#10-references","title":"10. References","text":"<ul> <li>RFC 768: User Datagram Protocol</li> <li>RFC 2119: Key words for use in RFCs to Indicate Requirement Levels</li> <li>IEEE 754: IEEE Standard for Floating-Point Arithmetic</li> </ul>"},{"location":"PROTOCOL/#appendix-a-packet-type-quick-reference","title":"Appendix A: Packet Type Quick Reference","text":"ID Name C\u2192S S\u2192C Frequency 0x01 CLIENT_CONNECT \u2713 Once 0x02 CLIENT_DISCONNECT \u2713 Once 0x04 CLIENT_PING \u2713 1-2 Hz 0x05 CLIENT_JOIN_LOBBY \u2713 Once 0x06 CLIENT_LEAVE_LOBBY \u2713 Once 0x10 CLIENT_INPUT \u2713 60 Hz 0x20 CLIENT_CREATE_ROOM \u2713 Once 0x21 CLIENT_JOIN_ROOM \u2713 Once 0x22 CLIENT_LEAVE_ROOM \u2713 Once 0x23 CLIENT_REQUEST_ROOM_LIST \u2713 On demand 0x24 CLIENT_START_GAME \u2713 Once 0x25 CLIENT_SET_PLAYER_NAME \u2713 On demand 0x26 CLIENT_SET_PLAYER_SKIN \u2713 On demand 0x81 SERVER_ACCEPT \u2713 Once 0x82 SERVER_REJECT \u2713 Once 0x83 SERVER_PLAYER_JOINED \u2713 Event 0x84 SERVER_PLAYER_LEFT \u2713 Event 0x85 SERVER_PONG \u2713 1-2 Hz 0x87 SERVER_LOBBY_STATE \u2713 Event 0x88 SERVER_GAME_START_COUNTDOWN \u2713 1 Hz 0x89 SERVER_COUNTDOWN_CANCELLED \u2713 Event 0x8A SERVER_GAME_START \u2713 Once 0x90 SERVER_ROOM_CREATED \u2713 Once 0x91 SERVER_ROOM_LIST \u2713 On demand 0x92 SERVER_ROOM_JOINED \u2713 Once 0x93 SERVER_ROOM_LEFT \u2713 Event 0x94 SERVER_ROOM_STATE_UPDATE \u2713 Event 0x95 SERVER_ROOM_ERROR \u2713 Event 0x96 SERVER_PLAYER_NAME_UPDATED \u2713 Event 0x97 SERVER_PLAYER_SKIN_UPDATED \u2713 Event 0xA0 SERVER_SNAPSHOT \u2713 20-30 Hz 0xB0 SERVER_ENTITY_SPAWN \u2713 Event 0xB1 SERVER_ENTITY_DESTROY \u2713 Event 0xB3 SERVER_PROJECTILE_SPAWN \u2713 High freq 0xC0 SERVER_POWERUP_COLLECTED \u2713 Event 0xC1 SERVER_SCORE_UPDATE \u2713 Event 0xC2 SERVER_WAVE_START \u2713 Event 0xC3 SERVER_WAVE_COMPLETE \u2713 Event 0xC4 SERVER_PLAYER_LEVEL_UP \u2713 Event 0xC5 SERVER_PLAYER_RESPAWN \u2713 Event 0xC6 SERVER_GAME_OVER \u2713 Once 0xC7 SERVER_LEADERBOARD \u2713 Once"},{"location":"PROTOCOL/#appendix-b-example-packet-hex-dumps","title":"Appendix B: Example Packet Hex Dumps","text":""},{"location":"PROTOCOL/#b1-client_connect-example","title":"B.1 CLIENT_CONNECT Example","text":"<p>Scenario: Player \"Alice\" connects with client version 1</p> <pre><code>Header:\n  Version: 0x01\n  Type: 0x01 (CLIENT_CONNECT)\n  Payload Length: 0x0021 (33 bytes)\n  Sequence: 0x00000001\n\nPayload:\n  Client Version: 0x01\n  Player Name: \"Alice\" (null-padded to 32 bytes)\n</code></pre> <p>Hex Dump: <pre><code>01 01 00 21 00 00 00 01  01 41 6C 69 63 65 00 00\n00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00  00\n</code></pre></p>"},{"location":"PROTOCOL/#b2-client_input-example","title":"B.2 CLIENT_INPUT Example","text":"<p>Scenario: Player 42 presses UP + SHOOT (bits 0 and 4 set) at tick 1000</p> <pre><code>Header:\n  Version: 0x01\n  Type: 0x10 (CLIENT_INPUT)\n  Payload Length: 0x000A (10 bytes)\n  Sequence: 0x00000064 (100)\n\nPayload:\n  Player ID: 0x0000002A (42)\n  Input Flags: 0x0011 (UP=bit0, SHOOT=bit4)\n  Client Tick: 0x000003E8 (1000)\n</code></pre> <p>Hex Dump: <pre><code>01 10 00 0A 00 00 00 64  00 00 00 2A 00 11 00 00\n03 E8\n</code></pre></p>"},{"location":"PROTOCOL/#b3-server_game_start-example","title":"B.3 SERVER_GAME_START Example","text":"<p>Scenario: Squad game starts with 4 players on HARD difficulty</p> <pre><code>Header:\n  Version: 0x01\n  Type: 0x8A (SERVER_GAME_START)\n  Payload Length: 0x003E (62 bytes)\n  Sequence: 0x00000001\n\nPayload:\n  Game Session ID: 0x12345678\n  Game Mode: 0x03 (SQUAD)\n  Difficulty: 0x03 (HARD)\n  Server Tick: 0x00000000\n  Level Seed: 0xABCDEF12\n\n  Player 1 Spawn:\n    Player ID: 0x0000002A (42)\n    Spawn X: 100.0 (0x42C80000)\n    Spawn Y: 200.0 (0x43480000)\n\n  Player 2 Spawn:\n    Player ID: 0x0000002B\n    Spawn X: 100.0\n    Spawn Y: 250.0 (0x43790000)\n\n  [... 2 more players ...]\n</code></pre> <p>Hex Dump (partial): <pre><code>01 8A 00 3E 00 00 00 01  12 34 56 78 03 03 00 00\n00 00 AB CD EF 12 00 00  00 2A 42 C8 00 00 43 48\n00 00 00 00 00 2B 42 C8  00 00 43 79 00 00 ...\n</code></pre></p>"},{"location":"PROTOCOL/#appendix-c-state-machine-diagrams","title":"Appendix C: State Machine Diagrams","text":""},{"location":"PROTOCOL/#c1-client-state-machine","title":"C.1 Client State Machine","text":"<pre><code>     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502DISCONNECTED \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502 CLIENT_CONNECT\n            \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502  CONNECTED  \u2502\u25c4\u2500\u2500\u2500\u2500\u2510\n     \u2502   (Lobby)   \u2502     \u2502 CLIENT_LEAVE_LOBBY\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n            \u2502 CLIENT_JOIN_LOBBY\n            \u25bc            \u2502\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n     \u2502  IN_LOBBY   \u2502\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502 SERVER_GAME_START_COUNTDOWN\n            \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502  COUNTDOWN  \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502 SERVER_GAME_START\n            \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502   IN_GAME   \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502 SERVER_GAME_OVER\n            \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502  GAME_OVER  \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502\n            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u25ba (back to CONNECTED)\n</code></pre>"},{"location":"PROTOCOL/#c2-server-lobby-state-machine","title":"C.2 Server Lobby State Machine","text":"<pre><code>     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502 WAITING     \u2502\u25c4\u2500\u2500\u2500\u2500\u2510\n     \u2502 (&lt; required \u2502     \u2502 Player leaves\n     \u2502  players)   \u2502     \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n            \u2502 Lobby full \u2502\n            \u25bc            \u2502\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n     \u2502  COUNTDOWN  \u2502\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2502  (5...1)    \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502 Countdown complete\n            \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502   STARTED   \u2502\n     \u2502 (transition \u2502\n     \u2502  to game)   \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PROTOCOL/#appendix-d-bandwidth-analysis","title":"Appendix D: Bandwidth Analysis","text":""},{"location":"PROTOCOL/#d1-typical-traffic-per-player","title":"D.1 Typical Traffic Per Player","text":"<p>Client Upload (per second): - CLIENT_INPUT: 60 Hz \u00d7 18 bytes (8 header + 10 payload) = 1,080 bytes/s - CLIENT_PING: 1 Hz \u00d7 16 bytes = 16 bytes/s - Total: ~1,096 bytes/s = ~8.8 Kbps upload per player</p> <p>Client Download (per second, 4-player game): - SERVER_SNAPSHOT: 25 Hz \u00d7 200 bytes (avg) = 5,000 bytes/s - Event packets (spawns, scores, etc.): ~100 bytes/s (variable) - Total: ~5,100 bytes/s = ~40.8 Kbps download per player</p> <p>Total Bandwidth (per player): ~50 Kbps (well within typical broadband)</p>"},{"location":"PROTOCOL/#d2-server-bandwidth-4-player-game","title":"D.2 Server Bandwidth (4-player game)","text":"<ul> <li>Upload: 4 players \u00d7 40 Kbps = 160 Kbps</li> <li>Download: 4 players \u00d7 8.8 Kbps = 35 Kbps</li> <li>Total per game session: ~200 Kbps</li> </ul> <p>End of Protocol Specification</p>"},{"location":"RELEASE/","title":"Guide de Cr\u00e9ation de Releases","text":"<p>Ce document explique comment cr\u00e9er des releases Windows pour le jeu R-Type avec un installer automatique.</p>"},{"location":"RELEASE/#vue-densemble","title":"Vue d'ensemble","text":"<p>Le projet utilise : - NSIS (Nullsoft Scriptable Install System) pour cr\u00e9er l'installer Windows - GitHub Actions pour automatiser la compilation et la cr\u00e9ation des releases - PowerShell scripts pour la pr\u00e9paration locale des fichiers</p>"},{"location":"RELEASE/#methode-1-release-automatique-via-github-actions-recommande","title":"M\u00e9thode 1 : Release Automatique via GitHub Actions (Recommand\u00e9)","text":""},{"location":"RELEASE/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Acc\u00e8s push au repository GitHub</li> <li>Droits pour cr\u00e9er des tags</li> </ul>"},{"location":"RELEASE/#etapes","title":"\u00c9tapes","text":"<ol> <li> <p>Pr\u00e9parer votre code <pre><code>git add .\ngit commit -m \"Prepare release v1.0.0\"\ngit push origin main\n</code></pre></p> </li> <li> <p>Cr\u00e9er un tag de version <pre><code># Format: v[MAJOR].[MINOR].[PATCH]\ngit tag v1.0.0\ngit push origin v1.0.0\n</code></pre></p> </li> <li> <p>Attendre la compilation</p> </li> <li>GitHub Actions d\u00e9tecte automatiquement le tag</li> <li>La compilation Windows d\u00e9marre automatiquement</li> <li> <p>Dur\u00e9e estim\u00e9e : 15-30 minutes</p> </li> <li> <p>V\u00e9rifier la release</p> </li> <li>Allez sur <code>https://github.com/[votre-repo]/releases</code></li> <li>La release appara\u00eet avec deux fichiers :<ul> <li><code>RType-Setup.exe</code> : Installer Windows</li> <li><code>RType-Windows-x64.zip</code> : Version portable</li> </ul> </li> </ol>"},{"location":"RELEASE/#declencher-manuellement","title":"D\u00e9clencher Manuellement","text":"<p>Vous pouvez aussi d\u00e9clencher la compilation manuellement :</p> <ol> <li>Allez dans l'onglet \"Actions\" sur GitHub</li> <li>S\u00e9lectionnez \"Windows Release Build\"</li> <li>Cliquez sur \"Run workflow\"</li> <li>Choisissez la branche et lancez</li> </ol>"},{"location":"RELEASE/#methode-2-compilation-locale-de-linstaller","title":"M\u00e9thode 2 : Compilation Locale de l'Installer","text":""},{"location":"RELEASE/#prerequis_1","title":"Pr\u00e9requis","text":"<ol> <li>Windows 10/11 avec Visual Studio 2022</li> <li>NSIS : T\u00e9l\u00e9charger depuis nsis.sourceforge.io</li> <li>vcpkg : D\u00e9j\u00e0 inclus dans le projet</li> </ol>"},{"location":"RELEASE/#etapes_1","title":"\u00c9tapes","text":"<ol> <li> <p>Compiler le projet <pre><code># Depuis la racine du projet\n.\\build.bat\n# Ou manuellement avec CMake\ncmake -B build -DCMAKE_BUILD_TYPE=Release\ncmake --build build --config Release\n</code></pre></p> </li> <li> <p>Pr\u00e9parer les fichiers pour l'installer <pre><code>cd installer\n.\\prepare-installer.ps1\n</code></pre></p> </li> </ol> <p>Ce script :    - Copie les ex\u00e9cutables (client et serveur)    - Copie les plugins (.dll)    - Copie les d\u00e9pendances vcpkg    - Copie les assets    - Cr\u00e9e un dossier <code>build/installer-package</code></p> <ol> <li>V\u00e9rifier le contenu <pre><code>Get-ChildItem build\\installer-package -Recurse\n</code></pre></li> </ol> <p>Vous devriez voir :    <pre><code>\u251c\u2500\u2500 r_type_client.exe\n\u251c\u2500\u2500 r_type_server.exe\n\u251c\u2500\u2500 *.dll (d\u00e9pendances)\n\u251c\u2500\u2500 plugins\\\n\u2502   \u251c\u2500\u2500 raylib_graphics.dll\n\u2502   \u251c\u2500\u2500 asio_network.dll\n\u2502   \u251c\u2500\u2500 miniaudio_audio.dll\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 assets\\\n    \u2514\u2500\u2500 fonts\\\n</code></pre></p> <ol> <li> <p>Copier les fichiers vers le r\u00e9pertoire build <pre><code>Copy-Item build\\installer-package\\* build\\ -Recurse -Force\n</code></pre></p> </li> <li> <p>Cr\u00e9er l'installer avec NSIS <pre><code># Depuis la racine du projet\nmakensis installer\\rtype-installer.nsi\n</code></pre></p> </li> <li> <p>L'installer est cr\u00e9\u00e9</p> </li> <li>Fichier : <code>installer/RType-Setup.exe</code></li> <li>Taille : ~50-100 MB (selon les d\u00e9pendances)</li> </ol>"},{"location":"RELEASE/#structure-de-linstaller","title":"Structure de l'Installer","text":"<p>L'installer NSIS : - \u2705 Installe dans <code>C:\\Program Files\\R-Type</code> par d\u00e9faut - \u2705 Cr\u00e9e des raccourcis dans le menu D\u00e9marrer - \u2705 Cr\u00e9e un raccourci sur le Bureau - \u2705 Ajoute une entr\u00e9e \"Ajout/Suppression de programmes\" - \u2705 Inclut un d\u00e9sinstalleur - \u2705 V\u00e9rifie Windows 64-bit - \u2705 Support multilingue (Anglais/Fran\u00e7ais)</p>"},{"location":"RELEASE/#tester-linstaller","title":"Tester l'Installer","text":"<ol> <li> <p>Installation <pre><code># Lancer l'installer\n.\\installer\\RType-Setup.exe\n</code></pre></p> </li> <li> <p>V\u00e9rification</p> </li> <li>Lancer R-Type depuis le menu D\u00e9marrer</li> <li>V\u00e9rifier que le jeu se lance correctement</li> <li> <p>Tester le client et le serveur</p> </li> <li> <p>D\u00e9sinstallation</p> </li> <li>Via le menu D\u00e9marrer &gt; R-Type &gt; Uninstall</li> <li>Ou via Param\u00e8tres Windows &gt; Applications</li> </ol>"},{"location":"RELEASE/#versioning","title":"Versioning","text":"<p>Suivez Semantic Versioning :</p> <ul> <li>MAJOR : Changements incompatibles (v2.0.0)</li> <li>MINOR : Nouvelles fonctionnalit\u00e9s compatibles (v1.1.0)</li> <li>PATCH : Corrections de bugs (v1.0.1)</li> </ul> <p>Exemples : <pre><code>git tag v1.0.0  # Premi\u00e8re release\ngit tag v1.0.1  # Correction de bug\ngit tag v1.1.0  # Nouvelle fonctionnalit\u00e9\ngit tag v2.0.0  # Changement majeur\n</code></pre></p>"},{"location":"RELEASE/#troubleshooting","title":"Troubleshooting","text":""},{"location":"RELEASE/#probleme-dll-manquantes","title":"Probl\u00e8me : \"DLL manquantes\"","text":"<p>Solution : V\u00e9rifier que vcpkg a bien compil\u00e9 les d\u00e9pendances <pre><code>ls vcpkg\\installed\\x64-windows\\bin\\*.dll\n</code></pre></p>"},{"location":"RELEASE/#probleme-plugins-non-trouves","title":"Probl\u00e8me : \"Plugins non trouv\u00e9s\"","text":"<p>Solution : V\u00e9rifier que les plugins sont compil\u00e9s <pre><code>ls build\\plugins\\*.dll\n# Ou\nls build\\Release\\plugins\\*.dll\n</code></pre></p>"},{"location":"RELEASE/#probleme-nsis-ne-trouve-pas-les-fichiers","title":"Probl\u00e8me : \"NSIS ne trouve pas les fichiers\"","text":"<p>Solution : V\u00e9rifier que les fichiers sont bien copi\u00e9s dans <code>build/</code> <pre><code># Re-ex\u00e9cuter le script de pr\u00e9paration\ncd installer\n.\\prepare-installer.ps1\n\n# Copier manuellement si n\u00e9cessaire\nCopy-Item build\\installer-package\\* build\\ -Recurse -Force\n</code></pre></p>"},{"location":"RELEASE/#probleme-github-action-echoue","title":"Probl\u00e8me : \"GitHub Action \u00e9choue\"","text":"<p>Solutions possibles : 1. V\u00e9rifier que <code>vcpkg.json</code> est \u00e0 jour 2. V\u00e9rifier que le CMakeLists.txt compile correctement 3. Consulter les logs dans l'onglet \"Actions\" 4. V\u00e9rifier que tous les fichiers n\u00e9cessaires existent</p>"},{"location":"RELEASE/#fichiers-importants","title":"Fichiers Importants","text":"<ul> <li><code>installer/rtype-installer.nsi</code> : Script NSIS</li> <li><code>.github/workflows/windows-release.yml</code> : GitHub Action</li> <li><code>installer/prepare-installer.ps1</code> : Script de pr\u00e9paration</li> <li><code>vcpkg.json</code> : D\u00e9pendances vcpkg</li> <li><code>CMakeLists.txt</code> : Configuration CMake</li> </ul>"},{"location":"RELEASE/#checklist-de-release","title":"Checklist de Release","text":"<p>Avant de cr\u00e9er une release, v\u00e9rifier :</p> <ul> <li>[ ] Le code compile sans erreurs</li> <li>[ ] Les tests passent</li> <li>[ ] La version est mise \u00e0 jour dans le code si n\u00e9cessaire</li> <li>[ ] Le CHANGELOG est \u00e0 jour (si vous en avez un)</li> <li>[ ] Les assets sont \u00e0 jour</li> <li>[ ] Un tag git est cr\u00e9\u00e9 avec le bon format (v1.0.0)</li> <li>[ ] La GitHub Action passe avec succ\u00e8s</li> <li>[ ] L'installer a \u00e9t\u00e9 test\u00e9 sur une machine propre</li> </ul>"},{"location":"RELEASE/#distribution","title":"Distribution","text":"<p>Une fois la release cr\u00e9\u00e9e :</p> <ol> <li>GitHub Releases : Automatique via GitHub Actions</li> <li>Partage direct : Distribuer <code>RType-Setup.exe</code></li> <li>Version portable : Distribuer <code>RType-Windows-x64.zip</code></li> </ol>"},{"location":"RELEASE/#support-multi-plateforme","title":"Support Multi-plateforme","text":"<p>Pour l'instant, seul Windows est support\u00e9 pour les releases automatiques.</p> <p>Pour supporter Linux/macOS : - Cr\u00e9er des GitHub Actions similaires pour Linux (.deb, .AppImage) - Cr\u00e9er des GitHub Actions pour macOS (.dmg)</p>"},{"location":"RELEASE/#ressources","title":"Ressources","text":"<ul> <li>NSIS Documentation</li> <li>GitHub Actions Documentation</li> <li>Semantic Versioning</li> <li>vcpkg Documentation</li> </ul> <p>Pour toute question, consultez la documentation principale ou ouvrez une issue sur GitHub.</p>"},{"location":"SERVER_ARCHITECTURE/","title":"Architecture du Serveur R-Type","text":""},{"location":"SERVER_ARCHITECTURE/#vue-densemble","title":"Vue d'ensemble","text":"<p>Le serveur R-Type est une application r\u00e9seau hybride TCP/UDP qui g\u00e8re les connexions des clients, les lobbies de jeu et les sessions de jeu multijoueurs.</p>"},{"location":"SERVER_ARCHITECTURE/#architecture-globale","title":"Architecture globale","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                       Server                            \u2502\n\u2502  (Orchestration et gestion des joueurs)                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                         \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\n\u2502  \u2502  Network    \u2502  \u2502  Packet      \u2502  \u2502  GameSession   \u2502\u2502\n\u2502  \u2502  Handler    \u2502  \u2502  Sender      \u2502  \u2502  Manager       \u2502\u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\n\u2502         \u2502                 \u2502                  \u2502         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502                 \u2502                  \u2502\n          \u25bc                 \u25bc                  \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502 INetwork      \u2502 \u2502 INetwork     \u2502 \u2502 GameSession     \u2502\n  \u2502 Plugin        \u2502 \u2502 Plugin       \u2502 \u2502 (instances)     \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"SERVER_ARCHITECTURE/#composants-principaux","title":"Composants principaux","text":""},{"location":"SERVER_ARCHITECTURE/#1-server-classe-principale","title":"1. Server (Classe principale)","text":"<p>Fichier: <code>src/r-type/server/include/Server.hpp</code></p> <p>Responsabilit\u00e9s: - Orchestration de tous les composants - Gestion du cycle de vie du serveur (start/stop/run) - Gestion de la liste des joueurs connect\u00e9s - Coordination entre lobbies et sessions de jeu</p> <p>Membres cl\u00e9s: <pre><code>class Server {\nprivate:\n    // Composants\n    std::unique_ptr&lt;NetworkHandler&gt; network_handler_;\n    std::unique_ptr&lt;PacketSender&gt; packet_sender_;\n    std::unique_ptr&lt;GameSessionManager&gt; session_manager_;\n\n    // \u00c9tat\n    std::unordered_map&lt;uint32_t, PlayerInfo&gt; connected_clients_;\n    LobbyManager lobby_manager_;\n\n    // Network\n    engine::INetworkPlugin* network_plugin_;\n};\n</code></pre></p> <p>M\u00e9thodes principales: - <code>bool start()</code> - Initialise et d\u00e9marre le serveur - <code>void run()</code> - Boucle principale du serveur (60 TPS) - <code>void stop()</code> - Arr\u00eat gracieux du serveur</p>"},{"location":"SERVER_ARCHITECTURE/#2-networkhandler","title":"2. NetworkHandler","text":"<p>Fichier: <code>src/r-type/server/include/NetworkHandler.hpp</code></p> <p>Responsabilit\u00e9s: - R\u00e9ception et d\u00e9codage des paquets r\u00e9seau - Validation de la version du protocole - Routage des paquets vers les handlers appropri\u00e9s</p> <p>Architecture: <pre><code>NetworkHandler::process_packets()\n    \u2193\nreceive() \u2192 decode_header() \u2192 validate_version()\n    \u2193\nroute_packet()\n    \u251c\u2500\u2192 handle_tcp_packet() \u2192 callback (CLIENT_CONNECT, etc.)\n    \u2514\u2500\u2192 handle_udp_packet() \u2192 callback (CLIENT_INPUT, etc.)\n</code></pre></p> <p>Callbacks disponibles: - <code>on_client_connect</code> - Connexion d'un nouveau client - <code>on_client_disconnect</code> - D\u00e9connexion d'un client - <code>on_client_ping</code> - Requ\u00eate de ping - <code>on_client_join_lobby</code> - Demande de rejoindre un lobby - <code>on_client_leave_lobby</code> - Demande de quitter un lobby - <code>on_udp_handshake</code> - Handshake UDP - <code>on_client_input</code> - Input du joueur</p>"},{"location":"SERVER_ARCHITECTURE/#3-packetsender","title":"3. PacketSender","text":"<p>Fichier: <code>src/r-type/server/include/PacketSender.hpp</code></p> <p>Responsabilit\u00e9s: - Envoi de paquets TCP (fiable, ordonn\u00e9) - Envoi de paquets UDP (rapide, non fiable) - Broadcasting vers lobbies et sessions</p> <p>M\u00e9thodes principales:</p> <p>TCP: - <code>send_tcp_packet(client_id, type, payload)</code> - Envoi unicast - <code>broadcast_tcp_packet(type, payload)</code> - Envoi \u00e0 tous les clients - <code>broadcast_tcp_to_lobby(lobby_id, type, payload)</code> - Envoi au lobby</p> <p>UDP: - <code>send_udp_packet(client_id, type, payload)</code> - Envoi unicast - <code>broadcast_udp_to_session(session_id, type, payload)</code> - Envoi \u00e0 la session</p> <p>Format de paquet: <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Version   \u2502  Type  \u2502  Payload    \u2502   Sequence   \u2502 Payload \u2502\n\u2502  (1 byte)  \u2502(1 byte)\u2502  Length     \u2502   Number     \u2502  Data   \u2502\n\u2502            \u2502        \u2502  (2 bytes)  \u2502  (4 bytes)   \u2502         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></p>"},{"location":"SERVER_ARCHITECTURE/#4-gamesessionmanager","title":"4. GameSessionManager","text":"<p>Fichier: <code>src/r-type/server/include/GameSessionManager.hpp</code></p> <p>Responsabilit\u00e9s: - Cr\u00e9ation et destruction des sessions de jeu - Mise \u00e0 jour de toutes les sessions actives - Nettoyage automatique des sessions inactives - Configuration des callbacks de session</p> <p>Cycle de vie d'une session: <pre><code>create_session()\n    \u2193\nsetup_callbacks()\n    \u2193\nupdate_all(delta_time)  [Appel\u00e9 chaque tick]\n    \u2193\ncleanup_inactive_sessions()\n    \u2193\nremove_session() / on_game_over()\n</code></pre></p> <p>Callbacks de session: - <code>on_state_snapshot</code> - Snapshot d'\u00e9tat des entit\u00e9s - <code>on_entity_spawn</code> - Apparition d'une nouvelle entit\u00e9 - <code>on_entity_destroy</code> - Destruction d'une entit\u00e9 - <code>on_projectile_spawn</code> - Apparition d'un projectile - <code>on_wave_start</code> - D\u00e9but d'une vague - <code>on_wave_complete</code> - Fin d'une vague - <code>on_game_over</code> - Fin de partie</p>"},{"location":"SERVER_ARCHITECTURE/#5-lobbymanager","title":"5. LobbyManager","text":"<p>Fichier: <code>src/r-type/server/include/LobbyManager.hpp</code></p> <p>Responsabilit\u00e9s: - Gestion des lobbies de jeu (cr\u00e9ation/suppression) - Matchmaking des joueurs - Countdown avant le d\u00e9but de la partie - Notification de l'\u00e9tat des lobbies</p> <p>\u00c9tats d'un lobby: <pre><code>WAITING (&lt; min_players)\n    \u2193\nREADY (&gt;= min_players)\n    \u2193\nCOUNTDOWN (10 secondes)\n    \u2193\nSTARTING\n    \u2193\n[Game Session cr\u00e9\u00e9e]\n</code></pre></p>"},{"location":"SERVER_ARCHITECTURE/#flux-reseau","title":"Flux r\u00e9seau","text":""},{"location":"SERVER_ARCHITECTURE/#connexion-dun-client","title":"Connexion d'un client","text":"<pre><code>Client                  Server\n  \u2502                       \u2502\n  \u251c\u2500\u2500\u25ba CLIENT_CONNECT \u2500\u2500\u2500\u25ba\u2502\n  \u2502                       \u251c\u2500\u25ba Valider le paquet\n  \u2502                       \u251c\u2500\u25ba Cr\u00e9er PlayerInfo\n  \u2502                       \u251c\u2500\u25ba Assigner player_id\n  \u2502                       \u2502\n  \u2502\u25c4\u2500\u2500\u2500 SERVER_ACCEPT \u2500\u2500\u2500\u2500\u2524\n  \u2502                       \u2502\n</code></pre>"},{"location":"SERVER_ARCHITECTURE/#creation-et-demarrage-dune-partie","title":"Cr\u00e9ation et d\u00e9marrage d'une partie","text":"<pre><code>Client 1, 2, 3          Server                    GameSession\n  \u2502                       \u2502                           \u2502\n  \u251c\u2500\u2500\u25ba JOIN_LOBBY \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                           \u2502\n  \u2502                       \u251c\u2500\u25ba lobby_manager.join()    \u2502\n  \u2502\u25c4\u2500\u2500\u2500 LOBBY_STATE \u2500\u2500\u2500\u2500\u2500\u2500\u2524                           \u2502\n  \u2502                       \u2502                           \u2502\n  \u2502     [Min players atteint]                         \u2502\n  \u2502                       \u2502                           \u2502\n  \u2502\u25c4\u2500\u2500\u2500 COUNTDOWN (10) \u2500\u2500\u2500\u2524                           \u2502\n  \u2502\u25c4\u2500\u2500\u2500 COUNTDOWN (9) \u2500\u2500\u2500\u2500\u2524                           \u2502\n  \u2502        ...            \u2502                           \u2502\n  \u2502\u25c4\u2500\u2500\u2500 COUNTDOWN (1) \u2500\u2500\u2500\u2500\u2524                           \u2502\n  \u2502                       \u2502                           \u2502\n  \u2502\u25c4\u2500\u2500\u2500 GAME_START \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\u2500\u2500\u25ba create_session() \u2500\u2500\u2500\u2500\u25ba\u2502\n  \u2502                       \u2502                           \u2502\n  \u251c\u2500\u2500\u25ba UDP_HANDSHAKE \u2500\u2500\u2500\u2500\u25ba\u2502\u2500\u2500\u25ba associate_udp()       \u2502\n  \u2502                       \u2502                           \u2502\n  \u2502\u25c4\u2550\u2550\u2550 ENTITY_SPAWN \u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2502\n  \u2502\u25c4\u2550\u2550\u2550 WAVE_START \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2502\n  \u2502                       \u2502                           \u2502\n</code></pre> <p>L\u00e9gende: <code>\u2500\u2500\u2500\u25ba</code> TCP, <code>\u2550\u2550\u2550\u25ba</code> UDP</p>"},{"location":"SERVER_ARCHITECTURE/#boucle-de-jeu","title":"Boucle de jeu","text":"<pre><code>Client                  Server                    GameSession\n  \u2502                       \u2502                           \u2502\n  \u251c\u2550\u2550\u25ba CLIENT_INPUT \u2550\u2550\u2550\u2550\u2550\u25ba\u2502\u2500\u2500\u25ba handle_input() \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n  \u2502     (30 Hz)           \u2502                           \u2502\n  \u2502                       \u2502                           \u2502\n  \u2502                       \u2502      update(dt)           \u2502\n  \u2502                       \u2502          \u251c\u2500\u25ba MovementSystem\n  \u2502                       \u2502          \u251c\u2500\u25ba CollisionSystem\n  \u2502                       \u2502          \u251c\u2500\u25ba AISystem\n  \u2502                       \u2502          \u2514\u2500\u25ba etc.\n  \u2502                       \u2502                           \u2502\n  \u2502\u25c4\u2550\u2550\u2550 DELTA_SNAPSHOT \u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2502\n  \u2502     (60 Hz)           \u2502                           \u2502\n  \u2502                       \u2502                           \u2502\n</code></pre>"},{"location":"SERVER_ARCHITECTURE/#protocole-reseau","title":"Protocole r\u00e9seau","text":""},{"location":"SERVER_ARCHITECTURE/#separation-tcpudp","title":"S\u00e9paration TCP/UDP","text":"<p>TCP (Port 4242 par d\u00e9faut): - Connexion/D\u00e9connexion - Gestion des lobbies - Messages de contr\u00f4le - Notifications importantes</p> <p>UDP (Port 4243 par d\u00e9faut): - Inputs des joueurs - State snapshots - Spawn/Destroy des entit\u00e9s - Projectiles</p>"},{"location":"SERVER_ARCHITECTURE/#types-de-paquets","title":"Types de paquets","text":"<p>TCP - Client \u2192 Server: - <code>CLIENT_CONNECT</code> - Demande de connexion - <code>CLIENT_DISCONNECT</code> - D\u00e9connexion volontaire - <code>CLIENT_PING</code> - Mesure de latence - <code>CLIENT_JOIN_LOBBY</code> - Rejoindre un lobby - <code>CLIENT_LEAVE_LOBBY</code> - Quitter un lobby</p> <p>TCP - Server \u2192 Client: - <code>SERVER_ACCEPT</code> - Acceptation de connexion - <code>SERVER_REJECT</code> - Rejet de connexion - <code>SERVER_PONG</code> - R\u00e9ponse au ping - <code>SERVER_LOBBY_STATE</code> - \u00c9tat du lobby - <code>SERVER_GAME_START_COUNTDOWN</code> - Countdown - <code>SERVER_GAME_START</code> - D\u00e9but de partie</p> <p>UDP - Client \u2192 Server: - <code>CLIENT_UDP_HANDSHAKE</code> - Association UDP/TCP - <code>CLIENT_INPUT</code> - Input du joueur</p> <p>UDP - Server \u2192 Client: - <code>SERVER_DELTA_SNAPSHOT</code> - \u00c9tat des entit\u00e9s - <code>SERVER_ENTITY_SPAWN</code> - Apparition d'entit\u00e9 - <code>SERVER_ENTITY_DESTROY</code> - Destruction d'entit\u00e9 - <code>SERVER_PROJECTILE_SPAWN</code> - Apparition de projectile - <code>SERVER_WAVE_START</code> - D\u00e9but de vague - <code>SERVER_WAVE_COMPLETE</code> - Fin de vague - <code>SERVER_GAME_OVER</code> - Fin de partie</p>"},{"location":"SERVER_ARCHITECTURE/#configuration","title":"Configuration","text":"<p>Fichier: <code>src/r-type/server/include/ServerConfig.hpp</code></p> <p>Constantes importantes: <pre><code>namespace rtype::server::config {\n    constexpr uint16_t DEFAULT_TCP_PORT = 4242;\n    constexpr uint16_t DEFAULT_UDP_PORT = 4243;\n    constexpr uint32_t SERVER_TICK_RATE = 60;      // 60 TPS\n    constexpr uint32_t TICK_INTERVAL_MS = 16;      // ~16ms\n    constexpr uint32_t MAX_PLAYERS_PER_LOBBY = 4;\n}\n</code></pre></p>"},{"location":"SERVER_ARCHITECTURE/#gestion-des-joueurs","title":"Gestion des joueurs","text":""},{"location":"SERVER_ARCHITECTURE/#structure-playerinfo","title":"Structure PlayerInfo","text":"<pre><code>struct PlayerInfo {\n    uint32_t client_id;      // ID de connexion TCP\n    uint32_t player_id;      // ID unique du joueur\n    std::string player_name;\n    uint32_t udp_client_id;  // ID de connexion UDP\n    bool in_lobby;\n    uint32_t lobby_id;\n    bool in_game;\n    uint32_t session_id;\n};\n</code></pre>"},{"location":"SERVER_ARCHITECTURE/#cycle-de-vie-dun-joueur","title":"Cycle de vie d'un joueur","text":"<pre><code>1. Connexion TCP\n   \u2193\n2. Attribution player_id\n   \u2193\n3. Acceptation (SERVER_ACCEPT)\n   \u2193\n4. Rejoindre un lobby\n   \u2193\n5. Handshake UDP\n   \u2193\n6. D\u00e9but de partie\n   \u2193\n7. En jeu (r\u00e9ception d'inputs, envoi de snapshots)\n   \u2193\n8. Fin de partie\n   \u2193\n9. Retour au lobby ou d\u00e9connexion\n</code></pre>"},{"location":"SERVER_ARCHITECTURE/#gestion-derreurs","title":"Gestion d'erreurs","text":""},{"location":"SERVER_ARCHITECTURE/#deconnexion-inattendue","title":"D\u00e9connexion inattendue","text":"<p>Le serveur d\u00e9tecte les d\u00e9connexions via: - Timeout TCP (pas de keepalive) - Callback <code>on_client_disconnected</code> du plugin r\u00e9seau</p> <p>Action: - Retrait du lobby si applicable - Notification aux autres joueurs du lobby - Nettoyage des ressources</p>"},{"location":"SERVER_ARCHITECTURE/#paquets-invalides","title":"Paquets invalides","text":"<ul> <li>Validation de la version du protocole</li> <li>Validation de la taille du payload</li> <li>Logs d'erreur sans crash</li> </ul>"},{"location":"SERVER_ARCHITECTURE/#session-orpheline","title":"Session orpheline","text":"<p>Le <code>GameSessionManager</code> nettoie automatiquement les sessions inactives \u00e0 chaque tick.</p>"},{"location":"SERVER_ARCHITECTURE/#performance","title":"Performance","text":""},{"location":"SERVER_ARCHITECTURE/#tick-rate","title":"Tick Rate","text":"<ul> <li>Serveur: 60 TPS (Ticks Per Second)</li> <li>Client Input: ~30 Hz</li> <li>State Snapshot: 60 Hz</li> </ul>"},{"location":"SERVER_ARCHITECTURE/#optimisations","title":"Optimisations","text":"<ol> <li>Delta Snapshots: Seules les entit\u00e9s qui ont chang\u00e9 sont envoy\u00e9es</li> <li>Entity Prioritization: Les snapshots priorisent les entit\u00e9s critiques:</li> <li>PLAYER (priorit\u00e9 maximale) - toujours inclus</li> <li>PROJECTILE (haute priorit\u00e9) - inclus pour un gameplay pr\u00e9cis</li> <li>ENEMY (priorit\u00e9 moyenne) - inclus pour la synchronisation</li> <li>WALL exclus des snapshots (d\u00e9filement pr\u00e9dictible c\u00f4t\u00e9 client)</li> <li>Snapshot Size Limit: Maximum 55 entit\u00e9s par snapshot (payload 1387 bytes / 25 bytes par EntityState)</li> <li>UDP pour gameplay: R\u00e9duction de la latence</li> <li>Pooling d'entit\u00e9s: R\u00e9utilisation des entit\u00e9s d\u00e9truites</li> <li>Spatial partitioning: Pour les collisions (dans GameSession)</li> </ol>"},{"location":"SERVER_ARCHITECTURE/#deploiement","title":"D\u00e9ploiement","text":""},{"location":"SERVER_ARCHITECTURE/#compilation","title":"Compilation","text":"<pre><code>cmake -B build\ncmake --build build --target r-type_server\n</code></pre>"},{"location":"SERVER_ARCHITECTURE/#execution","title":"Ex\u00e9cution","text":"<pre><code># Port par d\u00e9faut (4242 TCP, 4243 UDP)\n./r-type_server\n\n# Ports personnalis\u00e9s\n./r-type_server &lt;tcp_port&gt; &lt;udp_port&gt;\n</code></pre>"},{"location":"SERVER_ARCHITECTURE/#logs","title":"Logs","text":"<p>Le serveur affiche: - \u00c9tat de d\u00e9marrage - Connexions/D\u00e9connexions - Cr\u00e9ation/Destruction de lobbies - D\u00e9but/Fin de parties - Erreurs r\u00e9seau</p>"},{"location":"SERVER_ARCHITECTURE/#dependances","title":"D\u00e9pendances","text":"<ul> <li>game_engine: ECS, syst\u00e8mes, plugins</li> <li>rtype_logic: Logique de jeu (collision, AI, etc.)</li> <li>Boost.Asio: Plugin r\u00e9seau</li> <li>Protocol: Headers partag\u00e9s client/serveur</li> </ul>"},{"location":"SERVER_ARCHITECTURE/#diagramme-de-sequence-complet","title":"Diagramme de s\u00e9quence complet","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502Client\u2502  \u2502 Server \u2502  \u2502NetworkHandler\u2502  \u2502 LobbyManager  \u2502  \u2502GameSession  \u2502\n\u2514\u2500\u2500\u252c\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n   \u2502          \u2502               \u2502                  \u2502                 \u2502\n   \u251c\u2500CONNECT\u2500\u25ba\u2502               \u2502                  \u2502                 \u2502\n   \u2502          \u251c\u2500receive()\u2500\u2500\u2500\u2500\u25ba\u2502                  \u2502                 \u2502\n   \u2502          \u2502               \u251c\u2500decode()         \u2502                 \u2502\n   \u2502          \u2502               \u251c\u2500route()          \u2502                 \u2502\n   \u2502          \u2502\u25c4\u2500\u2500callback\u2500\u2500\u2500\u2500\u2524                  \u2502                 \u2502\n   \u2502          \u251c\u2500create_player()                  \u2502                 \u2502\n   \u2502\u25c4\u2500ACCEPT\u2500\u2500\u2524               \u2502                  \u2502                 \u2502\n   \u2502          \u2502               \u2502                  \u2502                 \u2502\n   \u251cJOIN_LOBBY\u2502               \u2502                  \u2502                 \u2502\n   \u2502          \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\u2500\u2500callback\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                 \u2502\n   \u2502          \u2502               \u2502                  \u251c\u2500join()          \u2502\n   \u2502\u25c4LOBBY\u2500\u2500\u2500\u2500\u2524\u25c4\u2500\u2500broadcast\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524                 \u2502\n   \u2502  STATE   \u2502               \u2502                  \u2502                 \u2502\n   \u2502          \u2502               \u2502           [countdown loop]         \u2502\n   \u2502\u25c4COUNTDOWN\u2524\u25c4\u2500\u2500broadcast\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524                 \u2502\n   \u2502          \u2502               \u2502                  \u2502                 \u2502\n   \u2502          \u2502               \u2502                  \u251c\u2500on_game_start() \u2502\n   \u2502          \u2502               \u2502                  \u2502                 \u2502\n   \u2502\u25c4GAME_\u2500\u2500\u2500\u2500\u2524               \u2502                  \u251c\u2500\u2500create\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n   \u2502  START   \u2502               \u2502                  \u2502                 \u2502\n   \u2502          \u2502               \u2502                  \u2502                 \u251c\u2500setup()\n   \u251cUDP_HAND\u2500\u25ba\u2502               \u2502                  \u2502                 \u2502\n   \u2502  SHAKE   \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\u2500\u2500callback\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\n   \u2502          \u2502               \u2502                  \u2502                 \u251cassociate\n   \u2502          \u2502               \u2502                  \u2502                 \u2502\n   \u2502          \u2502               \u2502                [game loop 60Hz]    \u2502\n   \u2502          \u2502               \u2502                  \u2502                 \u2502\n   \u251c\u2550INPUT\u2550\u2550\u2550\u25ba\u2502\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u25ba\n   \u2502          \u2502               \u2502                  \u2502                 \u251c\u2500update()\n   \u2502\u25c4\u2550SNAPSHOT\u2502\u25c4\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2524\n   \u2502          \u2502               \u2502                  \u2502                 \u2502\n   \u2502          \u2502               \u2502                [game over]         \u2502\n   \u2502          \u2502               \u2502                  \u2502                 \u2502\n   \u2502\u25c4GAME_\u2500\u2500\u2500\u2500\u2524\u25c4\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2524\n   \u2502  OVER    \u2502               \u2502                  \u2502                 \u2502\n   \u2502          \u2502               \u2502                  \u2502                 \u25bc\n</code></pre>"},{"location":"SERVER_ARCHITECTURE/#conclusion","title":"Conclusion","text":"<p>L'architecture modulaire du serveur permet: - Maintenabilit\u00e9: Code facile \u00e0 comprendre et modifier - Extensibilit\u00e9: Ajout de nouvelles fonctionnalit\u00e9s simplifi\u00e9 - Testabilit\u00e9: Chaque composant peut \u00eatre test\u00e9 ind\u00e9pendamment - Performance: Tick rate \u00e9lev\u00e9 avec optimisations r\u00e9seau - Robustesse: Gestion d'erreurs et cleanup automatique</p>"},{"location":"SERVER_DEVELOPMENT_GUIDE/","title":"R-Type Server Development Guide","text":"<p>This guide outlines the architecture and implementation steps for the R-Type Server MVP. It is based on the existing ECS architecture, the shared protocol definitions, and the project requirements.</p>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#1-project-overview-goals","title":"1. Project Overview &amp; Goals","text":"<p>Objective: Implement a robust, multiplayer game server for R-Type capable of handling 2-4 players via UDP.</p> <p>Key Requirements: - Capacity: 2-4 concurrent players. - Networking: UDP via <code>INetworkPlugin</code>. - Architecture: Server-authoritative (server decides truth). - Stability: 10+ minutes runtime without crashes. - Latency: &lt;100ms processing overhead.</p>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#2-architecture","title":"2. Architecture","text":"<p>The server will be built as a standalone application located in <code>src/r-type/server/</code>. It will leverage the core engine libraries (<code>src/engine/</code>) and the shared protocol (<code>src/r-type/shared/protocol/</code>).</p>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#high-level-components","title":"High-Level Components","text":"<ol> <li> <p>Network Layer (<code>NetworkSystem</code>):</p> <ul> <li>Uses the <code>INetworkPlugin</code> to send/receive raw bytes.</li> <li>Deserializes incoming packets into events or components.</li> <li>Serializes game state into outgoing packets (Snapshots).</li> </ul> </li> <li> <p>ECS Core (<code>Registry</code>):</p> <ul> <li>The central source of truth.</li> <li>Stores all entities (Players, Enemies, Projectiles) and their state (Position, Velocity, Health).</li> </ul> </li> <li> <p>Game Loop:</p> <ul> <li>Tick Rate: Fixed (e.g., 60 TPS).</li> <li>Steps:<ol> <li>Poll Network: Read all incoming packets from the plugin.</li> <li>Process Events: Handle joins, leaves, and inputs.</li> <li>Update Systems: Run physics, collision, AI, and game logic systems.</li> <li>Broadcast State: Send <code>SERVER_SNAPSHOT</code> or specific events to clients.</li> </ol> </li> </ul> </li> </ol>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#3-protocol-implementation","title":"3. Protocol Implementation","text":"<p>The protocol is already defined in <code>src/r-type/shared/protocol/</code>. The server must strictly adhere to these definitions.</p>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#key-files","title":"Key Files","text":"<ul> <li><code>PacketHeader.hpp</code>: The 8-byte header (Version, Type, Length, Sequence).</li> <li><code>PacketTypes.hpp</code>: Message IDs (e.g., <code>CLIENT_INPUT</code> = 0x10).</li> <li><code>Payloads.hpp</code>: Packed structs for message bodies.</li> </ul>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#packet-handling-flow","title":"Packet Handling Flow","text":"<ol> <li>Receive: <code>plugin-&gt;receive()</code> returns a <code>NetworkPacket</code>.</li> <li>Parse Header: Read the first 8 bytes as <code>PacketHeader</code>.</li> <li>Validate: Check <code>version</code>, <code>payload_length</code>, and <code>type</code>.</li> <li>Route: Switch on <code>header.type</code> to cast the payload to the correct struct.</li> </ol>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#4-implementation-phases","title":"4. Implementation Phases","text":""},{"location":"SERVER_DEVELOPMENT_GUIDE/#phase-1-infrastructure-setup","title":"Phase 1: Infrastructure Setup","text":"<p>Goal: A running server that listens on a port. 1.  Modify <code>src/r-type/server/src/main.cpp</code>. 2.  Load the Network Plugin (DLL/SO) using <code>PluginManager</code>. 3.  Initialize <code>INetworkPlugin</code> and call <code>start_server(port, UDP)</code>. 4.  Implement the basic <code>while (running)</code> loop.</p>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#phase-2-connection-management","title":"Phase 2: Connection Management","text":"<p>Goal: Clients can connect and see the \"Lobby\". 1.  Handle <code>CLIENT_CONNECT</code> (0x01).     -   Check if server is full.     -   Create a \"Player\" entity in the ECS.     -   Send <code>SERVER_ACCEPT</code> (0x81) with the assigned Player ID.     -   Broadcast <code>SERVER_PLAYER_JOINED</code> (0x83) to others. 2.  Handle <code>CLIENT_DISCONNECT</code> (0x02) and timeouts.     -   Remove entity.     -   Broadcast <code>SERVER_PLAYER_LEFT</code> (0x84). 3.  Implement a <code>LobbySystem</code> to manage the \"Waiting for players\" state.</p>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#phase-3-input-movement","title":"Phase 3: Input &amp; Movement","text":"<p>Goal: Players can move their ships. 1.  Handle <code>CLIENT_INPUT</code> (0x10).     -   This packet contains <code>InputFlags</code> (Up, Down, Left, Right, Shoot).     -   Do not trust the client's position.     -   Update the player entity's <code>Velocity</code> component based on input flags. 2.  Create/Use <code>PhysicsSystem</code>:     -   Update <code>Position</code> based on <code>Velocity</code>.     -   Enforce map boundaries (clamp position).</p>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#phase-4-state-synchronization-the-netcode","title":"Phase 4: State Synchronization (The \"Netcode\")","text":"<p>Goal: Clients see moving objects. 1.  Create <code>NetworkBroadcastSystem</code>. 2.  Periodically (e.g., every tick or every other tick):     -   Iterate all networked entities.     -   Construct <code>EntityState</code> structs.     -   Pack them into a <code>SERVER_SNAPSHOT</code> (0xA0) packet.     -   Broadcast to all clients.</p>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#phase-5-gameplay-logic","title":"Phase 5: Gameplay Logic","text":"<p>Goal: Enemies, Shooting, Scoring. 1.  Shooting:     -   When <code>INPUT_SHOOT</code> is active and cooldown allows:     -   Spawn a <code>Projectile</code> entity.     -   Broadcast <code>SERVER_PROJECTILE_SPAWN</code> (0xB3). 2.  Enemies (AI):     -   <code>WaveSystem</code>: Spawns enemies based on time/wave config.     -   <code>AISystem</code>: Updates enemy velocities (patterns). 3.  Collision:     -   Server checks overlaps (AABB).     -   On hit:         -   Deduct health.         -   If dead: <code>registry.kill_entity()</code>.         -   Broadcast <code>SERVER_ENTITY_DESTROY</code> (0xB1) and <code>SERVER_SCORE_UPDATE</code> (0xC1).</p>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#5-code-structure-proposal","title":"5. Code Structure Proposal","text":"<pre><code>// src/r-type/server/src/Server.hpp\n\nclass Server {\npublic:\n    Server(const std::string&amp; plugin_path);\n    void run();\n\nprivate:\n    void handle_packets();\n    void update_game(float dt);\n    void broadcast_state();\n\n    // Packet Handlers\n    void on_connect(ClientId id, const ClientConnectPayload&amp; payload);\n    void on_input(ClientId id, const ClientInputPayload&amp; payload);\n\n    std::unique_ptr&lt;engine::INetworkPlugin&gt; _network;\n    engine::Registry _registry;\n    // ...\n};\n</code></pre>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#6-serialization-helper","title":"6. Serialization Helper","text":"<p>Since the protocol uses packed structs, you can cast raw bytes directly, but be careful with endianness if crossing architectures (Standard is Big Endian for network fields).</p> <pre><code>// Example: Sending a packet\ntemplate&lt;typename Payload&gt;\nvoid send_packet(engine::INetworkPlugin* net, ClientId target, PacketType type, const Payload&amp; payload) {\n    std::vector&lt;uint8_t&gt; buffer(sizeof(PacketHeader) + sizeof(Payload));\n\n    PacketHeader header(static_cast&lt;uint8_t&gt;(type), sizeof(Payload), _seq_num++);\n    // TODO: Convert header fields to Big Endian if needed (htons/htonl)\n\n    std::memcpy(buffer.data(), &amp;header, sizeof(Header));\n    std::memcpy(buffer.data() + sizeof(Header), &amp;payload, sizeof(Payload));\n\n    net-&gt;send_to(engine::NetworkPacket(buffer), target);\n}\n</code></pre>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#7-todo-list-for-developer","title":"7. Todo List for Developer","text":"<ol> <li>[ ] Setup: Link <code>Server</code> executable with <code>Engine</code> and <code>PluginManager</code>.</li> <li>[ ] Network: Load <code>asio_network_plugin</code>.</li> <li>[ ] Lobby: Implement room logic (Waiting -&gt; Playing).</li> <li>[ ] Game Loop: Connect ECS <code>run_systems</code>.</li> <li>[ ] Replication: Implement <code>Snapshot</code> builder.</li> </ol>"},{"location":"SERVER_DEVELOPMENT_GUIDE/#8-common-pitfalls","title":"8. Common Pitfalls","text":"<ul> <li>Don't trust the client: Never accept position updates from clients. Only accept inputs (intent).</li> <li>Packet Fragmentation: UDP is packet-based, so fragmentation is less of an issue than TCP stream parsing, but ensure payloads don't exceed MTU (keep snapshots small or split them).</li> <li>Concurrency: The ECS is not thread-safe by default. Ensure network callbacks allow thread-safe queueing of events, or run network polling on the main thread.</li> </ul>"},{"location":"SETUP/","title":"Setup Guide","text":"<p>This guide will help you set up the Mirror R-Type project on your local machine.</p>"},{"location":"SETUP/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Prerequisites</li> <li>Platform-Specific Setup</li> <li>Linux</li> <li>macOS</li> <li>Windows</li> <li>Building the Project</li> <li>Running the Game</li> <li>Troubleshooting</li> </ul>"},{"location":"SETUP/#prerequisites","title":"Prerequisites","text":""},{"location":"SETUP/#required-tools","title":"Required Tools","text":"<ul> <li>CMake 3.20 or higher</li> <li>C++20 compatible compiler:</li> <li>GCC 12+ (Linux)</li> <li>Clang 15+ (macOS/Linux)</li> <li>MSVC 2022+ (Windows)</li> <li>Git</li> </ul>"},{"location":"SETUP/#vcpkg-package-manager","title":"vcpkg (Package Manager)","text":"<p>The project uses vcpkg for dependency management. It will be automatically set up during the build process.</p>"},{"location":"SETUP/#platform-specific-setup","title":"Platform-Specific Setup","text":""},{"location":"SETUP/#linux-debianubuntu","title":"Linux (Debian/Ubuntu)","text":""},{"location":"SETUP/#1-install-system-dependencies","title":"1. Install System Dependencies","text":"<pre><code>sudo apt-get update\nsudo apt-get install -y \\\n    build-essential \\\n    cmake \\\n    git \\\n    pkg-config \\\n    curl \\\n    zip \\\n    unzip \\\n    tar\n</code></pre>"},{"location":"SETUP/#2-install-compiler","title":"2. Install Compiler","text":"<pre><code># GCC 12+\nsudo apt-get install g++-12\n\n# Or Clang 15+\nsudo apt-get install clang-15\n</code></pre>"},{"location":"SETUP/#3-setup-vcpkg","title":"3. Setup vcpkg","text":"<pre><code>cd Mirror-R-Type\ngit clone https://github.com/Microsoft/vcpkg.git\ncd vcpkg\n./bootstrap-vcpkg.sh\ncd ..\n</code></pre>"},{"location":"SETUP/#4-build-the-project","title":"4. Build the Project","text":"<pre><code>cmake -B build\ncmake --build build -j$(nproc)\n</code></pre>"},{"location":"SETUP/#macos","title":"macOS","text":""},{"location":"SETUP/#1-install-homebrew","title":"1. Install Homebrew","text":"<p>If not already installed:</p> <pre><code>/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n</code></pre>"},{"location":"SETUP/#2-install-dependencies","title":"2. Install Dependencies","text":"<pre><code>brew install cmake git llvm\n</code></pre>"},{"location":"SETUP/#3-setup-vcpkg_1","title":"3. Setup vcpkg","text":"<pre><code>cd Mirror-R-Type\ngit clone https://github.com/Microsoft/vcpkg.git\ncd vcpkg\n./bootstrap-vcpkg.sh\ncd ..\n</code></pre>"},{"location":"SETUP/#4-build-the-project_1","title":"4. Build the Project","text":"<pre><code># Use Homebrew's clang\nexport CC=/opt/homebrew/opt/llvm/bin/clang\nexport CXX=/opt/homebrew/opt/llvm/bin/clang++\n\ncmake -B build\ncmake --build build -j$(sysctl -n hw.ncpu)\n</code></pre>"},{"location":"SETUP/#windows","title":"Windows","text":""},{"location":"SETUP/#1-install-visual-studio-2022","title":"1. Install Visual Studio 2022","text":"<p>Download and install Visual Studio 2022 with: - Desktop development with C++ - C++ CMake tools - Windows 10 SDK</p>"},{"location":"SETUP/#2-install-git","title":"2. Install Git","text":"<p>Download from git-scm.com</p>"},{"location":"SETUP/#3-setup-vcpkg_2","title":"3. Setup vcpkg","text":"<p>Open PowerShell or Developer Command Prompt:</p> <pre><code>cd Mirror-R-Type\ngit clone https://github.com/Microsoft/vcpkg.git\ncd vcpkg\n.\\bootstrap-vcpkg.bat\ncd ..\n</code></pre>"},{"location":"SETUP/#35-cmake-windows","title":"3.5 CMAKE Windows","text":"<pre><code>winget install --id Kitware.CMake -e\n</code></pre>"},{"location":"SETUP/#4-build-the-project_2","title":"4. Build the Project","text":"<pre><code>cmake -B build -G \"Visual Studio 17 2022\"\ncmake --build build --config Release\n</code></pre>"},{"location":"SETUP/#building-the-project","title":"Building the Project","text":""},{"location":"SETUP/#standard-build","title":"Standard Build","text":"<pre><code># Configure\ncmake -B build\n\n# Build\ncmake --build build\n\n# Build specific target\ncmake --build build --target r_type_client\ncmake --build build --target r_type_server\ncmake --build build --target asio_network\n</code></pre>"},{"location":"SETUP/#build-options","title":"Build Options","text":"<pre><code># Debug build\ncmake -B build -DCMAKE_BUILD_TYPE=Debug\ncmake --build build\n\n# Release build\ncmake -B build -DCMAKE_BUILD_TYPE=Release\ncmake --build build\n\n# Build without tests\ncmake -B build -DBUILD_TESTS=OFF\n\n# Build only server\ncmake -B build -DBUILD_CLIENT=OFF -DBUILD_SERVER=ON\n</code></pre>"},{"location":"SETUP/#clean-build","title":"Clean Build","text":"<pre><code>rm -rf build\ncmake -B build\ncmake --build build\n</code></pre>"},{"location":"SETUP/#running-the-game","title":"Running the Game","text":""},{"location":"SETUP/#start-the-server","title":"Start the Server","text":"<pre><code>./build/r_type_server\n</code></pre> <p>The server will start on port <code>8080</code> by default.</p>"},{"location":"SETUP/#start-the-client","title":"Start the Client","text":"<pre><code>./build/r_type_client\n</code></pre> <p>The client will connect to <code>localhost:8080</code> by default.</p>"},{"location":"SETUP/#command-line-options","title":"Command Line Options","text":"<pre><code># Server with custom port\n./build/r_type_server --port 9000\n\n# Client with custom server\n./build/r_type_client --host 192.168.1.100 --port 9000\n</code></pre>"},{"location":"SETUP/#troubleshooting","title":"Troubleshooting","text":""},{"location":"SETUP/#vcpkg-issues","title":"vcpkg Issues","text":""},{"location":"SETUP/#could-not-find-boost","title":"\"Could NOT find Boost\"","text":"<p>Solution: Ensure vcpkg is properly bootstrapped and retry:</p> <pre><code>cd vcpkg\ngit pull\n./bootstrap-vcpkg.sh  # or .bat on Windows\ncd ..\nrm -rf build\ncmake -B build\n</code></pre>"},{"location":"SETUP/#boost-takes-too-long-to-compile","title":"\"Boost takes too long to compile\"","text":"<p>vcpkg compiles Boost from source (10-20 minutes first time). This is normal. Subsequent builds are instant (cached).</p> <p>Alternatively, use system packages:</p> <pre><code># Linux\nsudo apt-get install libboost-all-dev\n\n# macOS\nbrew install boost\n\n# Then build without vcpkg\nrm -rf vcpkg vcpkg_installed\ncmake -B build\n</code></pre>"},{"location":"SETUP/#build-errors","title":"Build Errors","text":""},{"location":"SETUP/#cmake-version-too-old","title":"\"CMake version too old\"","text":"<p>Update CMake:</p> <pre><code># Linux\nsudo apt-get install cmake\n\n# macOS\nbrew upgrade cmake\n\n# Or download from cmake.org\n</code></pre>"},{"location":"SETUP/#compiler-does-not-support-c20","title":"\"Compiler does not support C++20\"","text":"<p>Update your compiler:</p> <pre><code># Linux - GCC\nsudo apt-get install g++-12\n\n# Linux - Clang\nsudo apt-get install clang-15\n\n# macOS\nbrew install llvm\n</code></pre>"},{"location":"SETUP/#runtime-errors","title":"Runtime Errors","text":""},{"location":"SETUP/#plugin-not-found","title":"\"Plugin not found\"","text":"<p>Ensure plugins are built and in the correct location:</p> <pre><code>ls build/plugins/\n# Should show: asio_network.so, raylib_graphics.so, miniaudio_audio.so\n</code></pre>"},{"location":"SETUP/#port-already-in-use","title":"\"Port already in use\"","text":"<p>Change the port:</p> <pre><code>./build/r_type_server --port 9000\n</code></pre> <p>Or find and kill the process using the port:</p> <pre><code># Linux/macOS\nsudo lsof -i :8080\nkill &lt;PID&gt;\n\n# Windows\nnetstat -ano | findstr :8080\ntaskkill /PID &lt;PID&gt; /F\n</code></pre>"},{"location":"SETUP/#graphics-issues","title":"Graphics Issues","text":""},{"location":"SETUP/#failed-to-initialize-window","title":"\"Failed to initialize window\"","text":"<p>On Linux, ensure you have X11 or Wayland:</p> <pre><code>sudo apt-get install libx11-dev libxrandr-dev libxinerama-dev libxcursor-dev\n</code></pre> <p>On WSL, you need an X server like VcXsrv.</p>"},{"location":"SETUP/#next-steps","title":"Next Steps","text":"<ul> <li>Read the Developer Guide to contribute</li> <li>Check out the Architecture Documentation</li> <li>Learn about Creating Plugins</li> </ul>"},{"location":"SETUP/#need-help","title":"Need Help?","text":"<ul> <li>Check existing GitHub Issues</li> <li>Contact the development team</li> </ul>"},{"location":"UDP_ACK_SYSTEM/","title":"UDP ACK System - R-Type Network Protocol","text":"<p>Status: Implementation Documentation Version: 1.0 Date: January 2026 Author: R-Type Development Team</p>"},{"location":"UDP_ACK_SYSTEM/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Introduction</li> <li>Why ACK over UDP?</li> <li>ACK System Architecture</li> <li>Implementation</li> <li>Data Flow</li> <li>Advantages and Trade-offs</li> <li>Metrics and Monitoring</li> </ol>"},{"location":"UDP_ACK_SYSTEM/#1-introduction","title":"1. Introduction","text":""},{"location":"UDP_ACK_SYSTEM/#11-context","title":"1.1 Context","text":"<p>The R-Type protocol uses UDP (User Datagram Protocol) for real-time gameplay communication. UDP, unlike TCP, is an unreliable protocol: it provides no guarantees about packet delivery, ordering, or duplicate detection.</p> <p>However, for certain critical data types in a multiplayer game, an acknowledgment (ACK) mechanism is required to: - Confirm reception of player inputs - Enable client-server state reconciliation - Detect packet loss - Optimize bandwidth utilization</p>"},{"location":"UDP_ACK_SYSTEM/#12-udp-challenges","title":"1.2 UDP Challenges","text":"<p>The main challenges with UDP: - Packet loss: Packets can be lost in transit - Out-of-order delivery: Packets can arrive in the wrong order - No acknowledgment: The sender doesn't know if the packet arrived - No flow control: No native mechanism to prevent congestion</p> <p>Our ACK system solves these problems while maintaining UDP's low latency.</p>"},{"location":"UDP_ACK_SYSTEM/#2-why-ack-over-udp","title":"2. Why ACK over UDP?","text":""},{"location":"UDP_ACK_SYSTEM/#21-real-time-gameplay-requirements","title":"2.1 Real-time Gameplay Requirements","text":"<p>In R-Type, we have two types of data:</p>"},{"location":"UDP_ACK_SYSTEM/#non-critical-data-loss-tolerant","title":"Non-critical data (loss-tolerant)","text":"<ul> <li>State snapshots: Sent at 60 Hz, losing one snapshot isn't critical since a new one arrives 16ms later</li> <li>Entity positions: Interpolated client-side, a missing position can be compensated</li> <li>Visual effects: Not essential to gameplay</li> </ul>"},{"location":"UDP_ACK_SYSTEM/#critical-data-requiring-confirmation","title":"Critical data (requiring confirmation)","text":"<ul> <li>Player inputs: Must be confirmed for client prediction</li> <li>Critical entity spawns: Bosses, important power-ups</li> <li>Score and progression: Must be reliable</li> <li>Important game events: Wave start/end, victory/defeat</li> </ul>"},{"location":"UDP_ACK_SYSTEM/#22-why-not-tcp","title":"2.2 Why not TCP?","text":"<p>TCP provides native ACKs, but: - Head-of-line blocking: A lost packet blocks all subsequent packets - Increased latency: Automatic retransmissions increase latency - Overhead: Larger headers (20 bytes vs 8 bytes for UDP) - No control: Can't choose which packets are critical</p> <p>Solution: UDP with selective acknowledgment provides the reliability benefits of TCP where needed while preserving UDP's low-latency characteristics.</p>"},{"location":"UDP_ACK_SYSTEM/#3-ack-system-architecture","title":"3. ACK System Architecture","text":""},{"location":"UDP_ACK_SYSTEM/#31-sequence-number-based-ack-system","title":"3.1 Sequence Number-Based ACK System","text":"<p>Our implementation uses an implicit ACK via piggybacking system:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              R-Type UDP ACK Architecture                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nCLIENT                                    SERVER\n  \u2502                                          \u2502\n  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n  \u2502  \u2502 CLIENT_INPUT            \u2502            \u2502\n  \u2502  \u2502 \u251c\u2500 sequence_number: 42  \u2502            \u2502\n  \u2502  \u2502 \u251c\u2500 input_flags: 0x05    \u2502            \u2502\n  \u2502  \u2502 \u2514\u2500 timestamp            \u2502            \u2502\n  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n  \u2502                                          \u2502\n  \u2502                               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502                               \u2502 Process input #42    \u2502\n  \u2502                               \u2502 Update game state    \u2502\n  \u2502                               \u2502 Store last_ack = 42  \u2502\n  \u2502                               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n  \u2502                                          \u2502\n  \u2502            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n  \u2502            \u2502 SERVER_SNAPSHOT         \u2502   \u2502\n  \u2502            \u2502 \u251c\u2500 entity_count         \u2502   \u2502\n  \u2502            \u2502 \u2514\u2500 entities[]           \u2502   \u2502\n  \u2502            \u2502    \u251c\u2500 player_id: 123    \u2502   \u2502\n  \u2502            \u2502    \u251c\u2500 position: (x,y)   \u2502   \u2502\n  \u2502            \u2502    \u2514\u2500 last_ack_seq: 42  \u2502&lt;---+ Implicit ACK\n  \u2502            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n  \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n  \u2502                                          \u2502\n  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n  \u2502  \u2502 Client receives ACK #42  \u2502            \u2502\n  \u2502  \u2502 \u2192 Confirms input handled \u2502            \u2502\n  \u2502  \u2502 \u2192 Can clean buffer       \u2502            \u2502\n  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n  \u2502                                          \u2502\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#32-key-components","title":"3.2 Key Components","text":""},{"location":"UDP_ACK_SYSTEM/#a-packetheader-all-packets","title":"A) PacketHeader (all packets)","text":"<p>Every UDP packet contains a monotonic sequence number:</p> <pre><code>struct PacketHeader {\n    uint8_t  version;          // Protocol version (0x01)\n    uint8_t  type;             // Packet type\n    uint8_t  flags;            // Flags (compression, etc.)\n    uint16_t payload_length;   // Payload size\n    uint32_t sequence_number;  // \u2190 Monotonic sequence for ordering\n    // ... optional compression fields\n} __attribute__((packed));\n</code></pre> <p>Usage: - Monotonic: Increments with each sent packet - Ordering: Allows detection of out-of-order packets - Loss detection: Gaps in sequence = packet loss</p>"},{"location":"UDP_ACK_SYSTEM/#b-clientinputpayload-player-inputs","title":"B) ClientInputPayload (player inputs)","text":"<pre><code>struct ClientInputPayload {\n    uint32_t sequence_number;  // \u2190 Input-specific sequence\n    uint16_t input_flags;      // Pressed buttons\n    uint32_t timestamp;        // Client timestamp\n    float    delta_time;       // Delta since last input\n} __attribute__((packed));\n</code></pre> <p>Usage: - Client increments <code>sequence_number</code> for each input sent - Server must ACK this sequence to confirm processing</p>"},{"location":"UDP_ACK_SYSTEM/#c-entitystate-state-snapshots","title":"C) EntityState (state snapshots)","text":"<pre><code>struct EntityState {\n    uint32_t entity_id;\n    uint16_t entity_type;\n    float    position_x;\n    float    position_y;\n    int16_t  velocity_x;\n    int16_t  velocity_y;\n    uint16_t health;\n    uint16_t flags;\n    uint32_t last_ack_sequence;  // \u2190 ACK of last processed input\n} __attribute__((packed));\n</code></pre> <p>Usage: - For player-controlled entities, <code>last_ack_sequence</code> contains the last processed input_sequence - Client compares this value with its pending inputs - If <code>last_ack_sequence &gt;= input.sequence</code>, the input is confirmed</p>"},{"location":"UDP_ACK_SYSTEM/#4-implementation","title":"4. Implementation","text":""},{"location":"UDP_ACK_SYSTEM/#41-client-side-clientpredictionsystem","title":"4.1 Client-Side (ClientPredictionSystem)","text":"<p>Files: - <code>src/r-type/client/include/systems/ClientPredictionSystem.hpp</code> - <code>src/r-type/client/src/systems/ClientPredictionSystem.cpp</code></p>"},{"location":"UDP_ACK_SYSTEM/#data-structure","title":"Data Structure","text":"<pre><code>class ClientPredictionSystem {\nprivate:\n    uint32_t local_player_id_;\n    uint32_t next_sequence_number_;  // Next sequence number\n    std::deque&lt;PredictedInput&gt; pending_inputs_;  // Buffer of unacknowledged inputs\n\n    static constexpr size_t MAX_PENDING_INPUTS = 64;\n};\n\nstruct PredictedInput {\n    uint32_t sequence_number;   // Unique sequence number\n    uint16_t input_flags;       // Copy of input flags\n    uint32_t timestamp;         // Send timestamp\n};\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#sending-input-with-sequence","title":"Sending Input with Sequence","text":"<pre><code>void ClientPredictionSystem::on_input_sent(uint16_t input_flags) {\n    // Create input with sequence\n    PredictedInput predicted = {\n        .sequence_number = next_sequence_number_++,\n        .input_flags = input_flags,\n        .timestamp = get_current_timestamp()\n    };\n\n    // Store in buffer (for future reconciliation)\n    pending_inputs_.push_back(predicted);\n\n    // Limit buffer size\n    if (pending_inputs_.size() &gt; MAX_PENDING_INPUTS) {\n        pending_inputs_.pop_front();\n    }\n\n    // Packet is sent by NetworkSystem with this sequence_number\n    // CLIENT_INPUT { sequence_number: predicted.sequence_number, ... }\n}\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#receiving-ack-from-server","title":"Receiving ACK from Server","text":"<pre><code>void ClientPredictionSystem::on_snapshot_received(\n    const SnapshotPayload&amp; snapshot\n) {\n    // Iterate through snapshot entities\n    for (const auto&amp; entity : snapshot.entities) {\n        // Find local player entity\n        if (entity.entity_id == local_player_id_) {\n            uint32_t acked_sequence = entity.last_ack_sequence;\n\n            // Confirm all inputs up to this sequence\n            acknowledge_input(acked_sequence);\n            break;\n        }\n    }\n}\n\nvoid ClientPredictionSystem::acknowledge_input(uint32_t ack_sequence) {\n    // Remove all confirmed inputs (\u2264 ack_sequence)\n    while (!pending_inputs_.empty() &amp;&amp;\n           pending_inputs_.front().sequence_number &lt;= ack_sequence) {\n        pending_inputs_.pop_front();\n    }\n\n    // Remaining inputs in pending_inputs_ are unacknowledged\n    // \u2192 Can be used for reconciliation if needed\n}\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#42-server-side-servernetworksystem","title":"4.2 Server-Side (ServerNetworkSystem)","text":"<p>Files: - <code>src/r-type/server/include/ServerNetworkSystem.hpp</code> - <code>src/r-type/server/src/ServerNetworkSystem.cpp</code></p>"},{"location":"UDP_ACK_SYSTEM/#data-structure_1","title":"Data Structure","text":"<pre><code>class ServerNetworkSystem {\nprivate:\n    // Tracking last processed input per player\n    std::unordered_map&lt;uint32_t, uint32_t&gt; last_processed_input_seq_;\n    // Key: player_id, Value: last processed input sequence\n};\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#processing-input-with-sequence","title":"Processing Input with Sequence","text":"<pre><code>void ServerNetworkSystem::on_input_received(\n    uint32_t player_id,\n    const ClientInputPayload&amp; input\n) {\n    uint32_t input_seq = input.sequence_number;\n\n    // Check if this input has already been processed (duplication)\n    if (input_seq &lt;= last_processed_input_seq_[player_id]) {\n        // Input already processed or old out-of-order \u2192 ignore\n        return;\n    }\n\n    // Process input (apply movement, shooting, etc.)\n    process_player_input(player_id, input);\n\n    // Update last processed input\n    last_processed_input_seq_[player_id] = input_seq;\n\n    // Next snapshot will automatically include this last_ack_sequence\n}\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#generating-snapshot-with-ack","title":"Generating Snapshot with ACK","text":"<pre><code>void ServerNetworkSystem::send_snapshot() {\n    SnapshotPayload snapshot;\n    snapshot.server_tick = current_tick_;\n\n    // For each game entity\n    for (const auto&amp; entity : game_entities_) {\n        EntityState state;\n        state.entity_id = entity.id;\n        state.position_x = entity.position.x;\n        state.position_y = entity.position.y;\n        // ... other fields ...\n\n        // If it's a player, include last_ack_sequence\n        if (entity.is_player()) {\n            uint32_t player_id = entity.get_player_id();\n            state.last_ack_sequence = last_processed_input_seq_[player_id];\n        } else {\n            state.last_ack_sequence = 0;  // Not applicable\n        }\n\n        snapshot.entities.push_back(state);\n    }\n\n    // Broadcast snapshot to all clients\n    broadcast_snapshot(snapshot);\n}\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#5-data-flow","title":"5. Data Flow","text":""},{"location":"UDP_ACK_SYSTEM/#51-normal-scenario-no-packet-loss","title":"5.1 Normal Scenario (no packet loss)","text":"<pre><code>Time  \u2502 Client (sequence)           \u2502 Server (last_ack)       \u2502 Network\n\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nt=0   \u2502 Send INPUT seq=100 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                         \u2502 [OK] Delivered\nt=16  \u2502                             \u2502 Process seq=100         \u2502\n      \u2502                             \u2502 last_ack[player] = 100  \u2502\nt=16  \u2502                             \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500 SNAPSHOT         \u2502 last_ack=100\nt=32  \u2502 Receive ACK(100)            \u2502                         \u2502\n      \u2502 \u2192 Confirm input 100         \u2502                         \u2502\n      \u2502 \u2192 Remove from pending       \u2502                         \u2502\n\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nt=33  \u2502 Send INPUT seq=101 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                         \u2502 [OK] Delivered\nt=49  \u2502                             \u2502 Process seq=101         \u2502\n      \u2502                             \u2502 last_ack[player] = 101  \u2502\nt=49  \u2502                             \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500 SNAPSHOT         \u2502 last_ack=101\nt=65  \u2502 Receive ACK(101)            \u2502                         \u2502\n      \u2502 \u2192 Confirm input 101         \u2502                         \u2502\n</code></pre> <p>Result: Input RTT \u2248 32-65ms (typical for 60 Hz updates)</p>"},{"location":"UDP_ACK_SYSTEM/#52-packet-loss-scenario","title":"5.2 Packet Loss Scenario","text":"<pre><code>Time  \u2502 Client (sequence)           \u2502 Server (last_ack)       \u2502 Network\n\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nt=0   \u2502 Send INPUT seq=200 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                         \u2502 [LOST]\n      \u2502 pending: [200]              \u2502                         \u2502\n\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nt=16  \u2502                             \u2502 No input received       \u2502\n      \u2502                             \u2502 last_ack[player] = 199  \u2502 (unchanged)\nt=16  \u2502                             \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500 SNAPSHOT         \u2502 last_ack=199\nt=32  \u2502 Receive ACK(199)            \u2502                         \u2502\n      \u2502 \u2192 Input 200 still pending   \u2502                         \u2502\n      \u2502 pending: [200]              \u2502                         \u2502\n\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nt=33  \u2502 Send INPUT seq=201 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                         \u2502 [OK] Delivered\n      \u2502 pending: [200, 201]         \u2502                         \u2502\nt=49  \u2502                             \u2502 Process seq=201         \u2502\n      \u2502                             \u2502 last_ack[player] = 201  \u2502 &lt;- Skip seq=200\nt=49  \u2502                             \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500 SNAPSHOT         \u2502 last_ack=201\nt=65  \u2502 Receive ACK(201)            \u2502                         \u2502\n      \u2502 \u2192 Confirm inputs \u2264 201      \u2502                         \u2502\n      \u2502 \u2192 Remove 200 AND 201        \u2502                         \u2502\n      \u2502 pending: []                 \u2502                         \u2502\n</code></pre> <p>Result: - Server processes seq=201 regardless of seq=200 loss - Client removes all inputs with sequence &lt;= 201 from pending buffer - Input seq=200 is permanently lost (acceptable trade-off for high-frequency input streams)</p>"},{"location":"UDP_ACK_SYSTEM/#53-out-of-order-delivery-scenario","title":"5.3 Out-of-Order Delivery Scenario","text":"<pre><code>Time  \u2502 Client (sequence)           \u2502 Server (last_ack)       \u2502 Network\n\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nt=0   \u2502 Send INPUT seq=300 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                         \u2502 [DELAYED]\nt=16  \u2502 Send INPUT seq=301 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                         \u2502 [OK] Fast path\n\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nt=20  \u2502                             \u2502 Receive seq=301 FIRST!  \u2502\n      \u2502                             \u2502 Process seq=301         \u2502\n      \u2502                             \u2502 last_ack = 301          \u2502\n\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nt=30  \u2502                             \u2502 Receive seq=300 (late)  \u2502\n      \u2502                             \u2502 \u2192 seq=300 &lt; last_ack    \u2502\n      \u2502                             \u2502 \u2192 REJECT (already past) \u2502\n\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nt=32  \u2502                             \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500 SNAPSHOT         \u2502 last_ack=301\nt=48  \u2502 Receive ACK(301)            \u2502                         \u2502\n      \u2502 \u2192 Confirm inputs \u2264 301      \u2502                         \u2502\n      \u2502 \u2192 Remove 300 and 301        \u2502                         \u2502\n</code></pre> <p>Result: - Server rejects stale out-of-order inputs - Duplicate processing is prevented - Client buffer cleanup proceeds correctly via last_ack</p>"},{"location":"UDP_ACK_SYSTEM/#6-advantages-and-trade-offs","title":"6. Advantages and Trade-offs","text":""},{"location":"UDP_ACK_SYSTEM/#61-advantages","title":"6.1 Advantages","text":""},{"location":"UDP_ACK_SYSTEM/#bandwidth-efficiency","title":"Bandwidth Efficiency","text":"<ul> <li>Piggybacking: ACK is embedded within state snapshots, eliminating dedicated acknowledgment packets</li> <li>Minimal overhead: 4 bytes per player entity (field already present in EntityState)</li> <li>No retransmissions: Unlike TCP, the protocol does not perform automatic retransmissions</li> </ul>"},{"location":"UDP_ACK_SYSTEM/#low-latency","title":"Low Latency","text":"<ul> <li>No head-of-line blocking: Each input packet is processed independently</li> <li>Asynchronous transmission: Client can send seq=N+1 before receiving ACK(N)</li> <li>Native UDP performance: Minimal processing overhead (~1-2ms compared to raw UDP)</li> </ul>"},{"location":"UDP_ACK_SYSTEM/#packet-loss-detection","title":"Packet Loss Detection","text":"<ul> <li>Sequence gap analysis: If ACK jumps from 100 to 103, packets 101-102 are identified as lost</li> <li>Metrics collection: Packet loss rate can be computed automatically</li> <li>Adaptive behavior: Protocol strategy can be adjusted based on observed loss rate</li> </ul>"},{"location":"UDP_ACK_SYSTEM/#client-server-reconciliation","title":"Client-Server Reconciliation","text":"<ul> <li>Client-side prediction: Inputs are applied locally for immediate responsiveness</li> <li>Server confirmation: ACK validates that server state matches client expectations</li> <li>Divergence correction: State mismatches are corrected using authoritative server snapshots</li> </ul>"},{"location":"UDP_ACK_SYSTEM/#62-trade-offs","title":"6.2 Trade-offs","text":""},{"location":"UDP_ACK_SYSTEM/#no-delivery-guarantee","title":"No Delivery Guarantee","text":"<ul> <li>Lost inputs: A lost input packet is not recovered</li> <li>Mitigation: High input frequency (60 Hz) renders single input loss negligible</li> <li>Impact: Players may experience brief input lag if multiple consecutive packets are lost</li> </ul>"},{"location":"UDP_ACK_SYSTEM/#ack-delay","title":"ACK Delay","text":"<ul> <li>Latency: ACK is delivered with the next snapshot (~16-33ms at 60-30 Hz update rate)</li> <li>No immediate acknowledgment: Unlike TCP, instant ACK is not provided</li> <li>Design rationale: Immediate ACK is sacrificed to reduce packet count</li> </ul>"},{"location":"UDP_ACK_SYSTEM/#out-of-order-handling","title":"Out-of-Order Handling","text":"<ul> <li>Rejection policy: Stale out-of-order inputs are discarded</li> <li>Consequence: Delayed inputs may be lost even upon arrival</li> <li>Justification: At 60 Hz tick rate, an input delayed by 50ms provides no gameplay value</li> </ul>"},{"location":"UDP_ACK_SYSTEM/#7-metrics-and-monitoring","title":"7. Metrics and Monitoring","text":""},{"location":"UDP_ACK_SYSTEM/#71-client-side-metrics","title":"7.1 Client-Side Metrics","text":""},{"location":"UDP_ACK_SYSTEM/#pending-inputs","title":"Pending Inputs","text":"<pre><code>size_t pending_count = pending_inputs_.size();\n\nif (pending_count &gt; 30) {\n    // WARNING: More than 30 unacknowledged inputs\n    // \u2192 Probable network issues or server lag\n    display_warning(\"High latency detected\");\n}\n\nif (pending_count &gt; 60) {\n    // CRITICAL: Buffer full\n    // \u2192 Connection timeout probable\n    disconnect_with_error(\"Connection lost\");\n}\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#input-acknowledgment-delay","title":"Input Acknowledgment Delay","text":"<pre><code>uint32_t input_rtt_ms = current_time - pending_inputs_.front().timestamp;\n\nif (input_rtt_ms &gt; 200) {\n    // Input ACK takes more than 200ms\n    // \u2192 Display lag indicator\n    show_lag_indicator();\n}\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#packet-loss-rate","title":"Packet Loss Rate","text":"<pre><code>uint32_t total_inputs_sent = 0;\nuint32_t total_inputs_acked = 0;\n\nvoid on_input_sent() { total_inputs_sent++; }\nvoid on_ack_received(uint32_t ack_seq) {\n    // Count how many inputs were ACKed\n    total_inputs_acked++;\n}\n\nfloat packet_loss_rate = 1.0f - (float(total_inputs_acked) / total_inputs_sent);\n// Example: 0.023 = 2.3% packet loss\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#72-server-side-metrics","title":"7.2 Server-Side Metrics","text":""},{"location":"UDP_ACK_SYSTEM/#input-reception-rate","title":"Input Reception Rate","text":"<pre><code>std::unordered_map&lt;uint32_t, uint32_t&gt; inputs_received_per_player;\nstd::unordered_map&lt;uint32_t, uint32_t&gt; last_input_time_per_player;\n\nvoid on_input_received(uint32_t player_id) {\n    inputs_received_per_player[player_id]++;\n    last_input_time_per_player[player_id] = current_time_ms();\n}\n\nvoid check_player_timeout() {\n    for (const auto&amp; [player_id, last_time] : last_input_time_per_player) {\n        uint32_t silence_duration = current_time_ms() - last_time;\n\n        if (silence_duration &gt; 10000) {  // 10 seconds\n            // No input for 10s \u2192 Disconnect\n            disconnect_player(player_id, \"Timeout\");\n        } else if (silence_duration &gt; 5000) {\n            // 5 seconds \u2192 Warning\n            log_warning(\"Player {} inactive for 5s\", player_id);\n        }\n    }\n}\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#sequence-gap-detection","title":"Sequence Gap Detection","text":"<pre><code>void on_input_received(uint32_t player_id, uint32_t input_seq) {\n    uint32_t expected_seq = last_processed_input_seq_[player_id] + 1;\n\n    if (input_seq &gt; expected_seq) {\n        uint32_t gap = input_seq - expected_seq;\n\n        // Log packet loss\n        log_info(\"Player {} lost {} inputs (seq {}-{})\",\n                 player_id, gap, expected_seq, input_seq - 1);\n\n        // Statistics\n        packet_loss_stats_[player_id] += gap;\n    }\n}\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#73-logging-and-debugging","title":"7.3 Logging and Debugging","text":""},{"location":"UDP_ACK_SYSTEM/#recommended-log-format","title":"Recommended Log Format","text":"<pre><code>[Client] INPUT_SENT    seq=12345 flags=0x05 ts=1234567890\n[Client] ACK_RECEIVED  seq=12340 (5 inputs pending)\n[Server] INPUT_RECV    player=1 seq=12345 (gap=0)\n[Server] INPUT_PROCESS player=1 seq=12345 last_ack=12345\n[Server] SNAPSHOT_SENT tick=6789 entities=20 (player1_ack=12345)\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#debug-visualization-optional","title":"Debug Visualization (optional)","text":"<pre><code>Client Sequence Timeline:\n[100][101][102][X][104][105][106]  &lt;- X = packet lost\n       ^                    ^\n       +-- ACK(101)         +-- ACK(106) -&gt; clears all &lt;=106\n\nServer Processed Sequence:\n[100][101][102][  ][104][105][106]  &lt;- Gap detected between 102-104\n                    ^\n                    +-- Server continues with seq=104\n</code></pre>"},{"location":"UDP_ACK_SYSTEM/#8-comparison-with-other-approaches","title":"8. Comparison with Other Approaches","text":""},{"location":"UDP_ACK_SYSTEM/#81-tcp-reliable-stream","title":"8.1 TCP (Reliable Stream)","text":"Criteria TCP R-Type UDP ACK Delivery guarantee Yes No (acceptable for use case) Order guarantee Yes No (stale inputs rejected) Latency Variable (retransmissions) Consistent and low Head-of-line blocking Present Absent Header overhead ~20 bytes 8 bytes Congestion control Automatic Manual (if required) <p>Analysis: The UDP ACK approach provides superior performance characteristics for real-time gameplay scenarios.</p>"},{"location":"UDP_ACK_SYSTEM/#82-quic-udp-with-reliable-streams","title":"8.2 QUIC (UDP with Reliable Streams)","text":"Criteria QUIC R-Type UDP ACK Implementation complexity High (cryptography, streams) Low Latency Low Low Multiplexed streams Supported Not required Header overhead ~30-50 bytes 9-13 bytes Target domain Web transport standard Gaming-specific <p>Analysis: QUIC introduces unnecessary complexity for this use case. The additional features (TLS 1.3, stream multiplexing) are not required for game input acknowledgment.</p>"},{"location":"UDP_ACK_SYSTEM/#83-enet-gaming-library","title":"8.3 ENet (Gaming Library)","text":"Criteria ENet R-Type UDP ACK Reliable channels Full support Partial (implicit ACK) Sequenced channels Supported Supported (sequence numbers) Unsequenced channels Supported Supported (events) Header overhead ~8-12 bytes 9-13 bytes External dependency Required None (custom implementation) <p>Analysis: The R-Type implementation provides functionality comparable to ENet while being specifically optimized for the game's requirements without external dependencies.</p>"},{"location":"UDP_ACK_SYSTEM/#9-conclusion","title":"9. Conclusion","text":""},{"location":"UDP_ACK_SYSTEM/#91-summary","title":"9.1 Summary","text":"<p>The R-Type UDP ACK system implements an implicit acknowledgment mechanism via piggybacking with the following characteristics:</p> <ul> <li>Uses <code>sequence_number</code> fields for input ordering and tracking</li> <li>Embeds <code>last_ack_sequence</code> within state snapshots, eliminating dedicated ACK packets</li> <li>Enables detection of packet loss and out-of-order delivery</li> <li>Supports client-side prediction and server-authoritative reconciliation</li> <li>Maintains low latency while optimizing bandwidth utilization</li> </ul>"},{"location":"UDP_ACK_SYSTEM/#92-key-advantages","title":"9.2 Key Advantages","text":"<ol> <li>Efficient: No network overhead (ACK in existing snapshot)</li> <li>Low latency: No blocking, independent inputs</li> <li>Robust: Packet loss and timeout detection</li> <li>Simple: Clear and maintainable implementation</li> </ol>"},{"location":"UDP_ACK_SYSTEM/#93-acceptable-limitations","title":"9.3 Acceptable Limitations","text":"<ol> <li>No delivery guarantee: A lost input is lost (OK @ 60 Hz)</li> <li>ACK delay: ~16-33ms depending on snapshot rate (acceptable)</li> <li>Out-of-order rejection: Old inputs rejected (OK for real-time)</li> </ol>"},{"location":"UDP_ACK_SYSTEM/#94-applicability","title":"9.4 Applicability","text":"<p>Recommended use cases: - Real-time action games (shooters, racing, fighting games) - Applications requiring low latency with high update frequency - Systems tolerant to occasional data loss</p> <p>Not recommended for: - Chat or messaging systems (reliable channels preferred) - File transfers (TCP recommended) - Critical transactions (TCP with explicit acknowledgment required)</p>"},{"location":"UDP_ACK_SYSTEM/#10-references","title":"10. References","text":""},{"location":"UDP_ACK_SYSTEM/#101-source-files","title":"10.1 Source Files","text":"<ul> <li>Protocol definition: <code>src/r-type/shared/protocol/PacketHeader.hpp</code></li> <li>Payloads: <code>src/r-type/shared/protocol/Payloads.hpp</code></li> <li>Client prediction: <code>src/r-type/client/src/systems/ClientPredictionSystem.cpp</code></li> <li>Server network: <code>src/r-type/server/src/ServerNetworkSystem.cpp</code></li> </ul>"},{"location":"UDP_ACK_SYSTEM/#102-related-documentation","title":"10.2 Related Documentation","text":"<ul> <li>PROTOCOL.md - Complete protocol specification</li> <li>CLIENT_ARCHITECTURE.md - Client architecture</li> <li>SERVER_ARCHITECTURE.md - Server architecture</li> </ul>"},{"location":"UDP_ACK_SYSTEM/#103-external-resources","title":"10.3 External Resources","text":"<ul> <li>Gaffer on Games - Networked Physics</li> <li>Valve - Latency Compensating Methods</li> <li>Glenn Fiedler - UDP vs TCP</li> </ul> <p>Document written by R-Type Development Team Last updated: January 2026 Version: 1.0</p>"},{"location":"WAVE_CONFIGURATION_GUIDE/","title":"Wave Configuration Guide - Pattern 2-Chunks","text":"<p>Ce guide explique comment configurer les waves (vagues d'ennemis) pour les nouvelles maps du jeu R-Type.</p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#table-des-matieres","title":"Table des Mati\u00e8res","text":"<ol> <li>Vue d'Ensemble</li> <li>Syst\u00e8me de Chunks</li> <li>Pattern Standard: 2-Chunks</li> <li>Structure JSON des Waves</li> <li>Composition des Ennemis par Difficult\u00e9</li> <li>Configuration du Boss</li> <li>Exemples Complets</li> <li>Validation</li> </ol>"},{"location":"WAVE_CONFIGURATION_GUIDE/#vue-densemble","title":"Vue d'Ensemble","text":"<p>Le syst\u00e8me de waves de R-Type est bas\u00e9 sur un d\u00e9clenchement par chunks (morceaux de carte) et non plus par distance de scroll absolue.</p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#concepts-cles","title":"Concepts Cl\u00e9s","text":"<ul> <li>Chunk: Unit\u00e9 de base de la carte (1 chunk = 480 pixels = 30 tuiles \u00d7 16px)</li> <li>ChunkId: Position du chunk sur la carte (0-indexed)</li> <li>Offset: Position relative dans le chunk (0.0 = d\u00e9but, 1.0 = fin)</li> <li>Wave: Vague d'ennemis d\u00e9clench\u00e9e \u00e0 une position de chunk pr\u00e9cise</li> <li>Phase: Groupe de waves avec une difficult\u00e9 coh\u00e9rente (easy/medium/hard)</li> </ul>"},{"location":"WAVE_CONFIGURATION_GUIDE/#systeme-de-chunks","title":"Syst\u00e8me de Chunks","text":""},{"location":"WAVE_CONFIGURATION_GUIDE/#dimensions","title":"Dimensions","text":"<pre><code>1 chunk = 480 pixels\n1 tuile = 16 pixels\n1 chunk = 30 tuiles\n</code></pre>"},{"location":"WAVE_CONFIGURATION_GUIDE/#calcul-de-position","title":"Calcul de Position","text":"<p>Pour calculer la distance de scroll d'un chunk:</p> <pre><code>scroll_distance = chunkId \u00d7 480\n</code></pre> <p>Exemples: - Chunk 0: 0 pixels - Chunk 2: 960 pixels - Chunk 10: 4800 pixels - Chunk 20: 9600 pixels (fin de niveau standard)</p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#chunkid-offset","title":"ChunkId + Offset","text":"<p>Le trigger d'une wave utilise <code>chunkId</code> (entier) + <code>offset</code> (d\u00e9cimal):</p> <pre><code>{\n  \"chunkId\": 4,\n  \"offset\": 0.0\n}\n</code></pre> <ul> <li><code>offset: 0.0</code> \u2192 D\u00e9but du chunk (position exacte = 4 \u00d7 480 = 1920px)</li> <li><code>offset: 0.5</code> \u2192 Milieu du chunk (position exacte = 1920 + 240 = 2160px)</li> <li><code>offset: 1.0</code> \u2192 Fin du chunk (position exacte = 1920 + 480 = 2400px)</li> </ul>"},{"location":"WAVE_CONFIGURATION_GUIDE/#pattern-standard-2-chunks","title":"Pattern Standard: 2-Chunks","text":""},{"location":"WAVE_CONFIGURATION_GUIDE/#regle-officielle","title":"R\u00e8gle Officielle","text":"<p>Chaque level doit avoir des waves espac\u00e9es de 2 chunks.</p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#configuration-standard-20-chunks-total","title":"Configuration Standard (20 chunks total)","text":"<p>Pour un niveau avec 20 chunks:</p> Wave ChunkId Scroll Distance Position 1 0 0 px D\u00e9but 2 2 960 px 3 4 1920 px 4 6 2880 px 5 8 3840 px 6 10 4800 px 7 12 5760 px 8 14 6720 px 9 16 7680 px 10 18 8640 px Derni\u00e8re Boss N/A 9600 px Apr\u00e8s chunk 20"},{"location":"WAVE_CONFIGURATION_GUIDE/#avantages-du-pattern-2-chunks","title":"Avantages du Pattern 2-Chunks","text":"<p>\u2713 Rythme r\u00e9gulier et pr\u00e9visible \u2713 10 waves par niveau = bon \u00e9quilibre gameplay \u2713 Temps de pr\u00e9paration constant entre waves \u2713 Facile \u00e0 tester et d\u00e9bugger</p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#structure-json-des-waves","title":"Structure JSON des Waves","text":""},{"location":"WAVE_CONFIGURATION_GUIDE/#template-de-wave","title":"Template de Wave","text":"<pre><code>{\n  \"wave_number\": 1,\n  \"trigger\": {\n    \"chunkId\": 0,\n    \"offset\": 0.0,\n    \"timeDelay\": 0\n  },\n  \"spawns\": [\n    {\n      \"type\": \"enemy\",\n      \"enemyType\": \"basic\",\n      \"positionX\": 2100,\n      \"positionY\": 300,\n      \"count\": 3,\n      \"pattern\": \"line\",\n      \"spacing\": 120\n    },\n    {\n      \"type\": \"powerup\",\n      \"bonusType\": \"health\",\n      \"positionX\": 2300,\n      \"positionY\": 540,\n      \"count\": 1,\n      \"pattern\": \"single\"\n    }\n  ]\n}\n</code></pre>"},{"location":"WAVE_CONFIGURATION_GUIDE/#champs-obligatoires","title":"Champs Obligatoires","text":""},{"location":"WAVE_CONFIGURATION_GUIDE/#wave_number-integer","title":"wave_number (integer)","text":"<ul> <li>Num\u00e9ro s\u00e9quentiel de la wave (1, 2, 3...)</li> <li>IMPORTANT: Doit \u00eatre unique et s\u00e9quentiel</li> <li>Utilis\u00e9 pour le tracking c\u00f4t\u00e9 serveur/client</li> </ul>"},{"location":"WAVE_CONFIGURATION_GUIDE/#trigger-object","title":"trigger (object)","text":"<ul> <li>chunkId (integer): Position du chunk (0-19 pour 20 chunks)</li> <li>offset (float): Position dans le chunk (0.0-1.0)</li> <li>timeDelay (integer): D\u00e9lai suppl\u00e9mentaire en secondes (g\u00e9n\u00e9ralement 0)</li> </ul>"},{"location":"WAVE_CONFIGURATION_GUIDE/#spawns-array","title":"spawns (array)","text":"<ul> <li>Liste des entit\u00e9s \u00e0 faire appara\u00eetre dans cette wave</li> <li>Peut contenir des ennemis et des powerups</li> <li>Au moins 1 spawn requis</li> </ul>"},{"location":"WAVE_CONFIGURATION_GUIDE/#types-de-spawns","title":"Types de Spawns","text":""},{"location":"WAVE_CONFIGURATION_GUIDE/#enemy-spawn","title":"Enemy Spawn","text":"<pre><code>{\n  \"type\": \"enemy\",\n  \"enemyType\": \"basic|zigzag|bouncer|tank|kamikaze\",\n  \"positionX\": 2100,\n  \"positionY\": 300,\n  \"count\": 3,\n  \"pattern\": \"line|grid|formation|random|single\",\n  \"spacing\": 120\n}\n</code></pre> <p>Enemy Types Disponibles: - <code>basic</code>: Ennemi standard, d\u00e9placement lin\u00e9aire - <code>zigzag</code>: D\u00e9placement en zigzag vertical - <code>bouncer</code>: Rebondit sur les bords de l'\u00e9cran - <code>tank</code>: Ennemi lent mais r\u00e9sistant - <code>kamikaze</code>: Fonce sur le joueur</p> <p>Patterns de Spawn: - <code>single</code>: 1 seul ennemi (ignore count/spacing) - <code>line</code>: Ligne verticale d'ennemis - <code>grid</code>: Grille 2D (n\u00e9cessite spacing horizontal/vertical) - <code>formation</code>: Formation pr\u00e9d\u00e9finie - <code>random</code>: Positions al\u00e9atoires dans une zone</p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#powerup-spawn","title":"Powerup Spawn","text":"<pre><code>{\n  \"type\": \"powerup\",\n  \"bonusType\": \"health|shield|speed|firepower\",\n  \"positionX\": 2300,\n  \"positionY\": 540,\n  \"count\": 1,\n  \"pattern\": \"single\"\n}\n</code></pre> <p>Bonus Types: - <code>health</code>: Restaure la sant\u00e9 - <code>shield</code>: Bouclier temporaire - <code>speed</code>: Augmente la vitesse - <code>firepower</code>: Am\u00e9liore les tirs</p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#composition-des-ennemis-par-difficulte","title":"Composition des Ennemis par Difficult\u00e9","text":""},{"location":"WAVE_CONFIGURATION_GUIDE/#phase-1-easy-waves-1-3-chunks-0-4","title":"Phase 1: Easy (Waves 1-3, Chunks 0-4)","text":"<p>Objectif: Introduction progressive, peu de menace</p> <p>Recommandations: - Majoritairement <code>basic</code> (60-80%) - Quelques <code>zigzag</code> pour vari\u00e9t\u00e9 (20-30%) - 1 powerup <code>health</code> dans wave 3</p> <p>Exemple Wave 1: <pre><code>{\n  \"wave_number\": 1,\n  \"trigger\": {\"chunkId\": 0, \"offset\": 0.0, \"timeDelay\": 0},\n  \"spawns\": [\n    {\n      \"type\": \"enemy\",\n      \"enemyType\": \"basic\",\n      \"positionX\": 2100,\n      \"positionY\": 300,\n      \"count\": 3,\n      \"pattern\": \"line\",\n      \"spacing\": 150\n    }\n  ]\n}\n</code></pre></p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#phase-2-medium-waves-4-7-chunks-6-12","title":"Phase 2: Medium (Waves 4-7, Chunks 6-12)","text":"<p>Objectif: Mont\u00e9e en difficult\u00e9, introduction ennemis avanc\u00e9s</p> <p>Recommandations: - Mix <code>zigzag</code>, <code>bouncer</code>, <code>tank</code> - Premi\u00e8res apparitions de <code>kamikaze</code> - Powerups strat\u00e9giques (<code>shield</code>, <code>speed</code>) - Spawns multiples dans une wave (2-3 groupes)</p> <p>Exemple Wave 5: <pre><code>{\n  \"wave_number\": 5,\n  \"trigger\": {\"chunkId\": 8, \"offset\": 0.0, \"timeDelay\": 0},\n  \"spawns\": [\n    {\n      \"type\": \"enemy\",\n      \"enemyType\": \"tank\",\n      \"positionX\": 2100,\n      \"positionY\": 250,\n      \"count\": 2,\n      \"pattern\": \"line\",\n      \"spacing\": 280\n    },\n    {\n      \"type\": \"enemy\",\n      \"enemyType\": \"bouncer\",\n      \"positionX\": 2200,\n      \"positionY\": 600,\n      \"count\": 3,\n      \"pattern\": \"line\",\n      \"spacing\": 130\n    },\n    {\n      \"type\": \"powerup\",\n      \"bonusType\": \"shield\",\n      \"positionX\": 2300,\n      \"positionY\": 450,\n      \"count\": 1,\n      \"pattern\": \"single\"\n    }\n  ]\n}\n</code></pre></p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#phase-3-hard-waves-8-10-chunks-14-18","title":"Phase 3: Hard (Waves 8-10, Chunks 14-18)","text":"<p>Objectif: Difficult\u00e9 maximale, pr\u00e9paration au boss</p> <p>Recommandations: - Beaucoup de <code>tank</code>, <code>kamikaze</code>, <code>bouncer</code> - Spawns multiples et simultan\u00e9s (3-4 groupes) - Powerups rares mais puissants - Dernier powerup <code>health</code> dans wave 10 (avant boss)</p> <p>Exemple Wave 10: <pre><code>{\n  \"wave_number\": 10,\n  \"trigger\": {\"chunkId\": 18, \"offset\": 0.0, \"timeDelay\": 0},\n  \"spawns\": [\n    {\n      \"type\": \"enemy\",\n      \"enemyType\": \"tank\",\n      \"positionX\": 2100,\n      \"positionY\": 300,\n      \"count\": 3,\n      \"pattern\": \"line\",\n      \"spacing\": 180\n    },\n    {\n      \"type\": \"enemy\",\n      \"enemyType\": \"bouncer\",\n      \"positionX\": 2200,\n      \"positionY\": 150,\n      \"count\": 4,\n      \"pattern\": \"line\",\n      \"spacing\": 140\n    },\n    {\n      \"type\": \"enemy\",\n      \"enemyType\": \"kamikaze\",\n      \"positionX\": 2300,\n      \"positionY\": 750,\n      \"count\": 3,\n      \"pattern\": \"line\",\n      \"spacing\": 120\n    },\n    {\n      \"type\": \"powerup\",\n      \"bonusType\": \"health\",\n      \"positionX\": 2400,\n      \"positionY\": 540,\n      \"count\": 1,\n      \"pattern\": \"single\"\n    }\n  ]\n}\n</code></pre></p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#configuration-du-boss","title":"Configuration du Boss","text":""},{"location":"WAVE_CONFIGURATION_GUIDE/#spawn-distance-standard","title":"Spawn Distance Standard","text":"<p>Le boss doit toujours spawn apr\u00e8s le chunk 20:</p> <pre><code>\"boss\": {\n  \"boss_name\": \"Nom du Boss\",\n  \"spawn_scroll_distance\": 9600.0,\n  \"spawn_position_x\": 1600.0,\n  \"spawn_position_y\": 540.0,\n  \"enemy_type\": \"boss\",\n  \"total_phases\": 3,\n  \"script_path\": \"boss/boss_script.lua\",\n  \"phases\": [...]\n}\n</code></pre>"},{"location":"WAVE_CONFIGURATION_GUIDE/#calcul-de-spawn_scroll_distance","title":"Calcul de spawn_scroll_distance","text":"<pre><code>spawn_scroll_distance = (total_chunks) \u00d7 480\n                      = 20 \u00d7 480\n                      = 9600.0 pixels\n</code></pre>"},{"location":"WAVE_CONFIGURATION_GUIDE/#position-de-spawn-recommandee","title":"Position de Spawn Recommand\u00e9e","text":"<ul> <li>spawn_position_x: 1600.0 (centre-droit de l'\u00e9cran)</li> <li>spawn_position_y: 540.0 (centre vertical, \u00e9cran 1920\u00d71080)</li> </ul>"},{"location":"WAVE_CONFIGURATION_GUIDE/#phases-du-boss","title":"Phases du Boss","text":"<p>Chaque boss a g\u00e9n\u00e9ralement 3 phases bas\u00e9es sur le seuil de sant\u00e9:</p> <pre><code>\"phases\": [\n  {\n    \"phase_number\": 1,\n    \"health_threshold\": 1.0,     // 100% \u2192 66% HP\n    \"movement_pattern\": \"vertical_sine\",\n    \"movement_speed_multiplier\": 1.0,\n    \"attack_patterns\": [...]\n  },\n  {\n    \"phase_number\": 2,\n    \"health_threshold\": 0.66,    // 66% \u2192 33% HP\n    \"movement_pattern\": \"figure_eight\",\n    \"movement_speed_multiplier\": 1.3,\n    \"attack_patterns\": [...]\n  },\n  {\n    \"phase_number\": 3,\n    \"health_threshold\": 0.33,    // 33% \u2192 0% HP\n    \"movement_pattern\": \"chase_player\",\n    \"movement_speed_multiplier\": 1.6,\n    \"attack_patterns\": [...]\n  }\n]\n</code></pre>"},{"location":"WAVE_CONFIGURATION_GUIDE/#exemples-complets","title":"Exemples Complets","text":""},{"location":"WAVE_CONFIGURATION_GUIDE/#exemple-level-structure-minimale","title":"Exemple: Level Structure Minimale","text":"<pre><code>{\n  \"level_id\": 3,\n  \"level_name\": \"Nom du Niveau\",\n  \"level_description\": \"Description courte\",\n  \"map_id\": 3,\n  \"base_scroll_speed\": 70.0,\n  \"total_chunks\": 20,\n  \"phases\": [\n    {\n      \"phase_number\": 1,\n      \"phase_name\": \"Phase Easy\",\n      \"scroll_start\": 0.0,\n      \"scroll_end\": 2400.0,\n      \"difficulty\": \"easy\",\n      \"waves\": [\n        {\n          \"wave_number\": 1,\n          \"trigger\": {\"chunkId\": 0, \"offset\": 0.0, \"timeDelay\": 0},\n          \"spawns\": [...]\n        },\n        {\n          \"wave_number\": 2,\n          \"trigger\": {\"chunkId\": 2, \"offset\": 0.0, \"timeDelay\": 0},\n          \"spawns\": [...]\n        },\n        {\n          \"wave_number\": 3,\n          \"trigger\": {\"chunkId\": 4, \"offset\": 0.0, \"timeDelay\": 0},\n          \"spawns\": [...]\n        }\n      ]\n    },\n    {\n      \"phase_number\": 2,\n      \"phase_name\": \"Phase Medium\",\n      \"scroll_start\": 2400.0,\n      \"scroll_end\": 6240.0,\n      \"difficulty\": \"medium\",\n      \"waves\": [\n        {\n          \"wave_number\": 4,\n          \"trigger\": {\"chunkId\": 6, \"offset\": 0.0, \"timeDelay\": 0},\n          \"spawns\": [...]\n        },\n        {\n          \"wave_number\": 5,\n          \"trigger\": {\"chunkId\": 8, \"offset\": 0.0, \"timeDelay\": 0},\n          \"spawns\": [...]\n        },\n        {\n          \"wave_number\": 6,\n          \"trigger\": {\"chunkId\": 10, \"offset\": 0.0, \"timeDelay\": 0},\n          \"spawns\": [...]\n        },\n        {\n          \"wave_number\": 7,\n          \"trigger\": {\"chunkId\": 12, \"offset\": 0.0, \"timeDelay\": 0},\n          \"spawns\": [...]\n        }\n      ]\n    },\n    {\n      \"phase_number\": 3,\n      \"phase_name\": \"Phase Hard\",\n      \"scroll_start\": 6240.0,\n      \"scroll_end\": 9600.0,\n      \"difficulty\": \"hard\",\n      \"waves\": [\n        {\n          \"wave_number\": 8,\n          \"trigger\": {\"chunkId\": 14, \"offset\": 0.0, \"timeDelay\": 0},\n          \"spawns\": [...]\n        },\n        {\n          \"wave_number\": 9,\n          \"trigger\": {\"chunkId\": 16, \"offset\": 0.0, \"timeDelay\": 0},\n          \"spawns\": [...]\n        },\n        {\n          \"wave_number\": 10,\n          \"trigger\": {\"chunkId\": 18, \"offset\": 0.0, \"timeDelay\": 0},\n          \"spawns\": [...]\n        }\n      ]\n    }\n  ],\n  \"boss\": {\n    \"boss_name\": \"Boss Name\",\n    \"spawn_scroll_distance\": 9600.0,\n    \"spawn_position_x\": 1600.0,\n    \"spawn_position_y\": 540.0,\n    \"enemy_type\": \"boss\",\n    \"total_phases\": 3,\n    \"script_path\": \"boss/boss_script.lua\",\n    \"phases\": [...]\n  }\n}\n</code></pre>"},{"location":"WAVE_CONFIGURATION_GUIDE/#checklist-pour-nouveau-niveau","title":"Checklist pour Nouveau Niveau","text":"<ul> <li>[ ] <code>level_id</code> unique</li> <li>[ ] <code>total_chunks: 20</code></li> <li>[ ] <code>base_scroll_speed</code> adapt\u00e9 (50-80)</li> <li>[ ] 3 phases (easy/medium/hard)</li> <li>[ ] 10 waves exactement (chunkIds: 0,2,4,6,8,10,12,14,16,18)</li> <li>[ ] <code>wave_number</code> s\u00e9quentiel (1-10)</li> <li>[ ] Powerups r\u00e9partis strat\u00e9giquement (1 par phase minimum)</li> <li>[ ] Boss \u00e0 <code>spawn_scroll_distance: 9600.0</code></li> <li>[ ] Boss script Lua existant dans <code>assets/scripts/boss/</code></li> </ul>"},{"location":"WAVE_CONFIGURATION_GUIDE/#validation","title":"Validation","text":""},{"location":"WAVE_CONFIGURATION_GUIDE/#validation-syntaxe-json","title":"Validation Syntaxe JSON","text":"<p>Avant de tester dans le jeu, valider la syntaxe JSON:</p> <pre><code>python3 -m json.tool src/r-type/assets/levels/level_X.json &gt; /dev/null\n</code></pre> <p>Si aucune erreur, le fichier est valide.</p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#validation-logique","title":"Validation Logique","text":"<p>V\u00e9rifier: 1. ChunkIds en ordre croissant (0,2,4,6...) 2. Tous les offset \u00e0 0.0 (pattern strict) 3. Wave numbers s\u00e9quentiels (1,2,3...) 4. EnemyTypes existent (basic, zigzag, bouncer, tank, kamikaze) 5. Powerup dans au moins 1 wave par phase 6. Boss spawn apr\u00e8s derni\u00e8re wave</p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#testing-in-game","title":"Testing In-Game","text":"<pre><code># Compiler le jeu\ncmake --build build\n\n# Lancer serveur\n./build/bin/r-type_server\n\n# Lancer client\n./build/bin/r-type_client\n\n# S\u00e9lectionner le niveau \u00e0 tester\n</code></pre> <p>Points de test: - \u2713 HUD affiche \"WAVE 1 / 10\" imm\u00e9diatement - \u2713 Wave 1 se d\u00e9clenche \u00e0 chunk 0 (~0px) - \u2713 Wave 2 se d\u00e9clenche \u00e0 chunk 2 (~960px) - \u2713 Waves continuent tous les 2 chunks - \u2713 Boss spawn apr\u00e8s wave 10 compl\u00e9t\u00e9e - \u2713 Aucune erreur dans les logs serveur/client</p>"},{"location":"WAVE_CONFIGURATION_GUIDE/#resume-des-regles","title":"R\u00e9sum\u00e9 des R\u00e8gles","text":""},{"location":"WAVE_CONFIGURATION_GUIDE/#pattern-2-chunks-regle-absolue","title":"Pattern 2-Chunks (R\u00e8gle Absolue)","text":"<pre><code>Waves aux chunks: 0, 2, 4, 6, 8, 10, 12, 14, 16, 18\nTotal waves: 10\nBoss spawn: 9600.0 (chunk 20)\n</code></pre>"},{"location":"WAVE_CONFIGURATION_GUIDE/#distribution-par-phase","title":"Distribution par Phase","text":"<pre><code>Phase 1 (Easy):   Waves 1-3  (chunks 0-4)\nPhase 2 (Medium): Waves 4-7  (chunks 6-12)\nPhase 3 (Hard):   Waves 8-10 (chunks 14-18)\n</code></pre>"},{"location":"WAVE_CONFIGURATION_GUIDE/#ennemis-par-difficulte","title":"Ennemis par Difficult\u00e9","text":"<pre><code>Easy:   basic (70%) + zigzag (30%)\nMedium: zigzag, bouncer, tank, kamikaze (mix)\nHard:   tank, kamikaze, bouncer (priorit\u00e9)\n</code></pre>"},{"location":"WAVE_CONFIGURATION_GUIDE/#powerups","title":"Powerups","text":"<pre><code>Phase 1: health (wave 3)\nPhase 2: shield ou speed (wave 5 ou 7)\nPhase 3: health (wave 10, avant boss)\n</code></pre>"},{"location":"WAVE_CONFIGURATION_GUIDE/#references","title":"R\u00e9f\u00e9rences","text":"<ul> <li>LEVEL_SYSTEM.md: Documentation compl\u00e8te du syst\u00e8me de niveaux</li> <li>WAVE_SYSTEM.md: Documentation du syst\u00e8me de waves</li> <li>LUA_SCRIPTING.md: Guide des scripts Lua pour ennemis/boss</li> </ul> <p>Derni\u00e8re mise \u00e0 jour: 2025-01-17 Version du pattern: 2-Chunks (v2.0)</p>"},{"location":"WAVE_SYSTEM/","title":"Wave System Documentation","text":""},{"location":"WAVE_SYSTEM/#overview","title":"Overview","text":"<p>Le syst\u00e8me de vagues (Wave System) permet de spawn automatiquement des entit\u00e9s (ennemis, murs, obstacles, bonus/powerups) bas\u00e9 sur la progression du scrolling et configur\u00e9 via des fichiers JSON.</p>"},{"location":"WAVE_SYSTEM/#architecture","title":"Architecture","text":""},{"location":"WAVE_SYSTEM/#components","title":"Components","text":"<p>Les composants suivants ont \u00e9t\u00e9 ajout\u00e9s dans <code>GameComponents.hpp</code>:</p> <ul> <li><code>WaveSpawnData</code>: Donn\u00e9es pour spawner une entit\u00e9</li> <li><code>WaveTrigger</code>: Conditions de d\u00e9clenchement d'une vague</li> <li><code>WaveController</code>: Contr\u00f4leur global du syst\u00e8me de vagues</li> <li><code>SpawnPattern</code>: Enum pour les patterns de spawn</li> <li><code>EntitySpawnType</code>: Enum pour les types d'entit\u00e9s</li> </ul>"},{"location":"WAVE_SYSTEM/#configuration","title":"Configuration","text":"<p>Les constantes de configuration sont d\u00e9finies dans <code>WaveConfig.hpp</code>:</p> <pre><code>#define WAVE_DEFAULT_SPAWN_INTERVAL     2.0f    // Intervalle par d\u00e9faut entre spawns\n#define WAVE_DEFAULT_BETWEEN_WAVES      5.0f    // Temps entre vagues\n#define WAVE_SPAWN_OFFSET_X             50.0f   // Offset de spawn \u00e0 droite\n#define WAVE_SPAWN_MIN_Y                50.0f   // Position Y minimale\n#define WAVE_SPAWN_MAX_Y                1030.0f // Position Y maximale\n// ... et plus\n</code></pre>"},{"location":"WAVE_SYSTEM/#systems","title":"Systems","text":"<ul> <li>WaveSpawnerSystem: Syst\u00e8me principal qui g\u00e8re le spawn des vagues</li> <li>WaveConfigLoader: Utilitaire pour charger et valider les configurations JSON</li> </ul>"},{"location":"WAVE_SYSTEM/#json-configuration-format","title":"JSON Configuration Format","text":""},{"location":"WAVE_SYSTEM/#structure-de-base","title":"Structure de base","text":"<pre><code>{\n  \"defaultSpawnInterval\": 2.0,\n  \"loopWaves\": false,\n  \"waves\": [...]\n}\n</code></pre>"},{"location":"WAVE_SYSTEM/#format-dune-vague","title":"Format d'une vague","text":"<pre><code>{\n  \"trigger\": {\n    \"chunkId\": 1,        // Index du chunk map (0-based, 1 chunk = 480px)\n    \"offset\": 0.5,       // Position dans le chunk (0.0 - 1.0)\n    \"timeDelay\": 2.0     // D\u00e9lai apr\u00e8s trigger (en secondes)\n  },\n  \"spawns\": [...]\n}\n</code></pre>"},{"location":"WAVE_SYSTEM/#format-dun-spawn","title":"Format d'un spawn","text":"<pre><code>{\n  \"type\": \"enemy\",           // Type: \"enemy\", \"wall\", \"obstacle\", \"powerup\"\n  \"enemyType\": \"basic\",      // Pour enemies: \"basic\", \"fast\", \"tank\", \"boss\"\n  \"bonusType\": \"health\",     // Pour powerups: \"health\", \"shield\", \"speed\"\n  \"positionX\": 1920,         // Position X absolue\n  \"positionY\": 300,          // Position Y absolue\n  \"count\": 3,                // Nombre d'entit\u00e9s \u00e0 spawner\n  \"pattern\": \"line\",         // Pattern: \"single\", \"line\", \"grid\", \"random\", \"formation\"\n  \"spacing\": 150             // Espacement entre entit\u00e9s (pour patterns)\n}\n</code></pre>"},{"location":"WAVE_SYSTEM/#spawn-patterns","title":"Spawn Patterns","text":""},{"location":"WAVE_SYSTEM/#single","title":"SINGLE","text":"<p>Spawn une seule entit\u00e9 \u00e0 la position sp\u00e9cifi\u00e9e.</p> <pre><code>{\n  \"pattern\": \"single\",\n  \"count\": 1\n}\n</code></pre>"},{"location":"WAVE_SYSTEM/#line","title":"LINE","text":"<p>Spawn des entit\u00e9s en ligne verticale.</p> <pre><code>{\n  \"pattern\": \"line\",\n  \"count\": 5,\n  \"spacing\": 100  // Espacement vertical\n}\n</code></pre>"},{"location":"WAVE_SYSTEM/#grid","title":"GRID","text":"<p>Spawn des entit\u00e9s en grille.</p> <pre><code>{\n  \"pattern\": \"grid\",\n  \"count\": 9,\n  \"spacing\": 80  // Espacement vertical\n}\n</code></pre>"},{"location":"WAVE_SYSTEM/#random","title":"RANDOM","text":"<p>Spawn des entit\u00e9s \u00e0 des positions Y al\u00e9atoires.</p> <pre><code>{\n  \"pattern\": \"random\",\n  \"count\": 4\n}\n</code></pre>"},{"location":"WAVE_SYSTEM/#formation","title":"FORMATION","text":"<p>Spawn des entit\u00e9s en formation V.</p> <pre><code>{\n  \"pattern\": \"formation\",\n  \"count\": 6,\n  \"spacing\": 80\n}\n</code></pre>"},{"location":"WAVE_SYSTEM/#usage-example","title":"Usage Example","text":""},{"location":"WAVE_SYSTEM/#1-integration-dans-le-code","title":"1. Int\u00e9gration dans le code","text":"<pre><code>#include \"systems/WaveSpawnerSystem.hpp\"\n\n// Dans votre fonction d'initialisation\nauto waveSystem = std::make_unique&lt;WaveSpawnerSystem&gt;(graphics);\nregistry.register_system(std::move(waveSystem));\n\n// Charger la configuration\nauto* waveSpawner = registry.get_system&lt;WaveSpawnerSystem&gt;();\nif (waveSpawner) {\n    waveSpawner-&gt;loadWaveConfiguration(\"assets/waves_example.json\");\n}\n</code></pre>"},{"location":"WAVE_SYSTEM/#2-exemple-de-configuration-simple","title":"2. Exemple de configuration simple","text":"<p>Voir <code>waves_simple.json</code>:</p> <pre><code>{\n  \"defaultSpawnInterval\": 2.0,\n  \"loopWaves\": false,\n  \"waves\": [\n    {\n      \"trigger\": {\n        \"chunkId\": 0,\n        \"offset\": 0.0,\n        \"timeDelay\": 0\n      },\n      \"spawns\": [\n        {\n          \"type\": \"enemy\",\n          \"enemyType\": \"basic\",\n          \"positionX\": 1920,\n          \"positionY\": 300,\n          \"count\": 1,\n          \"pattern\": \"single\",\n          \"spacing\": 0\n        }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"WAVE_SYSTEM/#3-exemple-de-configuration-avancee","title":"3. Exemple de configuration avanc\u00e9e","text":"<p>Voir <code>waves_example.json</code> pour un exemple complet avec: - 7 vagues diff\u00e9rentes - Multiples patterns de spawn - Combinaisons d'ennemis et de murs - Boss final</p>"},{"location":"WAVE_SYSTEM/#configuration-des-entites","title":"Configuration des Entit\u00e9s","text":""},{"location":"WAVE_SYSTEM/#enemies","title":"Enemies","text":"<p>Les statistiques des ennemis sont d\u00e9finies dans <code>CombatConfig.hpp</code>:</p> <ul> <li>BASIC: Sant\u00e9 30, Vitesse 100, Cooldown 2.0s</li> <li>FAST: Sant\u00e9 20, Vitesse 200, Cooldown 1.5s</li> <li>TANK: Sant\u00e9 100, Vitesse 50, Cooldown 3.0s</li> <li>BOSS: Sant\u00e9 500, Vitesse 80, Cooldown 0.8s</li> </ul>"},{"location":"WAVE_SYSTEM/#walls-obstacles","title":"Walls &amp; Obstacles","text":"<p>Configur\u00e9s dans <code>WaveConfig.hpp</code>:</p> <ul> <li>Murs: Sant\u00e9 100, Taille 50x100</li> <li>Obstacles: Sant\u00e9 50, Taille 50x100</li> </ul>"},{"location":"WAVE_SYSTEM/#powerups-bonus","title":"Powerups (Bonus)","text":"<p>Trois types de bonus sont disponibles:</p> <ul> <li>health (Vert): +20 HP au joueur</li> <li>shield (Violet): Protection d'1 hit (cercle violet autour du joueur)</li> <li>speed (Bleu): +50% de vitesse pendant 20 secondes</li> </ul> <p>Exemple de spawn de bonus:</p> <pre><code>{\n  \"type\": \"powerup\",\n  \"bonusType\": \"health\",\n  \"positionX\": 1920,\n  \"positionY\": 500,\n  \"count\": 1,\n  \"pattern\": \"single\"\n}\n</code></pre>"},{"location":"WAVE_SYSTEM/#tips-best-practices","title":"Tips &amp; Best Practices","text":""},{"location":"WAVE_SYSTEM/#1-planification-des-vagues","title":"1. Planification des vagues","text":"<ul> <li>Commencer avec des vagues simples (SINGLE, LINE)</li> <li>Augmenter progressivement la difficult\u00e9</li> <li>Utiliser <code>chunkId</code> pour positionner les vagues par rapport au d\u00e9cor (1 chunk = 30 tiles)</li> <li>Utiliser <code>timeDelay</code> pour cr\u00e9er du suspense avant les boss</li> </ul>"},{"location":"WAVE_SYSTEM/#2-patterns-de-spawn","title":"2. Patterns de spawn","text":"<ul> <li>LINE: Parfait pour des formations d\u00e9fensives</li> <li>GRID: Bon pour cr\u00e9er des murs d'ennemis</li> <li>RANDOM: Ajoute de l'impr\u00e9visibilit\u00e9</li> <li>FORMATION: Id\u00e9al pour des escadrons organis\u00e9s</li> </ul>"},{"location":"WAVE_SYSTEM/#3-combinaisons-dentites","title":"3. Combinaisons d'entit\u00e9s","text":"<p>Combiner diff\u00e9rents types dans une m\u00eame vague:</p> <pre><code>{\n  \"spawns\": [\n    {\n      \"type\": \"wall\",\n      \"positionX\": 1920,\n      \"positionY\": 200,\n      \"count\": 2,\n      \"pattern\": \"line\",\n      \"spacing\": 400\n    },\n    {\n      \"type\": \"enemy\",\n      \"enemyType\": \"tank\",\n      \"positionX\": 2000,\n      \"positionY\": 400,\n      \"count\": 1,\n      \"pattern\": \"single\"\n    }\n  ]\n}\n</code></pre>"},{"location":"WAVE_SYSTEM/#4-testing","title":"4. Testing","text":"<p>Utiliser <code>waves_simple.json</code> pour tester: - V\u00e9rifier que les spawns fonctionnent - Ajuster les positions - Tester les patterns</p>"},{"location":"WAVE_SYSTEM/#limites-du-systeme","title":"Limites du syst\u00e8me","text":"<p>D\u00e9finies dans <code>WaveConfig.hpp</code>:</p> <ul> <li><code>WAVE_MAX_ACTIVE_WAVES</code>: 10 vagues maximum</li> <li><code>WAVE_MAX_ENTITIES_PER_WAVE</code>: 50 entit\u00e9s par vague maximum</li> <li><code>WAVE_MIN_SPAWN_INTERVAL</code>: 0.5s minimum entre spawns</li> <li><code>WAVE_MAX_SPAWN_INTERVAL</code>: 10.0s maximum entre spawns</li> <li><code>WAVE_SPAWN_MIN_Y</code>: 50px position Y minimale</li> <li><code>WAVE_SPAWN_MAX_Y</code>: 1030px position Y maximale</li> </ul>"},{"location":"WAVE_SYSTEM/#troubleshooting","title":"Troubleshooting","text":""},{"location":"WAVE_SYSTEM/#les-vagues-ne-se-declenchent-pas","title":"Les vagues ne se d\u00e9clenchent pas","text":"<ul> <li>V\u00e9rifier que le syst\u00e8me de scrolling est actif</li> <li>V\u00e9rifier que <code>chunkId</code> et <code>offset</code> sont corrects (0-based)</li> <li>Regarder les logs console pour les messages de debug</li> </ul>"},{"location":"WAVE_SYSTEM/#les-entites-spawn-au-mauvais-endroit","title":"Les entit\u00e9s spawn au mauvais endroit","text":"<ul> <li>V\u00e9rifier <code>positionX</code> et <code>positionY</code></li> <li>V\u00e9rifier que les positions Y sont entre <code>WAVE_SPAWN_MIN_Y</code> et <code>WAVE_SPAWN_MAX_Y</code></li> <li>Ajuster <code>spacing</code> pour les patterns</li> </ul>"},{"location":"WAVE_SYSTEM/#le-json-ne-se-charge-pas","title":"Le JSON ne se charge pas","text":"<ul> <li>V\u00e9rifier la syntaxe JSON (virgules, guillemets, accolades)</li> <li>V\u00e9rifier le chemin du fichier</li> <li>Regarder les messages d'erreur dans la console</li> </ul>"},{"location":"WAVE_SYSTEM/#files-structure","title":"Files Structure","text":"<pre><code>src/r-type/game-logic/\n\u251c\u2500\u2500 include/\n\u2502   \u251c\u2500\u2500 components/\n\u2502   \u2502   \u251c\u2500\u2500 GameComponents.hpp     # Wave components definitions\n\u2502   \u2502   \u2514\u2500\u2500 WaveConfig.hpp         # Wave configuration defines\n\u2502   \u251c\u2500\u2500 systems/\n\u2502   \u2502   \u2514\u2500\u2500 WaveSpawnerSystem.hpp  # Wave spawner system header\n\u2502   \u2514\u2500\u2500 utils/\n\u2502       \u2514\u2500\u2500 WaveConfigLoader.hpp   # JSON loader header\n\u2514\u2500\u2500 src/\n    \u251c\u2500\u2500 systems/\n    \u2502   \u2514\u2500\u2500 WaveSpawnerSystem.cpp  # Wave spawner implementation\n    \u2514\u2500\u2500 utils/\n        \u2514\u2500\u2500 WaveConfigLoader.cpp   # JSON loader implementation\n\nsrc/r-type/assets/\n\u251c\u2500\u2500 waves_example.json             # Complex example\n\u2514\u2500\u2500 waves_simple.json              # Simple example for testing\n</code></pre>"},{"location":"WAVE_SYSTEM/#future-improvements","title":"Future Improvements","text":"<ul> <li>[x] Support pour les powerups (health, shield, speed)</li> <li>[ ] Patterns de spawn plus complexes (cercle, spirale)</li> <li>[ ] \u00c9v\u00e9nements scriptables (changement de musique, effets visuels)</li> <li>[ ] Conditions de trigger multiples (temps ET distance)</li> <li>[ ] Support pour les animations de spawn</li> <li>[ ] \u00c9diteur visuel de vagues</li> </ul>"},{"location":"contributing/","title":"Contributing to R-Type","text":"<p>Thank you for your interest in contributing to R-Type! This document provides guidelines and instructions for contributing to the project.</p>"},{"location":"contributing/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Getting Started</li> <li>Development Environment Setup</li> <li>Code Quality Tools</li> <li>Building the Project</li> <li>Code Style</li> <li>Submitting Changes</li> </ul>"},{"location":"contributing/#getting-started","title":"Getting Started","text":"<ol> <li>Fork the repository</li> <li>Clone your fork: <code>git clone https://github.com/YOUR_USERNAME/Mirror-R-Type.git</code></li> <li>Create a feature branch: <code>git checkout -b feature/your-feature-name</code></li> <li>Make your changes</li> <li>Test your changes</li> <li>Submit a pull request</li> </ol>"},{"location":"contributing/#development-environment-setup","title":"Development Environment Setup","text":""},{"location":"contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>C++ Compiler: GCC 10+ or Clang 12+ with C++20 support</li> <li>CMake: Version 3.20 or higher</li> <li>Git: For version control</li> </ul>"},{"location":"contributing/#required-development-tools","title":"Required Development Tools","text":""},{"location":"contributing/#clang-tidy-code-linter","title":"clang-tidy (Code Linter)","text":"<p>clang-tidy is used for static code analysis and enforcing code quality standards.</p> <p>Installation:</p> <p>Ubuntu/Debian: <pre><code>sudo apt-get update\nsudo apt-get install clang-tidy\n</code></pre></p> <p>Fedora/RedHat: <pre><code>sudo dnf install clang-tools-extra\n</code></pre></p> <p>macOS: <pre><code>brew install llvm\n</code></pre></p> <p>Windows: <pre><code># Using Chocolatey\nchoco install llvm\n\n# Or download from https://releases.llvm.org/\n</code></pre></p> <p>Verify Installation: <pre><code>clang-tidy --version\n</code></pre></p>"},{"location":"contributing/#code-quality-tools","title":"Code Quality Tools","text":""},{"location":"contributing/#running-clang-tidy","title":"Running clang-tidy","text":"<p>The project includes clang-tidy integration for code quality checks.</p>"},{"location":"contributing/#during-build-optional","title":"During Build (Optional)","text":"<p>To enable clang-tidy analysis during compilation:</p> <pre><code>cmake -DENABLE_CLANG_TIDY=ON -B build\ncmake --build build\n</code></pre> <p>Note: This is disabled by default to speed up regular builds.</p>"},{"location":"contributing/#manual-analysis","title":"Manual Analysis","text":"<p>To analyze specific files:</p> <pre><code># Single file\nclang-tidy path/to/file.cpp -- -std=c++20\n\n# All C++ files\nfind . -name '*.cpp' -o -name '*.hpp' | xargs clang-tidy -p build\n\n# With compile commands database\ncmake -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -B build\nclang-tidy -p build path/to/file.cpp\n</code></pre>"},{"location":"contributing/#auto-fix-issues","title":"Auto-fix Issues","text":"<p>To automatically apply suggested fixes:</p> <pre><code>clang-tidy -fix path/to/file.cpp -- -std=c++20\n</code></pre>"},{"location":"contributing/#configuration","title":"Configuration","text":"<p>The project's clang-tidy configuration is located in .clang-tidy at the repository root.</p> <p>For detailed linting documentation, see doc/LINTING.md.</p>"},{"location":"contributing/#building-the-project","title":"Building the Project","text":""},{"location":"contributing/#standard-build","title":"Standard Build","text":"<pre><code>cmake -S . -B build -DCMAKE_BUILD_TYPE=Release\ncmake --build build\n</code></pre>"},{"location":"contributing/#debug-build","title":"Debug Build","text":"<pre><code>cmake -S . -B build -DCMAKE_BUILD_TYPE=Debug\ncmake --build build\n</code></pre>"},{"location":"contributing/#build-options","title":"Build Options","text":"<ul> <li><code>BUILD_CLIENT</code>: Build client executable (default: ON)</li> <li><code>BUILD_SERVER</code>: Build server executable (default: ON)</li> <li><code>ENABLE_CLANG_TIDY</code>: Enable clang-tidy during build (default: OFF)</li> </ul> <p>Example: <pre><code>cmake -S . -B build -DBUILD_CLIENT=OFF -DBUILD_SERVER=ON\n</code></pre></p>"},{"location":"contributing/#code-style","title":"Code Style","text":""},{"location":"contributing/#naming-conventions","title":"Naming Conventions","text":"<ul> <li>Namespaces: <code>lower_case</code></li> <li>Classes/Structs: <code>CamelCase</code></li> <li>Functions: <code>camelBack</code></li> <li>Variables: <code>camelBack</code></li> <li>Private/Protected Members: suffix with <code>_</code></li> <li>Macros: <code>UPPER_CASE</code></li> <li>Enum Constants: <code>UPPER_CASE</code></li> </ul>"},{"location":"contributing/#example","title":"Example","text":"<pre><code>namespace game_engine {\n\nclass EntityManager {\npublic:\n    void addEntity(Entity* entity);\n    size_t getEntityCount() const;\n\nprivate:\n    std::vector&lt;Entity*&gt; entities_;\n    size_t maxEntities_;\n};\n\n} // namespace game_engine\n</code></pre>"},{"location":"contributing/#best-practices","title":"Best Practices","text":"<ul> <li>Use C++20 features when appropriate</li> <li>Prefer smart pointers over raw pointers</li> <li>Follow RAII principles</li> <li>Write self-documenting code</li> <li>Add comments only when necessary to explain \"why\", not \"what\"</li> <li>Keep functions small and focused</li> <li>Avoid magic numbers; use named constants</li> </ul>"},{"location":"contributing/#submitting-changes","title":"Submitting Changes","text":""},{"location":"contributing/#before-submitting","title":"Before Submitting","text":"<ol> <li>Build the project to ensure it compiles without errors</li> <li>Run clang-tidy on your changes to catch potential issues</li> <li>Test your changes thoroughly</li> <li>Write clear commit messages following the format:    <pre><code>type: brief description\n\nDetailed explanation of what changed and why.\n</code></pre></li> </ol> <p>Types: <code>feat</code>, <code>fix</code>, <code>refactor</code>, <code>docs</code>, <code>test</code>, <code>chore</code></p>"},{"location":"contributing/#pull-request-process","title":"Pull Request Process","text":"<ol> <li>Update documentation if you've changed APIs or added features</li> <li>Ensure CI passes: All GitHub Actions workflows must succeed</li> <li>Target the correct branch:</li> <li>Features and fixes: target <code>dev</code> branch</li> <li>Hotfixes: may target <code>main</code> branch (discuss with maintainers first)</li> <li>Request review from maintainers</li> <li>Address feedback promptly and professionally</li> </ol>"},{"location":"contributing/#cicd","title":"CI/CD","text":"<p>The project uses GitHub Actions for continuous integration:</p> <ul> <li>Build Job: Builds the project on Ubuntu and Windows</li> <li>Lint Job: Runs clang-tidy analysis (non-blocking, only on PRs to <code>main</code>)</li> </ul> <p>Pull requests to <code>main</code> will include clang-tidy analysis results as artifacts. While the linter is non-blocking, please address warnings when reasonable.</p>"},{"location":"contributing/#questions","title":"Questions?","text":"<p>If you have questions or need help, feel free to:</p> <ul> <li>Open an issue for bugs or feature requests</li> <li>Start a discussion for general questions</li> <li>Reach out to the maintainers</li> </ul> <p>Thank you for contributing to R-Type!</p>"},{"location":"create-room-archi/","title":"CreateRoom Module - Architecture Documentation","text":""},{"location":"create-room-archi/#structure-modulaire","title":"\ud83d\udcc1 Structure Modulaire","text":"<pre><code>createroom/\n\u251c\u2500\u2500 CreateRoomConfig.hpp              # Configuration &amp; constantes\n\u251c\u2500\u2500 CreateRoomInput.hpp/cpp           # Gestion des inputs (clics circulaires)\n\u251c\u2500\u2500 CreateRoomRenderer.hpp/cpp        # Rendu bas niveau (textures, shapes)\n\u251c\u2500\u2500 CreateRoomInitializer.hpp/cpp     # Initialisation des UI elements\n\u251c\u2500\u2500 CreateRoomUpdater.hpp/cpp         # Logique de mise \u00e0 jour\n\u2514\u2500\u2500 CreateRoomDrawer.hpp/cpp          # Logique de dessin haut niveau\n</code></pre>"},{"location":"create-room-archi/#responsabilites-de-chaque-module","title":"\ud83c\udfaf Responsabilit\u00e9s de chaque module","text":""},{"location":"create-room-archi/#createroomconfighpp","title":"CreateRoomConfig.hpp","text":"<ul> <li>R\u00f4le: D\u00e9finit toutes les constantes de layout et styling</li> <li>Contenu:</li> <li>Dimensions (tailles, espacements)</li> <li>Couleurs (background, bordures, glow)</li> <li>Chemins des assets (textures)</li> <li>Utilisation: Import\u00e9 par tous les autres modules</li> </ul>"},{"location":"create-room-archi/#createroominputhppcpp","title":"CreateRoomInput.hpp/cpp","text":"<ul> <li>R\u00f4le: G\u00e8re toute la logique d'input utilisateur</li> <li>Fonctions principales:</li> <li><code>handle_difficulty_click()</code> - D\u00e9tection de clic circulaire pour difficult\u00e9s</li> <li><code>handle_gamemode_click()</code> - D\u00e9tection de clic circulaire pour modes de jeu</li> <li><code>is_point_in_circle()</code> - Utilitaire de collision circulaire</li> <li>D\u00e9pendances: IInputPlugin, protocol::Payloads</li> </ul>"},{"location":"create-room-archi/#createroomrendererhppcpp","title":"CreateRoomRenderer.hpp/cpp","text":"<ul> <li>R\u00f4le: Rendu bas niveau des \u00e9l\u00e9ments graphiques</li> <li>Classe TexturePack:</li> <li>Charge et stocke toutes les textures</li> <li><code>load()</code> - Chargement paresseux des textures</li> <li>Classe Renderer:</li> <li><code>draw_background()</code> - Arri\u00e8re-plan avec gradients</li> <li><code>draw_stepper()</code> - Indicateur de progression des steps</li> <li><code>draw_map_selection()</code> - Rendu des previews de maps (rectangulaires)</li> <li><code>draw_difficulty_selection()</code> - Rendu des ic\u00f4nes de difficult\u00e9 (circulaires)</li> <li><code>draw_gamemode_selection()</code> - Rendu des ic\u00f4nes de mode de jeu (circulaires)</li> <li><code>draw_circular_image()</code> - Utilitaire pour dessiner image + effets circulaires</li> <li>D\u00e9pendances: IGraphicsPlugin, protocol::Payloads</li> </ul>"},{"location":"create-room-archi/#createroominitializerhppcpp","title":"CreateRoomInitializer.hpp/cpp","text":"<ul> <li>R\u00f4le: Initialise tous les \u00e9l\u00e9ments UI des diff\u00e9rents steps</li> <li>Fonctions principales:</li> <li><code>init_room_info_step()</code> - Cr\u00e9e labels et text fields (nom de room, password)</li> <li><code>init_map_selection_step()</code> - Cr\u00e9e les boutons de s\u00e9lection de map</li> <li><code>init_difficulty_step()</code> - Pas de boutons (images circulaires cliquables)</li> <li><code>init_game_mode_step()</code> - Pas de boutons (images circulaires cliquables)</li> <li><code>init_navigation_buttons()</code> - Cr\u00e9e Previous/Next/Create buttons</li> <li>D\u00e9pendances: UIButton, UILabel, UITextField</li> </ul>"},{"location":"create-room-archi/#createroomupdaterhppcpp","title":"CreateRoomUpdater.hpp/cpp","text":"<ul> <li>R\u00f4le: G\u00e8re la logique de mise \u00e0 jour de chaque step</li> <li>Fonctions principales:</li> <li><code>update_room_info_step()</code> - Met \u00e0 jour les text fields</li> <li><code>update_map_selection_step()</code> - Met \u00e0 jour les boutons de map (s\u00e9lection)</li> <li><code>update_difficulty_step()</code> - D\u00e9l\u00e8gue \u00e0 InputHandler pour clics circulaires</li> <li><code>update_game_mode_step()</code> - D\u00e9l\u00e8gue \u00e0 InputHandler pour clics circulaires</li> <li><code>update_navigation_buttons()</code> - Met \u00e0 jour les boutons de navigation</li> <li><code>is_any_field_focused()</code> - Utilitaire pour v\u00e9rifier le focus des text fields</li> <li>D\u00e9pendances: IGraphicsPlugin, IInputPlugin, CreateRoomInput</li> </ul>"},{"location":"create-room-archi/#createroomdrawerhppcpp","title":"CreateRoomDrawer.hpp/cpp","text":"<ul> <li>R\u00f4le: Orchestre le rendu de chaque step (haut niveau)</li> <li>Fonctions principales:</li> <li><code>draw_room_info_step()</code> - Dessine labels + text fields</li> <li><code>draw_map_selection_step()</code> - Dessine images de maps + boutons (via Renderer)</li> <li><code>draw_difficulty_step()</code> - Dessine images circulaires de difficult\u00e9 (via Renderer)</li> <li><code>draw_game_mode_step()</code> - Dessine images circulaires de mode de jeu (via Renderer)</li> <li><code>draw_navigation_buttons()</code> - Dessine boutons avec texte dynamique</li> <li>D\u00e9pendances: Renderer, UIButton, UILabel, UITextField</li> </ul>"},{"location":"create-room-archi/#flux-de-donnees","title":"\ud83d\udd04 Flux de donn\u00e9es","text":""},{"location":"create-room-archi/#initialisation","title":"Initialisation","text":"<pre><code>CreateRoomScreen::initialize()\n  \u2514\u2500&gt; Initializer::init_room_info_step()\n  \u2514\u2500&gt; Initializer::init_map_selection_step()\n  \u2514\u2500&gt; Initializer::init_difficulty_step()\n  \u2514\u2500&gt; Initializer::init_game_mode_step()\n  \u2514\u2500&gt; Initializer::init_navigation_buttons()\n</code></pre>"},{"location":"create-room-archi/#update","title":"Update","text":"<pre><code>CreateRoomScreen::update()\n  \u2514\u2500&gt; Updater::is_any_field_focused()\n  \u2514\u2500&gt; Updater::update_*_step()\n      \u2514\u2500&gt; InputHandler::handle_*_click() (pour difficulty &amp; gamemode)\n  \u2514\u2500&gt; Updater::update_navigation_buttons()\n</code></pre>"},{"location":"create-room-archi/#draw","title":"Draw","text":"<pre><code>CreateRoomScreen::draw()\n  \u2514\u2500&gt; TexturePack::load() (lazy loading)\n  \u2514\u2500&gt; Renderer::draw_background()\n  \u2514\u2500&gt; Renderer::draw_stepper()\n  \u2514\u2500&gt; Drawer::draw_*_step()\n      \u2514\u2500&gt; Renderer::draw_*_selection() (pour maps, difficulty, gamemode)\n  \u2514\u2500&gt; Drawer::draw_navigation_buttons()\n</code></pre>"},{"location":"create-room-archi/#avantages-de-cette-architecture","title":"\u2728 Avantages de cette architecture","text":"<ol> <li>S\u00e9paration des responsabilit\u00e9s: Chaque module a un r\u00f4le unique et bien d\u00e9fini</li> <li>R\u00e9utilisabilit\u00e9: Les renderers peuvent \u00eatre r\u00e9utilis\u00e9s dans d'autres \u00e9crans</li> <li>Testabilit\u00e9: Chaque module peut \u00eatre test\u00e9 ind\u00e9pendamment</li> <li>Maintenabilit\u00e9: Modifications localis\u00e9es dans des fichiers sp\u00e9cifiques</li> <li>Lisibilit\u00e9: Code court et focalis\u00e9 (&lt; 150 lignes par fichier)</li> <li>Extensibilit\u00e9: Facile d'ajouter de nouveaux steps ou fonctionnalit\u00e9s</li> </ol>"},{"location":"create-room-archi/#comparaison","title":"\ud83d\udcca Comparaison","text":""},{"location":"create-room-archi/#avant-monolithique","title":"Avant (monolithique)","text":"<ul> <li>1 fichier: CreateRoomScreen.cpp (620+ lignes)</li> <li>Tout m\u00e9lang\u00e9: init, update, draw, rendering</li> <li>Difficile \u00e0 naviguer et maintenir</li> </ul>"},{"location":"create-room-archi/#apres-modulaire","title":"Apr\u00e8s (modulaire)","text":"<ul> <li>7 fichiers bien organis\u00e9s</li> <li>CreateRoomScreen.cpp: 275 lignes (56% de r\u00e9duction!)</li> <li>Chaque module: 50-150 lignes</li> <li>Code clair, focalis\u00e9, facile \u00e0 maintenir</li> </ul>"},{"location":"create-room-archi/#comment-etendre","title":"\ud83d\ude80 Comment \u00e9tendre","text":""},{"location":"create-room-archi/#ajouter-un-nouveau-step","title":"Ajouter un nouveau step","text":"<ol> <li>Ajouter enum dans <code>CreateRoomScreen.hpp</code></li> <li>Cr\u00e9er <code>init_new_step()</code> dans <code>Initializer</code></li> <li>Cr\u00e9er <code>update_new_step()</code> dans <code>Updater</code></li> <li>Cr\u00e9er <code>draw_new_step()</code> dans <code>Drawer</code></li> <li>Mettre \u00e0 jour les switch cases dans <code>CreateRoomScreen.cpp</code></li> </ol>"},{"location":"create-room-archi/#ajouter-un-nouvel-element-ui","title":"Ajouter un nouvel \u00e9l\u00e9ment UI","text":"<ol> <li>Ajouter constantes dans <code>Config.hpp</code></li> <li>Modifier <code>Initializer</code> pour cr\u00e9er l'\u00e9l\u00e9ment</li> <li>Modifier <code>Updater</code> pour la logique d'update</li> <li>Modifier <code>Drawer</code> pour le rendu</li> </ol>"}]}